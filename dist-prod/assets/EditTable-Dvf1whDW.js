import{d as T,e as q,z,u as B,Q as J,r as s,f as M,O,P,a,J as Q,o as S,w as l,h as e,v as j,x as F,y as G,B as U,C as A,M as D,l as p}from"./index-QQaZ7rbf.js";import{_ as H}from"./ContentWrap.vue_vue_type_script_setup_true_lang-CerucUbi.js";import{u as K}from"./tagsView-BORhiYBx.js";import{_ as L}from"./BasicInfoForm.vue_vue_type_script_setup_true_lang-AzQFINp7.js";import{_ as N}from"./ColumInfoForm.vue_vue_type_script_setup_true_lang-BiVxD9dB.js";import{_ as W}from"./GenerateInfoForm.vue_vue_type_script_setup_true_lang-Bv8LjA6d.js";import{g as X,u as Y}from"./index-D-DH1qWO.js";import"./index-D_95hI5s.js";import"./formRules-C_yg8zTD.js";import"./dict.type-DkNzX14C.js";import"./el-dropdown-item-D1XCTc1V.js";import"./el-tree-select-BtYVvkSk.js";import"./tree-Bh1o0y0-.js";import"./index-D4W76Tl3.js";const Z=T({name:"InfraCodegenEditTable",__name:"EditTable",setup($){const{t:_}=q(),b=z(),{push:y,currentRoute:g}=B(),{query:v}=J(),{delView:w}=K(),n=s(!1),r=s("colum"),f=s(),k=s(),i=s(),t=s({table:{},columns:[]}),I=async()=>{var o,u;if(a(t)){await((o=a(f))==null?void 0:o.validate()),await((u=a(i))==null?void 0:u.validate());try{await Y(t.value),b.success(_("common.updateSuccess")),c()}catch{}}},c=()=>{w(a(g)),y("/infra/codegen")};return M(()=>{(async()=>{const o=v.id;if(o){n.value=!0;try{t.value=await X(o)}finally{n.value=!1}}})()}),(o,u)=>{const m=G,h=j,d=D,C=A,R=U,V=H,x=P;return O((S(),Q(V,null,{default:l(()=>[e(h,{modelValue:a(r),"onUpdate:modelValue":u[0]||(u[0]=E=>F(r)?r.value=E:null)},{default:l(()=>[e(m,{label:"\u57FA\u672C\u4FE1\u606F",name:"basicInfo"},{default:l(()=>[e(a(L),{ref_key:"basicInfoRef",ref:f,table:a(t).table},null,8,["table"])]),_:1}),e(m,{label:"\u5B57\u6BB5\u4FE1\u606F",name:"colum"},{default:l(()=>[e(a(N),{ref_key:"columInfoRef",ref:k,columns:a(t).columns},null,8,["columns"])]),_:1}),e(m,{label:"\u751F\u6210\u4FE1\u606F",name:"generateInfo"},{default:l(()=>[e(a(W),{ref_key:"generateInfoRef",ref:i,table:a(t).table,columns:a(t).columns},null,8,["table","columns"])]),_:1})]),_:1},8,["modelValue"]),e(R,null,{default:l(()=>[e(C,{style:{float:"right"}},{default:l(()=>[e(d,{loading:a(n),type:"primary",onClick:I},{default:l(()=>[p("\u4FDD\u5B58")]),_:1},8,["loading"]),e(d,{onClick:c},{default:l(()=>[p("\u8FD4\u56DE")]),_:1})]),_:1})]),_:1})]),_:1})),[[x,a(n)]])}}});export{Z as default};
