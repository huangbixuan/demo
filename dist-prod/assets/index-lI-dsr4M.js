import{d as B,z as J,e as M,r as i,A as O,f as j,R as E,c as G,o as n,h as e,w as a,B as H,a as l,C as Q,S as W,T as z,O as m,M as $,l as d,N as X,J as f,n as Y,p as Z,P as ee,F as ae}from"./index-QQaZ7rbf.js";import{_ as le}from"./index.vue_vue_type_script_setup_true_lang-CtP16Cnh.js";import{_ as oe}from"./ContentWrap.vue_vue_type_script_setup_true_lang-CerucUbi.js";import{d as te}from"./formatTime-esrXlwGe.js";import{d as se}from"./download--D_IyRio.js";import{S as k}from"./index-DkuRYFz4.js";import{_ as pe}from"./ShopDueLabelForm.vue_vue_type_script_setup_true_lang-C4IyIKgm.js";import"./index-BctfKmg_.js";import"./index-D_95hI5s.js";import"./Dialog.vue_vue_type_style_index_0_lang-BZRnyNPI.js";import"./index-D-uYqOkD.js";const re=B({name:"ShopDueLabel",__name:"index",setup(ie){const b=J(),{t:L}=M(),y=i(!0),v=i([]),C=i(0),o=O({pageNo:1,pageSize:10,title:void 0,shopId:void 0,shopName:void 0,createTime:[]}),S=i(),w=i(!1),u=async()=>{y.value=!0;try{const p=await k.getShopDueLabelPage(o);v.value=p.list,C.value=p.total}finally{y.value=!1}},h=()=>{o.pageNo=1,u()},P=()=>{S.value.resetFields(),h()},N=i(),D=(p,t)=>{N.value.open(p,t)},F=async()=>{try{await b.exportConfirm(),w.value=!0;const p=await k.exportShopDueLabel(o);se.excel(p,"\u9884\u7EA6\u6807\u7B7E.xls")}catch{}finally{w.value=!1}};return j(()=>{u()}),(p,t)=>{const V=W,x=Q,g=X,r=$,R=H,U=oe,c=Z,T=Y,I=le,_=E("hasPermi"),K=ee;return n(),G(ae,null,[e(U,null,{default:a(()=>[e(R,{class:"-mb-15px",model:l(o),ref_key:"queryFormRef",ref:S,inline:!0,"label-width":"68px"},{default:a(()=>[e(x,{label:"\u6807\u7B7E\u540D\u79F0",prop:"title"},{default:a(()=>[e(V,{modelValue:l(o).title,"onUpdate:modelValue":t[0]||(t[0]=s=>l(o).title=s),placeholder:"\u8BF7\u8F93\u5165\u6807\u7B7E\u540D\u79F0",clearable:"",onKeyup:z(h,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),e(x,{label:"\u5E97\u94FA\u540D\u79F0",prop:"shopName"},{default:a(()=>[e(V,{modelValue:l(o).shopName,"onUpdate:modelValue":t[1]||(t[1]=s=>l(o).shopName=s),placeholder:"\u8BF7\u8F93\u5165\u5E97\u94FA\u540D\u79F0",clearable:"",onKeyup:z(h,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),e(x,null,{default:a(()=>[e(r,{onClick:h},{default:a(()=>[e(g,{icon:"ep:search",class:"mr-5px"}),d(" \u641C\u7D22")]),_:1}),e(r,{onClick:P},{default:a(()=>[e(g,{icon:"ep:refresh",class:"mr-5px"}),d(" \u91CD\u7F6E")]),_:1}),m((n(),f(r,{type:"primary",plain:"",onClick:t[2]||(t[2]=s=>D("create"))},{default:a(()=>[e(g,{icon:"ep:plus",class:"mr-5px"}),d(" \u65B0\u589E ")]),_:1})),[[_,["store:shop-due-label:create"]]]),m((n(),f(r,{type:"success",plain:"",onClick:F,loading:l(w)},{default:a(()=>[e(g,{icon:"ep:download",class:"mr-5px"}),d(" \u5BFC\u51FA ")]),_:1},8,["loading"])),[[_,["store:shop-due-label:export"]]])]),_:1})]),_:1},8,["model"])]),_:1}),e(U,null,{default:a(()=>[m((n(),f(T,{data:l(v),stripe:!0,"show-overflow-tooltip":!0},{default:a(()=>[e(c,{label:"ID",align:"center",prop:"id"}),e(c,{label:"\u6807\u7B7E\u540D\u79F0",align:"center",prop:"title"}),e(c,{label:"\u5E97\u94FA\u540D\u79F0",align:"center",prop:"shopName"}),e(c,{label:"\u521B\u5EFA\u65F6\u95F4",align:"center",prop:"createTime",formatter:l(te),width:"180px"},null,8,["formatter"]),e(c,{label:"\u64CD\u4F5C",align:"center"},{default:a(s=>[m((n(),f(r,{link:"",type:"primary",onClick:q=>D("update",s.row.id)},{default:a(()=>[d(" \u7F16\u8F91 ")]),_:2},1032,["onClick"])),[[_,["store:shop-due-label:update"]]]),m((n(),f(r,{link:"",type:"danger",onClick:q=>(async A=>{try{await b.delConfirm(),await k.deleteShopDueLabel(A),b.success(L("common.delSuccess")),await u()}catch{}})(s.row.id)},{default:a(()=>[d(" \u5220\u9664 ")]),_:2},1032,["onClick"])),[[_,["store:shop-due-label:delete"]]])]),_:1})]),_:1},8,["data"])),[[K,l(y)]]),e(I,{total:l(C),page:l(o).pageNo,"onUpdate:page":t[3]||(t[3]=s=>l(o).pageNo=s),limit:l(o).pageSize,"onUpdate:limit":t[4]||(t[4]=s=>l(o).pageSize=s),onPagination:u},null,8,["total","page","limit"])]),_:1}),e(pe,{ref_key:"formRef",ref:N,onSuccess:u},null,512)],64)}}});export{re as default};
