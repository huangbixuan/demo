import{d as D,e as F,z as G,r as d,A as O,as as T,R as U,c as j,o as i,F as J,h as a,w as r,O as m,J as u,l as w,N as L,M as q,P as B,a as s,p as E,n as H}from"./index-QQaZ7rbf.js";import{_ as K}from"./ContentWrap.vue_vue_type_script_setup_true_lang-CerucUbi.js";import{_ as Q}from"./index.vue_vue_type_script_setup_true_lang-CtP16Cnh.js";import{d as V}from"./formatTime-esrXlwGe.js";import{k as W,l as X}from"./index-DhEE4K7L.js";import{_ as Y}from"./Demo03GradeForm.vue_vue_type_script_setup_true_lang-C8TA_7lo.js";const Z=D({__name:"Demo03GradeList",props:{studentId:{}},setup(I){const{t:N}=F(),c=G(),f=I,g=d(!1),k=d([]),h=d(0),l=O({pageNo:1,pageSize:10,studentId:void 0});T(()=>f.studentId,e=>{e&&(l.studentId=e,b())},{immediate:!0,deep:!0});const p=async()=>{g.value=!0;try{const e=await W(l);k.value=e.list,h.value=e.total}finally{g.value=!1}},b=()=>{l.pageNo=1,p()},v=d(),C=(e,t)=>{f.studentId?v.value.open(e,t,f.studentId):c.error("\u8BF7\u9009\u62E9\u4E00\u4E2A\u5B66\u751F")};return(e,t)=>{const z=L,_=q,n=E,S=H,x=Q,P=K,y=U("hasPermi"),M=B;return i(),j(J,null,[a(P,null,{default:r(()=>[m((i(),u(_,{plain:"",type:"primary",onClick:t[0]||(t[0]=o=>C("create"))},{default:r(()=>[a(z,{class:"mr-5px",icon:"ep:plus"}),w(" \u65B0\u589E ")]),_:1})),[[y,["infra:demo03-student:create"]]]),m((i(),u(S,{data:s(k),"show-overflow-tooltip":!0,stripe:!0},{default:r(()=>[a(n,{align:"center",label:"\u7F16\u53F7",prop:"id"}),a(n,{align:"center",label:"\u540D\u5B57",prop:"name"}),a(n,{align:"center",label:"\u73ED\u4E3B\u4EFB",prop:"teacher"}),a(n,{formatter:s(V),align:"center",label:"\u521B\u5EFA\u65F6\u95F4",prop:"createTime",width:"180px"},null,8,["formatter"]),a(n,{align:"center",label:"\u64CD\u4F5C"},{default:r(o=>[m((i(),u(_,{link:"",type:"primary",onClick:R=>C("update",o.row.id)},{default:r(()=>[w(" \u7F16\u8F91 ")]),_:2},1032,["onClick"])),[[y,["infra:demo03-student:update"]]]),m((i(),u(_,{link:"",type:"danger",onClick:R=>(async A=>{try{await c.delConfirm(),await X(A),c.success(N("common.delSuccess")),await p()}catch{}})(o.row.id)},{default:r(()=>[w(" \u5220\u9664 ")]),_:2},1032,["onClick"])),[[y,["infra:demo03-student:delete"]]])]),_:1})]),_:1},8,["data"])),[[M,s(g)]]),a(x,{limit:s(l).pageSize,"onUpdate:limit":t[1]||(t[1]=o=>s(l).pageSize=o),page:s(l).pageNo,"onUpdate:page":t[2]||(t[2]=o=>s(l).pageNo=o),total:s(h),onPagination:p},null,8,["limit","page","total"])]),_:1}),a(Y,{ref_key:"formRef",ref:v,onSuccess:p},null,512)],64)}}});export{Z as _};
