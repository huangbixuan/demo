import{d as z,e as G,z as J,r as d,A as P,J as n,o as p,w as s,O as R,B as W,a,h as t,C as X,D as H,c as k,F as C,G as U,K as Q,S as Y,c4 as Z,aW as $,U as ee,I as ae,aX as le,l as f,t as oe,P as se,M as te,x as ue}from"./index-QQaZ7rbf.js";import{_ as de}from"./Dialog.vue_vue_type_style_index_0_lang-BZRnyNPI.js";import{S as g}from"./index-RcpyhGJW.js";import{g as re}from"./index-D-uYqOkD.js";import{C as I}from"./constants-D0aoFN3l.js";const ie=z({name:"ShopDeskCategoryForm",__name:"ShopDeskCategoryForm",emits:["success"],setup(pe,{expose:w,emit:q}){const{t:c}=G(),h=J(),r=d(!1),y=d(""),i=d(!1),b=d(""),o=d({id:void 0,shopId:void 0,parentId:void 0,shopName:void 0,name:void 0,picUrl:void 0,people:void 0,sort:0,description:void 0,status:I.ENABLE}),D=P({shopId:[{required:!0,message:"\u8BF7\u9009\u62E9\u5E97\u94FA",trigger:"blur"}],name:[{required:!0,message:"\u5206\u7C7B\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],people:[{required:!0,message:"\u4EBA\u6570\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],sort:[{required:!0,message:"\u5206\u7C7B\u6392\u5E8F\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],status:[{required:!0,message:"\u5F00\u542F\u72B6\u6001\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),v=d(),V=d([]);w({open:async(u,l)=>{if(r.value=!0,y.value=c("action."+u),b.value=u,x(),F(),l){i.value=!0;try{o.value=await g.getShopDeskCategory(l)}finally{i.value=!1}}}});const N=q,A=async()=>{await v.value.validate(),i.value=!0;try{const u=o.value;b.value==="create"?(await g.createShopDeskCategory(u),h.success(c("common.createSuccess"))):(await g.updateShopDeskCategory(u),h.success(c("common.updateSuccess"))),r.value=!1,N("success")}finally{i.value=!1}},F=async()=>{try{const u=await re();V.value=u}finally{}},x=()=>{var u;o.value={id:void 0,shopId:void 0,parentId:void 0,shopName:void 0,name:void 0,picUrl:void 0,people:void 0,sort:0,description:void 0,status:I.ENABLE},(u=v.value)==null||u.resetFields()};return(u,l)=>{const B=Q,E=H,m=X,M=Y,_=Z,O=le,K=$,L=W,S=te,T=de,j=se;return p(),n(T,{title:a(y),modelValue:a(r),"onUpdate:modelValue":l[6]||(l[6]=e=>ue(r)?r.value=e:null)},{footer:s(()=>[t(S,{onClick:A,type:"primary",disabled:a(i)},{default:s(()=>[f("\u786E \u5B9A")]),_:1},8,["disabled"]),t(S,{onClick:l[5]||(l[5]=e=>r.value=!1)},{default:s(()=>[f("\u53D6 \u6D88")]),_:1})]),default:s(()=>[R((p(),n(L,{ref_key:"formRef",ref:v,model:a(o),rules:a(D),"label-width":"100px"},{default:s(()=>[t(m,{label:"\u9009\u62E9\u5E97\u94FA",prop:"shopId"},{default:s(()=>[t(E,{modelValue:a(o).shopId,"onUpdate:modelValue":l[0]||(l[0]=e=>a(o).shopId=e),placeholder:"\u9009\u62E9\u5E97\u94FA"},{default:s(()=>[(p(!0),k(C,null,U(a(V),e=>(p(),n(B,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(m,{label:"\u5206\u7C7B\u540D\u79F0",prop:"name"},{default:s(()=>[t(M,{modelValue:a(o).name,"onUpdate:modelValue":l[1]||(l[1]=e=>a(o).name=e),placeholder:"\u8BF7\u8F93\u5165\u5206\u7C7B\u540D\u79F0"},null,8,["modelValue"])]),_:1}),t(m,{label:"\u4EBA\u6570",prop:"people"},{default:s(()=>[t(_,{modelValue:a(o).people,"onUpdate:modelValue":l[2]||(l[2]=e=>a(o).people=e),placeholder:"\u8BF7\u8F93\u5165\u4EBA\u6570"},null,8,["modelValue"])]),_:1}),t(m,{label:"\u5206\u7C7B\u6392\u5E8F",prop:"sort"},{default:s(()=>[t(_,{modelValue:a(o).sort,"onUpdate:modelValue":l[3]||(l[3]=e=>a(o).sort=e),"controls-position":"right",min:0},null,8,["modelValue"])]),_:1}),t(m,{label:"\u5F00\u542F\u72B6\u6001",prop:"status"},{default:s(()=>[t(K,{modelValue:a(o).status,"onUpdate:modelValue":l[4]||(l[4]=e=>a(o).status=e)},{default:s(()=>[(p(!0),k(C,null,U(a(ee)(a(ae).COMMON_STATUS),e=>(p(),n(O,{key:e.value,label:e.value},{default:s(()=>[f(oe(e.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[j,a(i)]])]),_:1},8,["title","modelValue"])}}});export{ie as _};
