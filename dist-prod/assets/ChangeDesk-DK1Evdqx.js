import{d as A,e as B,z as G,r as u,A as J,J as m,o as r,w as s,O as K,P as M,a,B as O,h as i,C as R,D as E,c as h,F as V,G as k,K as H,M as L,l as w,x as Q,_ as T}from"./index-QQaZ7rbf.js";import{_ as W}from"./Dialog.vue_vue_type_style_index_0_lang-BZRnyNPI.js";import{j as X,f as Y}from"./index-BiAqHivH.js";import{S as Z}from"./index-RcpyhGJW.js";const $=T(A({__name:"ChangeDesk",emits:["success"],setup(ee,{expose:C,emit:x}){const{t:ae}=B(),S=G(),o=u(!1),p=u(""),n=u(!1);u("");const d=u({sourceId:void 0,cateId:void 0,targetId:void 0}),z=J({cateId:[{required:!0,message:"\u8BF7\u9009\u62E9\u533A\u57DF\u5206\u7C7B",trigger:"blur"}],targetId:[{required:!0,message:"\u8BF7\u9009\u62E9\u76EE\u6807\u684C\u53F0",trigger:"blur"}]}),c=u(),v=u([]),f=u([]);C({open:async t=>{o.value=!0,p.value="\u8F6C\u53F0",F(),d.value.sourceId=t,q()}});const D=x,U=async()=>{if(c&&await c.value.validate()){n.value=!0;try{await X(d.value),S.success("\u8F6C\u53F0\u6210\u529F"),o.value=!1,D("success")}finally{n.value=!1}}},g=async t=>{try{const l=await Y({cateId:t,pageNo:1,pageSize:30});f.value=l.list}finally{loading.value=!1}},q=async()=>{try{const t=await Z.getShopDeskCategoryPage({pageNo:1,pageSize:50});v.value=t.list}finally{}},F=()=>{var t;d.value={sourceId:void 0,cateId:void 0,targetId:void 0},(t=c.value)==null||t.resetFields()};return(t,l)=>{const I=H,y=E,_=R,N=O,b=L,P=W,j=M;return r(),m(P,{title:a(p),modelValue:a(o),"onUpdate:modelValue":l[3]||(l[3]=e=>Q(o)?o.value=e:null)},{footer:s(()=>[i(b,{onClick:U,type:"primary",disabled:a(n)},{default:s(()=>[w("\u786E \u5B9A")]),_:1},8,["disabled"]),i(b,{onClick:l[2]||(l[2]=e=>o.value=!1)},{default:s(()=>[w("\u53D6 \u6D88")]),_:1})]),default:s(()=>[K((r(),m(N,{ref_key:"formRef",ref:c,model:a(d),rules:a(z),"label-width":"120px"},{default:s(()=>[i(_,{label:"\u533A\u57DF\u5206\u7C7B",prop:"cateId"},{default:s(()=>[i(y,{modelValue:a(d).cateId,"onUpdate:modelValue":l[0]||(l[0]=e=>a(d).cateId=e),placeholder:"\u9009\u62E9\u533A\u57DF\u5206\u7C7B",onChange:g,class:"input-width"},{default:s(()=>[(r(!0),h(V,null,k(a(v),e=>(r(),m(I,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),i(_,{label:"\u76EE\u6807\u684C\u53F0",prop:"targetId"},{default:s(()=>[i(y,{modelValue:a(d).targetId,"onUpdate:modelValue":l[1]||(l[1]=e=>a(d).targetId=e),placeholder:"\u9009\u62E9\u76EE\u6807\u684C\u53F0",onChange:g,class:"input-width"},{default:s(()=>[(r(!0),h(V,null,k(a(f),e=>(r(),m(I,{key:e.id,label:e.number,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[j,a(n)]])]),_:1},8,["title","modelValue"])}}}),[["__scopeId","data-v-4c72c7b4"]]);export{$ as default};
