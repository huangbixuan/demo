import{d as A,e as D,z as F,r as d,A as M,as as O,R as T,c as J,o as i,F as L,h as e,w as r,O as u,J as m,l as w,N as q,M as B,P as E,a as o,p as G,n as H}from"./index-QQaZ7rbf.js";import{_ as K}from"./ContentWrap.vue_vue_type_script_setup_true_lang-CerucUbi.js";import{_ as Q}from"./index.vue_vue_type_script_setup_true_lang-CtP16Cnh.js";import{d as V}from"./formatTime-esrXlwGe.js";import{e as W,f as X}from"./index-DhEE4K7L.js";import{_ as Y}from"./Demo03CourseForm.vue_vue_type_script_setup_true_lang-Byyyso8X.js";const Z=A({__name:"Demo03CourseList",props:{studentId:{}},setup(N){const{t:b}=D(),c=F(),f=N,g=d(!1),k=d([]),v=d(0),s=M({pageNo:1,pageSize:10,studentId:void 0});O(()=>f.studentId,a=>{a&&(s.studentId=a,h())},{immediate:!0,deep:!0});const p=async()=>{g.value=!0;try{const a=await W(s);k.value=a.list,v.value=a.total}finally{g.value=!1}},h=()=>{s.pageNo=1,p()},C=d(),I=(a,t)=>{f.studentId?C.value.open(a,t,f.studentId):c.error("\u8BF7\u9009\u62E9\u4E00\u4E2A\u5B66\u751F")};return(a,t)=>{const z=q,_=B,n=G,S=H,x=Q,P=K,y=T("hasPermi"),R=E;return i(),J(L,null,[e(P,null,{default:r(()=>[u((i(),m(_,{plain:"",type:"primary",onClick:t[0]||(t[0]=l=>I("create"))},{default:r(()=>[e(z,{class:"mr-5px",icon:"ep:plus"}),w(" \u65B0\u589E ")]),_:1})),[[y,["infra:demo03-student:create"]]]),u((i(),m(S,{data:o(k),"show-overflow-tooltip":!0,stripe:!0},{default:r(()=>[e(n,{align:"center",label:"\u7F16\u53F7",prop:"id"}),e(n,{align:"center",label:"\u540D\u5B57",prop:"name"}),e(n,{align:"center",label:"\u5206\u6570",prop:"score"}),e(n,{formatter:o(V),align:"center",label:"\u521B\u5EFA\u65F6\u95F4",prop:"createTime",width:"180px"},null,8,["formatter"]),e(n,{align:"center",label:"\u64CD\u4F5C"},{default:r(l=>[u((i(),m(_,{link:"",type:"primary",onClick:U=>I("update",l.row.id)},{default:r(()=>[w(" \u7F16\u8F91 ")]),_:2},1032,["onClick"])),[[y,["infra:demo03-student:update"]]]),u((i(),m(_,{link:"",type:"danger",onClick:U=>(async j=>{try{await c.delConfirm(),await X(j),c.success(b("common.delSuccess")),await p()}catch{}})(l.row.id)},{default:r(()=>[w(" \u5220\u9664 ")]),_:2},1032,["onClick"])),[[y,["infra:demo03-student:delete"]]])]),_:1})]),_:1},8,["data"])),[[R,o(g)]]),e(x,{limit:o(s).pageSize,"onUpdate:limit":t[1]||(t[1]=l=>o(s).pageSize=l),page:o(s).pageNo,"onUpdate:page":t[2]||(t[2]=l=>o(s).pageNo=l),total:o(v),onPagination:p},null,8,["limit","page","total"])]),_:1}),e(Y,{ref_key:"formRef",ref:C,onSuccess:p},null,512)],64)}}});export{Z as _};
