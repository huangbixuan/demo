import{d as W,e as X,Q as G,Y as ee,Z as ae,r as h,u as te,a3 as le,a4 as se,a as e,A as oe,f as ne,c as ie,o as C,g as n,$ as E,t as u,a0 as M,h as a,w as l,a1 as re,O as pe,B as de,m as me,E as ce,C as ue,J as ge,i as fe,S as xe,T as he,a5 as we,l as U,a6 as ye,a7 as _e,a2 as be,a8 as ve,a9 as Fe,aa as q,ab as Ve,ac as ke,ad as Ne,ae as Le,af as Pe,ag as Se,ah as Te,q as je,s as Ce,_ as Ee}from"./index-QQaZ7rbf.js";import{_ as Me}from"./Verify-C8ESpzp5.js";import{_ as Ue}from"./XButton-C609XjEW.js";import{_ as I}from"./logo-EP77-adG.js";import{u as v}from"./useIcon-DeqZzk7G.js";import{T as qe,_ as Ie}from"./LocaleDropdown.vue_vue_type_script_setup_true_lang-qa3gJHjp.js";import{u as Re,L as ze,_ as Oe,a as He}from"./LoginFormTitle.vue_vue_type_script_setup_true_lang-C5h-lCN8.js";import{r as F}from"./formRules-C_yg8zTD.js";import"./el-dropdown-item-D1XCTc1V.js";const V=w=>(je("data-v-2e63cb90"),w=w(),Ce(),w),Qe={class:"relative mx-auto h-full flex"},Ye={class:"relative flex items-center text-white"},$e=V(()=>n("img",{alt:"",class:"mr-10px h-48px w-48px",src:I},null,-1)),Ae={class:"text-20px font-bold"},Be={class:"h-[calc(100%-60px)] flex items-center justify-center"},De=V(()=>n("img",{key:"1",alt:"",class:"w-350px",src:"/assets/login-box-bg-CL6i7T2F.svg"},null,-1)),Je={key:"2",class:"text-3xl text-white"},Ke={key:"3",class:"mt-5 text-14px font-normal text-white"},Ze={class:"relative flex-1 p-30px dark:bg-[var(--login-bg-color)] lt-sm:p-10px"},We={class:"flex items-center justify-between text-white at-2xl:justify-end at-xl:justify-end"},Xe={class:"flex items-center at-2xl:hidden at-xl:hidden"},Ge=V(()=>n("img",{alt:"",class:"mr-10px h-48px w-48px",src:I},null,-1)),ea={class:"text-20px font-bold"},aa={class:"flex items-center justify-end space-x-10px"},ta={class:"m-auto h-full w-[100%] flex items-center at-2xl:max-w-500px at-lg:max-w-500px at-md:max-w-500px at-xl:max-w-500px"},la=Ee(W({name:"SocialLogin",__name:"SocialLogin",setup(w){const{t:m}=X(),r=G(),k=ee(),{getPrefixCls:R}=ae(),N=R("login"),z=v({icon:"ep:house"}),O=v({icon:"ep:avatar"}),H=v({icon:"ep:lock"}),L=h(),{validForm:Q}=He(L),{getLoginState:Y}=Re(),{push:$}=te(),A=le(),_=h(!1),P=h(),B=h("blockPuzzle"),D=se(()=>e(Y)===ze.LOGIN),J={tenantName:[F],username:[F],password:[F]},t=oe({isShowPassword:!1,captchaEnable:!0,tenantEnable:!0,loginForm:{tenantName:"YSHOP\u6E90\u7801",username:"admin",password:"admin123",captchaVerification:"",rememberMe:!1}}),S=async()=>{t.captchaEnable?P.value.show():await j({})},T=h();function y(o){return new URL(decodeURIComponent(location.href)).searchParams.get(o)??""}const j=async o=>{var s,p;_.value=!0;try{if(await(async()=>{if(t.tenantEnable){const b=await Se(t.loginForm.tenantName);Te(b)}})(),!await Q())return;let i=y("redirect");const c=y("type"),g=(s=r==null?void 0:r.query)==null?void 0:s.code,f=(p=r==null?void 0:r.query)==null?void 0:p.state,x=await ke({username:t.loginForm.username,password:t.loginForm.password,captchaVerification:o.captchaVerification,socialCode:g,socialState:f,socialType:c});if(!x)return;T.value=Ne.service({lock:!0,text:"\u6B63\u5728\u52A0\u8F7D\u7CFB\u7EDF\u4E2D...",background:"rgba(0, 0, 0, 0.7)"}),t.loginForm.rememberMe?Le(t.loginForm):Pe(),q(x),i||(i="/"),i.indexOf("sso")!==-1?window.location.href=window.location.href.replace("/login?redirect=",""):$({path:i||A.addRouters[0].path})}finally{_.value=!1,T.value.close()}};return ne(()=>{(()=>{const o=ve();o&&(t.loginForm={...t.loginForm,username:o.username?o.username:t.loginForm.username,password:o.password?o.password:t.loginForm.password,rememberMe:!!o.rememberMe,tenantName:o.tenantName?o.tenantName:t.loginForm.tenantName})})(),(async()=>{var o,s;try{const p=y("type"),i=y("redirect"),c=(o=r==null?void 0:r.query)==null?void 0:o.code,g=(s=r==null?void 0:r.query)==null?void 0:s.state,f=await Fe(p,c,g);q(f),Ve.push({path:i||"/"})}catch{}})()}),(o,s)=>{const p=ue,i=ce,c=xe,g=we,f=ye,x=me,b=Ue,K=Me,Z=de;return C(),ie("div",{class:E([e(N),"relative h-[100%] lt-xl:bg-[var(--login-bg-color)] lt-md:px-10px lt-sm:px-10px lt-xl:px-10px"])},[n("div",Qe,[n("div",{class:E(`${e(N)}__left flex-1 bg-gray-500 bg-opacity-20 relative p-30px lt-xl:hidden`)},[n("div",Ye,[$e,n("span",Ae,u(e(M)(e(k).getTitle)),1)]),n("div",Be,[a(re,{appear:"","enter-active-class":"animate__animated animate__bounceInLeft",tag:"div"},{default:l(()=>[De,n("div",Je,u(e(m)("login.welcome")),1),n("div",Ke,u(e(m)("login.message")),1)]),_:1})])],2),n("div",Ze,[n("div",We,[n("div",Xe,[Ge,n("span",ea,u(e(M)(e(k).getTitle)),1)]),n("div",aa,[a(e(qe)),a(e(Ie),{class:"dark:text-white lt-xl:text-white"})])]),a(be,{appear:"","enter-active-class":"animate__animated animate__bounceInRight"},{default:l(()=>[n("div",ta,[pe(a(Z,{ref_key:"formLogin",ref:L,model:e(t).loginForm,rules:J,class:"login-form","label-position":"top","label-width":"120px",size:"large"},{default:l(()=>[a(x,{style:{"margin-right":"-10px","margin-left":"-10px"}},{default:l(()=>[a(i,{span:24,style:{"padding-right":"10px","padding-left":"10px"}},{default:l(()=>[a(p,null,{default:l(()=>[a(Oe,{style:{width:"100%"}})]),_:1})]),_:1}),a(i,{span:24,style:{"padding-right":"10px","padding-left":"10px"}},{default:l(()=>[e(t).tenantEnable?(C(),ge(p,{key:0,prop:"tenantName"},{default:l(()=>[a(c,{modelValue:e(t).loginForm.tenantName,"onUpdate:modelValue":s[0]||(s[0]=d=>e(t).loginForm.tenantName=d),placeholder:e(m)("login.tenantNamePlaceholder"),"prefix-icon":e(z),link:"",type:"primary"},null,8,["modelValue","placeholder","prefix-icon"])]),_:1})):fe("",!0)]),_:1}),a(i,{span:24,style:{"padding-right":"10px","padding-left":"10px"}},{default:l(()=>[a(p,{prop:"username"},{default:l(()=>[a(c,{modelValue:e(t).loginForm.username,"onUpdate:modelValue":s[1]||(s[1]=d=>e(t).loginForm.username=d),placeholder:e(m)("login.usernamePlaceholder"),"prefix-icon":e(O)},null,8,["modelValue","placeholder","prefix-icon"])]),_:1})]),_:1}),a(i,{span:24,style:{"padding-right":"10px","padding-left":"10px"}},{default:l(()=>[a(p,{prop:"password"},{default:l(()=>[a(c,{modelValue:e(t).loginForm.password,"onUpdate:modelValue":s[2]||(s[2]=d=>e(t).loginForm.password=d),placeholder:e(m)("login.passwordPlaceholder"),"prefix-icon":e(H),"show-password":"",type:"password",onKeyup:s[3]||(s[3]=he(d=>S(),["enter"]))},null,8,["modelValue","placeholder","prefix-icon"])]),_:1})]),_:1}),a(i,{span:24,style:{"padding-right":"10px","padding-left":"10px","margin-top":"-20px","margin-bottom":"-20px"}},{default:l(()=>[a(p,null,{default:l(()=>[a(x,{justify:"space-between",style:{width:"100%"}},{default:l(()=>[a(i,{span:6},{default:l(()=>[a(g,{modelValue:e(t).loginForm.rememberMe,"onUpdate:modelValue":s[4]||(s[4]=d=>e(t).loginForm.rememberMe=d)},{default:l(()=>[U(u(e(m)("login.remember")),1)]),_:1},8,["modelValue"])]),_:1}),a(i,{offset:6,span:12},{default:l(()=>[a(f,{style:{float:"right"},type:"primary"},{default:l(()=>[U(u(e(m)("login.forgetPassword")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(i,{span:24,style:{"padding-right":"10px","padding-left":"10px"}},{default:l(()=>[a(p,null,{default:l(()=>[a(b,{loading:e(_),title:e(m)("login.login"),class:"w-[100%]",type:"primary",onClick:s[5]||(s[5]=d=>S())},null,8,["loading","title"])]),_:1})]),_:1}),a(K,{ref_key:"verify",ref:P,captchaType:e(B),imgSize:{width:"400px",height:"200px"},mode:"pop",onSuccess:j},null,8,["captchaType"])]),_:1})]),_:1},8,["model"]),[[_e,e(D)]])])]),_:1})])])],2)}}}),[["__scopeId","data-v-2e63cb90"]]);export{la as default};
