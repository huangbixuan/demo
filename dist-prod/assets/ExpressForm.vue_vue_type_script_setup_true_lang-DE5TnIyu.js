import{d as z,e as A,z as B,r as i,A as E,J as b,o as g,w as u,O as j,B as D,a,h as r,C as J,S as M,P as O,M as P,l as y,x as R}from"./index-QQaZ7rbf.js";import{_ as G}from"./Dialog.vue_vue_type_style_index_0_lang-BZRnyNPI.js";import{a as H,c as I,u as K}from"./index-BbS56iOs.js";const L=z({__name:"ExpressForm",emits:["success"],setup(N,{expose:w,emit:x}){const{t:c}=A(),v=B(),d=i(!1),f=i(""),t=i(!1),V=i(""),l=i({id:void 0,code:void 0,name:void 0,sort:void 0}),h=E({code:[{required:!0,message:"\u5FEB\u9012\u516C\u53F8\u7B80\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],name:[{required:!0,message:"\u5FEB\u9012\u516C\u53F8\u5168\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],sort:[{required:!0,message:"\u6392\u5E8F\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),m=i();w({open:async(o,e)=>{if(d.value=!0,f.value=c("action."+o),V.value=o,q(),e){t.value=!0;try{l.value=await H(e)}finally{t.value=!1}}}});const U=x,k=async()=>{if(m&&await m.value.validate()){t.value=!0;try{const o=l.value;V.value==="create"?(await I(o),v.success(c("common.createSuccess"))):(await K(o),v.success(c("common.updateSuccess"))),d.value=!1,U("success")}finally{t.value=!1}}},q=()=>{var o;l.value={id:void 0,code:void 0,name:void 0,sort:void 0},(o=m.value)==null||o.resetFields()};return(o,e)=>{const n=M,p=J,C=D,_=P,S=G,F=O;return g(),b(S,{title:a(f),modelValue:a(d),"onUpdate:modelValue":e[4]||(e[4]=s=>R(d)?d.value=s:null)},{footer:u(()=>[r(_,{onClick:k,type:"primary",disabled:a(t)},{default:u(()=>[y("\u786E \u5B9A")]),_:1},8,["disabled"]),r(_,{onClick:e[3]||(e[3]=s=>d.value=!1)},{default:u(()=>[y("\u53D6 \u6D88")]),_:1})]),default:u(()=>[j((g(),b(C,{ref_key:"formRef",ref:m,model:a(l),rules:a(h),"label-width":"120px"},{default:u(()=>[r(p,{label:"\u5FEB\u9012\u516C\u53F8\u7F16\u53F7",prop:"code"},{default:u(()=>[r(n,{modelValue:a(l).code,"onUpdate:modelValue":e[0]||(e[0]=s=>a(l).code=s),placeholder:"\u8BF7\u8F93\u5165\u5FEB\u9012\u516C\u53F8\u7F16\u53F7"},null,8,["modelValue"])]),_:1}),r(p,{label:"\u5FEB\u9012\u516C\u53F8\u5168\u79F0",prop:"name"},{default:u(()=>[r(n,{modelValue:a(l).name,"onUpdate:modelValue":e[1]||(e[1]=s=>a(l).name=s),placeholder:"\u8BF7\u8F93\u5165\u5FEB\u9012\u516C\u53F8\u5168\u79F0"},null,8,["modelValue"])]),_:1}),r(p,{label:"\u6392\u5E8F",prop:"sort"},{default:u(()=>[r(n,{type:"number",modelValue:a(l).sort,"onUpdate:modelValue":e[2]||(e[2]=s=>a(l).sort=s),placeholder:"\u8BF7\u8F93\u5165\u6392\u5E8F"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[F,a(t)]])]),_:1},8,["title","modelValue"])}}});export{L as _};
