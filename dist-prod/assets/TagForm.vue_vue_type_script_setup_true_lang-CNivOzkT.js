import{d as T,e as U,z as q,r as o,J as y,o as w,w as r,O as z,B as j,a as s,h as d,C as B,S as J,P as O,M as P,l as V,x as R}from"./index-QQaZ7rbf.js";import{_ as A}from"./Dialog.vue_vue_type_style_index_0_lang-BZRnyNPI.js";import{g as D,c as E,u as G}from"./index-BMmUWe6o.js";const H=T({name:"MpTagForm",__name:"TagForm",emits:["success"],setup(K,{expose:g,emit:x}){const{t:i}=U(),f=q(),u=o(!1),v=o(""),t=o(!1),p=o(""),l=o({accountId:-1,name:""}),b={name:[{required:!0,message:"\u8BF7\u8F93\u5165\u6807\u7B7E\u540D\u79F0",trigger:"blur"}]},c=o(null),h=x;g({open:async(a,e,n)=>{if(u.value=!0,v.value=i("action."+a),p.value=a,C(),l.value.accountId=e,n){t.value=!0;try{l.value=await D(n)}finally{t.value=!1}}}});const k=async()=>{var a;if(c&&await((a=c.value)==null?void 0:a.validate())){t.value=!0;try{const e=l.value;p.value==="create"?(await E(e),f.success(i("common.createSuccess"))):(await G(e),f.success(i("common.updateSuccess"))),u.value=!1,h("success")}finally{t.value=!1}}},C=()=>{var a;l.value={accountId:-1,name:""},(a=c.value)==null||a.resetFields()};return(a,e)=>{const n=J,F=B,I=j,_=P,S=A,M=O;return w(),y(S,{modelValue:s(u),"onUpdate:modelValue":e[2]||(e[2]=m=>R(u)?u.value=m:null),title:s(v)},{footer:r(()=>[d(_,{disabled:s(t),type:"primary",onClick:k},{default:r(()=>[V("\u786E \u5B9A")]),_:1},8,["disabled"]),d(_,{onClick:e[1]||(e[1]=m=>u.value=!1)},{default:r(()=>[V("\u53D6 \u6D88")]),_:1})]),default:r(()=>[z((w(),y(I,{ref_key:"formRef",ref:c,model:s(l),rules:b,"label-width":"80px"},{default:r(()=>[d(F,{label:"\u6807\u7B7E\u540D\u79F0",prop:"name"},{default:r(()=>[d(n,{modelValue:s(l).name,"onUpdate:modelValue":e[0]||(e[0]=m=>s(l).name=m),placeholder:"\u8BF7\u8F93\u5165\u6807\u7B7E\u540D\u79F0"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])),[[M,s(t)]])]),_:1},8,["modelValue","title"])}}});export{H as _};
