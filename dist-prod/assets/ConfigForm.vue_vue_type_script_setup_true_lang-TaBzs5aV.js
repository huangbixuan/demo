import{d as N,e as O,z as R,r as i,A as B,J as f,o as p,w as s,O as G,B as z,a as e,h as r,C as E,S as H,aW as J,c as j,F as D,G as K,H as L,I as M,aX as P,l as g,t as T,P as W,M as X,x as Q}from"./index-QQaZ7rbf.js";import{_ as Y}from"./Dialog.vue_vue_type_style_index_0_lang-BZRnyNPI.js";import{g as Z,c as $,u as ee}from"./index-DqYs6BhQ.js";const le=N({name:"InfraConfigForm",__name:"ConfigForm",emits:["success"],setup(ae,{expose:k,emit:h}){const{t:v}=O(),b=R(),t=i(!1),y=i(""),d=i(!1),V=i(""),u=i({id:void 0,category:"",name:"",key:"",value:"",visible:!0,remark:""}),U=B({category:[{required:!0,message:"\u53C2\u6570\u5206\u7C7B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],name:[{required:!0,message:"\u53C2\u6570\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],key:[{required:!0,message:"\u53C2\u6570\u952E\u540D\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],value:[{required:!0,message:"\u53C2\u6570\u952E\u503C\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],visible:[{required:!0,message:"\u662F\u5426\u53EF\u89C1\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),c=i();k({open:async(o,l)=>{if(t.value=!0,y.value=v("action."+o),V.value=o,F(),l){d.value=!0;try{u.value=await Z(l)}finally{d.value=!1}}}});const w=h,C=async()=>{if(c&&await c.value.validate()){d.value=!0;try{const o=u.value;V.value==="create"?(await $(o),b.success(v("common.createSuccess"))):(await ee(o),b.success(v("common.updateSuccess"))),t.value=!1,w("success")}finally{d.value=!1}}},F=()=>{var o;u.value={id:void 0,category:"",name:"",key:"",value:"",visible:!0,remark:""},(o=c.value)==null||o.resetFields()};return(o,l)=>{const n=H,m=E,q=P,x=J,I=z,_=X,S=Y,A=W;return p(),f(S,{modelValue:e(t),"onUpdate:modelValue":l[7]||(l[7]=a=>Q(t)?t.value=a:null),title:e(y)},{footer:s(()=>[r(_,{disabled:e(d),type:"primary",onClick:C},{default:s(()=>[g("\u786E \u5B9A")]),_:1},8,["disabled"]),r(_,{onClick:l[6]||(l[6]=a=>t.value=!1)},{default:s(()=>[g("\u53D6 \u6D88")]),_:1})]),default:s(()=>[G((p(),f(I,{ref_key:"formRef",ref:c,model:e(u),rules:e(U),"label-width":"80px"},{default:s(()=>[r(m,{label:"\u53C2\u6570\u5206\u7C7B",prop:"category"},{default:s(()=>[r(n,{modelValue:e(u).category,"onUpdate:modelValue":l[0]||(l[0]=a=>e(u).category=a),placeholder:"\u8BF7\u8F93\u5165\u53C2\u6570\u5206\u7C7B"},null,8,["modelValue"])]),_:1}),r(m,{label:"\u53C2\u6570\u540D\u79F0",prop:"name"},{default:s(()=>[r(n,{modelValue:e(u).name,"onUpdate:modelValue":l[1]||(l[1]=a=>e(u).name=a),placeholder:"\u8BF7\u8F93\u5165\u53C2\u6570\u540D\u79F0"},null,8,["modelValue"])]),_:1}),r(m,{label:"\u53C2\u6570\u952E\u540D",prop:"key"},{default:s(()=>[r(n,{modelValue:e(u).key,"onUpdate:modelValue":l[2]||(l[2]=a=>e(u).key=a),placeholder:"\u8BF7\u8F93\u5165\u53C2\u6570\u952E\u540D"},null,8,["modelValue"])]),_:1}),r(m,{label:"\u53C2\u6570\u952E\u503C",prop:"value"},{default:s(()=>[r(n,{modelValue:e(u).value,"onUpdate:modelValue":l[3]||(l[3]=a=>e(u).value=a),placeholder:"\u8BF7\u8F93\u5165\u53C2\u6570\u952E\u503C"},null,8,["modelValue"])]),_:1}),r(m,{label:"\u662F\u5426\u53EF\u89C1",prop:"visible"},{default:s(()=>[r(x,{modelValue:e(u).visible,"onUpdate:modelValue":l[4]||(l[4]=a=>e(u).visible=a)},{default:s(()=>[(p(!0),j(D,null,K(e(L)(e(M).INFRA_BOOLEAN_STRING),a=>(p(),f(q,{key:a.value,label:a.value},{default:s(()=>[g(T(a.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),r(m,{label:"\u5907\u6CE8",prop:"remark"},{default:s(()=>[r(n,{modelValue:e(u).remark,"onUpdate:modelValue":l[5]||(l[5]=a=>e(u).remark=a),placeholder:"\u8BF7\u8F93\u5165\u5185\u5BB9",type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[A,e(d)]])]),_:1},8,["modelValue","title"])}}});export{le as _};
