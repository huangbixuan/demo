import{d as P,e as j,z,r as m,A as D,J as c,o as n,w as s,O as G,B as K,a as l,h as u,C as J,S as R,bY as H,D as Q,c as h,F as k,G as S,U as w,I as E,K as W,P as X,M as Z,l as I,x as $}from"./index-QQaZ7rbf.js";import{_ as ee}from"./Dialog.vue_vue_type_style_index_0_lang-BZRnyNPI.js";import{_ as le}from"./Materials-DPzAVFcF.js";import{C as N}from"./constants-D0aoFN3l.js";import{a as ae,c as te,u as ue}from"./index-Dk2O4wg-.js";const se=P({name:"SystemNoticeForm",__name:"NoticeForm",emits:["success"],setup(re,{expose:q,emit:x}){const{t:v}=j(),f=z(),o=m(!1),b=m(""),d=m(!1),V=m(""),t=m({id:void 0,title:"",picUrl:"",type:void 0,content:"",status:N.ENABLE,remark:""}),C=D({title:[{required:!0,message:"\u516C\u544A\u6807\u9898\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],picUrl:[{required:!0,message:"\u5C01\u9762\u56FE\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],type:[{required:!0,message:"\u516C\u544A\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"change"}],status:[{required:!0,message:"\u72B6\u6001\u4E0D\u80FD\u4E3A\u7A7A",trigger:"change"}],content:[{required:!0,message:"\u516C\u544A\u5185\u5BB9\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),p=m();q({open:async(r,a)=>{if(o.value=!0,b.value=v("action."+r),V.value=r,F(),a){d.value=!0;try{t.value=await ae(a)}finally{d.value=!1}}}});const T=x,A=async()=>{if(p&&await p.value.validate()){d.value=!0;try{const r=t.value;V.value==="create"?(await te(r),f.success(v("common.createSuccess"))):(await ue(r),f.success(v("common.updateSuccess"))),o.value=!1,T("success")}finally{d.value=!1}}},F=()=>{var r;t.value={id:void 0,title:"",type:void 0,content:"",status:N.ENABLE,remark:""},(r=p.value)==null||r.resetFields()};return(r,a)=>{const _=R,i=J,M=le,O=H,y=W,g=Q,B=K,U=Z,Y=ee,L=X;return n(),c(Y,{modelValue:l(o),"onUpdate:modelValue":a[7]||(a[7]=e=>$(o)?o.value=e:null),title:l(b),width:"800"},{footer:s(()=>[u(U,{disabled:l(d),type:"primary",onClick:A},{default:s(()=>[I("\u786E \u5B9A")]),_:1},8,["disabled"]),u(U,{onClick:a[6]||(a[6]=e=>o.value=!1)},{default:s(()=>[I("\u53D6 \u6D88")]),_:1})]),default:s(()=>[G((n(),c(B,{ref_key:"formRef",ref:p,model:l(t),rules:l(C),"label-width":"80px"},{default:s(()=>[u(i,{label:"\u516C\u544A\u6807\u9898",prop:"title"},{default:s(()=>[u(_,{modelValue:l(t).title,"onUpdate:modelValue":a[0]||(a[0]=e=>l(t).title=e),placeholder:"\u8BF7\u8F93\u5165\u516C\u544A\u6807\u9898"},null,8,["modelValue"])]),_:1}),u(i,{label:"\u5C01\u9762\u56FE",prop:"picUrl"},{default:s(()=>[u(M,{modelValue:l(t).picUrl,"onUpdate:modelValue":a[1]||(a[1]=e=>l(t).picUrl=e),num:"1",type:"image"},null,8,["modelValue"])]),_:1}),u(i,{label:"\u516C\u544A\u5185\u5BB9",prop:"content"},{default:s(()=>[u(O,{modelValue:l(t).content,"onUpdate:modelValue":a[2]||(a[2]=e=>l(t).content=e),height:"150px"},null,8,["modelValue"])]),_:1}),u(i,{label:"\u516C\u544A\u7C7B\u578B",prop:"type"},{default:s(()=>[u(g,{modelValue:l(t).type,"onUpdate:modelValue":a[3]||(a[3]=e=>l(t).type=e),clearable:"",placeholder:"\u8BF7\u9009\u62E9\u516C\u544A\u7C7B\u578B"},{default:s(()=>[(n(!0),h(k,null,S(l(w)(l(E).SYSTEM_NOTICE_TYPE),e=>(n(),c(y,{key:parseInt(e.value),label:e.label,value:parseInt(e.value)},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),u(i,{label:"\u72B6\u6001",prop:"status"},{default:s(()=>[u(g,{modelValue:l(t).status,"onUpdate:modelValue":a[4]||(a[4]=e=>l(t).status=e),clearable:"",placeholder:"\u8BF7\u9009\u62E9\u72B6\u6001"},{default:s(()=>[(n(!0),h(k,null,S(l(w)(l(E).COMMON_STATUS),e=>(n(),c(y,{key:parseInt(e.value),label:e.label,value:parseInt(e.value)},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),u(i,{label:"\u5907\u6CE8",prop:"remark"},{default:s(()=>[u(_,{modelValue:l(t).remark,"onUpdate:modelValue":a[5]||(a[5]=e=>l(t).remark=e),placeholder:"\u8BF7\u8F93\u5907\u6CE8",type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[L,l(d)]])]),_:1},8,["modelValue","title"])}}});export{se as _};
