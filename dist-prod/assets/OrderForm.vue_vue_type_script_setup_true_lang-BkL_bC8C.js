import{d as O,e as T,z as j,r as u,A as z,J as b,o as n,w as a,O as B,B as G,a as s,h as l,C as J,aW as K,aX as M,l as c,D as W,c as X,K as E,F as H,G as L,S as Q,P as Y,M as Z,x as $}from"./index-QQaZ7rbf.js";import{_ as ee}from"./Dialog.vue_vue_type_style_index_0_lang-BZRnyNPI.js";import{g as ae,u as le}from"./index-AllB_lxo.js";import{e as se}from"./index-BbS56iOs.js";const oe=O({__name:"OrderForm",emits:["success"],setup(de,{expose:V,emit:g}){const{t:x}=T(),C=j(),i=u(!1),_=u(""),t=u(!1),N=u(""),r=u({id:void 0,userId:void 0,productId:void 0,number:void 0,score:void 0,totalScore:void 0,ip:void 0,expressSn:void 0,expressNumber:void 0,expressCompany:void 0,customerName:void 0,customerPhone:void 0,customerAddress:void 0,status:void 0,havePaid:void 0,haveDelivered:void 0,haveReceived:void 0}),f=u([]),w=z({expressSn:[{required:!0,message:"\u8BF7\u9009\u62E9\u5FEB\u9012\u516C\u53F8",trigger:"blur"}],expressNumber:[{required:!0,message:"\u5FEB\u9012\u5355\u53F7\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),v=u();V({open:async(o,e)=>{if(i.value=!0,_.value=x("action."+o),N.value=o,A(),f.value=await se(),e){t.value=!0;try{r.value=await ae(e)}finally{t.value=!1}}}});const P=g,k=async()=>{if(v&&await v.value.validate()){t.value=!0;try{const o=r.value;await le(o),C.success(x("common.updateSuccess")),i.value=!1,P("success")}finally{t.value=!1}}},I=o=>{let e={};e=f.value.find(m=>m.code===o),r.value.expressCompany=e.name},A=()=>{var o;r.value={id:void 0,userId:void 0,productId:void 0,number:void 0,score:void 0,totalScore:void 0,ip:void 0,expressNumber:void 0,expressCompany:void 0,customerName:void 0,customerPhone:void 0,customerAddress:void 0,status:void 0,havePaid:void 0,haveDelivered:void 0,haveReceived:void 0},(o=v.value)==null||o.resetFields()};return(o,e)=>{const m=M,y=K,p=J,h=E,D=W,F=Q,R=G,S=Z,U=ee,q=Y;return n(),b(U,{title:s(_),modelValue:s(i),"onUpdate:modelValue":e[3]||(e[3]=d=>$(i)?i.value=d:null)},{footer:a(()=>[l(S,{onClick:k,type:"primary",disabled:s(t)},{default:a(()=>[c("\u786E \u5B9A")]),_:1},8,["disabled"]),l(S,{onClick:e[2]||(e[2]=d=>i.value=!1)},{default:a(()=>[c("\u53D6 \u6D88")]),_:1})]),default:a(()=>[B((n(),b(R,{ref_key:"formRef",ref:v,model:s(r),rules:s(w),"label-width":"100px"},{default:a(()=>[l(p,{label:"\u9009\u62E9\u7C7B\u578B",prop:"orderType"},{default:a(()=>[l(y,{"model-value":"send"},{default:a(()=>[l(m,{label:"send"},{default:a(()=>[c("\u53D1\u8D27")]),_:1})]),_:1})]),_:1}),l(p,{label:"\u53D1\u8D27\u7C7B\u578B",prop:"deliveryType"},{default:a(()=>[l(y,{"model-value":"normal"},{default:a(()=>[l(m,{label:"normal"},{default:a(()=>[c("\u624B\u52A8\u586B\u5199")]),_:1})]),_:1})]),_:1}),l(p,{label:"\u5FEB\u9012\u516C\u53F8",prop:"expressSn"},{default:a(()=>[l(D,{modelValue:s(r).expressSn,"onUpdate:modelValue":e[0]||(e[0]=d=>s(r).expressSn=d),placeholder:"\u9009\u62E9\u5FEB\u9012\u516C\u53F8",onChange:I},{default:a(()=>[l(h,{label:"\u9009\u62E9\u5FEB\u9012\u516C\u53F8",value:""}),(n(!0),X(H,null,L(s(f),d=>(n(),b(h,{key:d.code,label:d.name,value:d.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(p,{label:"\u5FEB\u9012\u5355\u53F7",prop:"expressNumber"},{default:a(()=>[l(F,{modelValue:s(r).expressNumber,"onUpdate:modelValue":e[1]||(e[1]=d=>s(r).expressNumber=d),placeholder:"\u8BF7\u8F93\u5165\u5FEB\u9012\u5355\u53F7",class:"input-width"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[q,s(t)]])]),_:1},8,["title","modelValue"])}}});export{oe as _};
