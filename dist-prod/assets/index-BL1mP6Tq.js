import{_ as L}from"./Dialog.vue_vue_type_style_index_0_lang-BZRnyNPI.js";import{d6 as b,r as h,f as M,aL as A,d as V,e as K,z as P,aG as H,R as Q,c as E,o as j,h as d,w as f,m as W,E as X,g as T,M as Y,l as C,i as Z,a as g,t as ee,cl as le,O as te,x as ie,F as ae,d7 as pe,d8 as oe,aT as ne}from"./index-QQaZ7rbf.js";import{_ as re}from"./ContentWrap.vue_vue_type_script_setup_true_lang-CerucUbi.js";import{g as ue}from"./dict.type-DkNzX14C.js";import{H as O,j as se}from"./java-DvOiaz3M.js";import"./index-D_95hI5s.js";const w=(e,o,n)=>n.map(a=>(a.field==="formCreate$required"?a.title=e("props.required")||a.title:a.field&&a.field!=="_optionType"&&(a.title=e("components."+o+"."+a.field)||a.title),a)),$=[{type:"select",field:"selectType",title:"\u9009\u62E9\u5668\u7C7B\u578B",value:"select",options:[{label:"\u4E0B\u62C9\u6846",value:"select"},{label:"\u5355\u9009\u6846",value:"radio"},{label:"\u591A\u9009\u6846",value:"checkbox"}],control:[{value:"select",condition:"=",method:"hidden",rule:["multiple"]}]},{type:"switch",field:"multiple",title:"\u662F\u5426\u591A\u9009"},{type:"switch",field:"disabled",title:"\u662F\u5426\u7981\u7528"},{type:"switch",field:"clearable",title:"\u662F\u5426\u53EF\u4EE5\u6E05\u7A7A\u9009\u9879"},{type:"switch",field:"collapseTags",title:"\u591A\u9009\u65F6\u662F\u5426\u5C06\u9009\u4E2D\u503C\u6309\u6587\u5B57\u7684\u5F62\u5F0F\u5C55\u793A"},{type:"inputNumber",field:"multipleLimit",title:"\u591A\u9009\u65F6\u7528\u6237\u6700\u591A\u53EF\u4EE5\u9009\u62E9\u7684\u9879\u76EE\u6570\uFF0C\u4E3A 0 \u5219\u4E0D\u9650\u5236",props:{min:0}},{type:"input",field:"autocomplete",title:"autocomplete \u5C5E\u6027"},{type:"input",field:"placeholder",title:"\u5360\u4F4D\u7B26"},{type:"switch",field:"filterable",title:"\u662F\u5426\u53EF\u641C\u7D22"},{type:"switch",field:"allowCreate",title:"\u662F\u5426\u5141\u8BB8\u7528\u6237\u521B\u5EFA\u65B0\u6761\u76EE"},{type:"input",field:"noMatchText",title:"\u641C\u7D22\u6761\u4EF6\u65E0\u5339\u914D\u65F6\u663E\u793A\u7684\u6587\u5B57"},{type:"switch",field:"remote",title:"\u5176\u4E2D\u7684\u9009\u9879\u662F\u5426\u4ECE\u670D\u52A1\u5668\u8FDC\u7A0B\u52A0\u8F7D"},{type:"Struct",field:"remoteMethod",title:"\u81EA\u5B9A\u4E49\u8FDC\u7A0B\u641C\u7D22\u65B9\u6CD5"},{type:"input",field:"noDataText",title:"\u9009\u9879\u4E3A\u7A7A\u65F6\u663E\u793A\u7684\u6587\u5B57"},{type:"switch",field:"reserveKeyword",title:"\u591A\u9009\u4E14\u53EF\u641C\u7D22\u65F6\uFF0C\u662F\u5426\u5728\u9009\u4E2D\u4E00\u4E2A\u9009\u9879\u540E\u4FDD\u7559\u5F53\u524D\u7684\u641C\u7D22\u5173\u952E\u8BCD"},{type:"switch",field:"defaultFirstOption",title:"\u5728\u8F93\u5165\u6846\u6309\u4E0B\u56DE\u8F66\uFF0C\u9009\u62E9\u7B2C\u4E00\u4E2A\u5339\u914D\u9879"},{type:"switch",field:"popperAppendToBody",title:"\u662F\u5426\u5C06\u5F39\u51FA\u6846\u63D2\u5165\u81F3 body \u5143\u7D20",value:!0},{type:"switch",field:"automaticDropdown",title:"\u5BF9\u4E8E\u4E0D\u53EF\u641C\u7D22\u7684 Select\uFF0C\u662F\u5426\u5728\u8F93\u5165\u6846\u83B7\u5F97\u7126\u70B9\u540E\u81EA\u52A8\u5F39\u51FA\u9009\u9879\u83DC\u5355"}],de=[{type:"input",field:"url",title:"url \u5730\u5740",props:{placeholder:"/system/user/simple-list"}},{type:"select",field:"method",title:"\u8BF7\u6C42\u7C7B\u578B",value:"GET",options:[{label:"GET",value:"GET"},{label:"POST",value:"POST"}],control:[{value:"GET",condition:"!=",method:"hidden",rule:[{type:"input",field:"data",title:"\u8BF7\u6C42\u53C2\u6570 JSON \u683C\u5F0F",props:{autosize:!0,type:"textarea",placeholder:'{"type": 1}'}}]}]},{type:"input",field:"labelField",title:"label \u5C5E\u6027",props:{placeholder:"nickname"}},{type:"input",field:"valueField",title:"value \u5C5E\u6027",props:{placeholder:"id"}}],q=e=>{const o=e.label,n=e.name;return{icon:e.icon,label:o,name:n,rule:()=>({type:n,field:b(),title:o,info:"",$required:!1}),props:(a,{t:m})=>(e.props||(e.props=[]),w(m,n+".props",[{type:"Required",field:"formCreate$required",title:"\u662F\u5426\u5FC5\u586B"},...e.props,...$]))}},me=async e=>{const o=(()=>{const t="Editor";return{icon:"icon-editor",label:"\u5BCC\u6587\u672C",name:t,rule:()=>({type:t,field:b(),title:"\u5BCC\u6587\u672C",info:"",$required:!1}),props:(l,{t:p})=>w(p,t+".props",[{type:"Required",field:"formCreate$required",title:"\u662F\u5426\u5FC5\u586B"},{type:"input",field:"height",title:"\u9AD8\u5EA6"},{type:"switch",field:"readonly",title:"\u662F\u5426\u53EA\u8BFB"}])}})(),n=(()=>{const t="\u6587\u4EF6\u4E0A\u4F20",l="UploadFile";return{icon:"icon-upload",label:t,name:l,rule:()=>({type:l,field:b(),title:t,info:"",$required:!1}),props:(p,{t:i})=>w(i,l+".props",[{type:"Required",field:"formCreate$required",title:"\u662F\u5426\u5FC5\u586B"},{type:"select",field:"fileType",title:"\u6587\u4EF6\u7C7B\u578B",value:["doc","xls","ppt","txt","pdf"],options:[{label:"doc",value:"doc"},{label:"xls",value:"xls"},{label:"ppt",value:"ppt"},{label:"txt",value:"txt"},{label:"pdf",value:"pdf"}],props:{multiple:!0}},{type:"switch",field:"autoUpload",title:"\u662F\u5426\u5728\u9009\u53D6\u6587\u4EF6\u540E\u7ACB\u5373\u8FDB\u884C\u4E0A\u4F20",value:!0},{type:"switch",field:"drag",title:"\u62D6\u62FD\u4E0A\u4F20",value:!1},{type:"switch",field:"isShowTip",title:"\u662F\u5426\u663E\u793A\u63D0\u793A",value:!0},{type:"inputNumber",field:"fileSize",title:"\u5927\u5C0F\u9650\u5236(MB)",value:5,props:{min:0}},{type:"inputNumber",field:"limit",title:"\u6570\u91CF\u9650\u5236",value:5,props:{min:0}},{type:"switch",field:"disabled",title:"\u662F\u5426\u7981\u7528",value:!1}])}})(),a=(()=>{const t="\u5355\u56FE\u4E0A\u4F20",l="UploadImg";return{icon:"icon-upload",label:t,name:l,rule:()=>({type:l,field:b(),title:t,info:"",$required:!1}),props:(p,{t:i})=>w(i,l+".props",[{type:"Required",field:"formCreate$required",title:"\u662F\u5426\u5FC5\u586B"},{type:"switch",field:"drag",title:"\u62D6\u62FD\u4E0A\u4F20",value:!1},{type:"select",field:"fileType",title:"\u56FE\u7247\u7C7B\u578B\u9650\u5236",value:["image/jpeg","image/png","image/gif"],options:[{label:"image/apng",value:"image/apng"},{label:"image/bmp",value:"image/bmp"},{label:"image/gif",value:"image/gif"},{label:"image/jpeg",value:"image/jpeg"},{label:"image/pjpeg",value:"image/pjpeg"},{label:"image/svg+xml",value:"image/svg+xml"},{label:"image/tiff",value:"image/tiff"},{label:"image/webp",value:"image/webp"},{label:"image/x-icon",value:"image/x-icon"}],props:{multiple:!0}},{type:"inputNumber",field:"fileSize",title:"\u5927\u5C0F\u9650\u5236(MB)",value:5,props:{min:0}},{type:"input",field:"height",title:"\u7EC4\u4EF6\u9AD8\u5EA6",value:"150px"},{type:"input",field:"width",title:"\u7EC4\u4EF6\u5BBD\u5EA6",value:"150px"},{type:"input",field:"borderradius",title:"\u7EC4\u4EF6\u8FB9\u6846\u5706\u89D2",value:"8px"},{type:"switch",field:"disabled",title:"\u662F\u5426\u663E\u793A\u5220\u9664\u6309\u94AE",value:!0},{type:"switch",field:"showBtnText",title:"\u662F\u5426\u663E\u793A\u6309\u94AE\u6587\u5B57",value:!0}])}})(),m=(()=>{const t="\u591A\u56FE\u4E0A\u4F20",l="UploadImgs";return{icon:"icon-upload",label:t,name:l,rule:()=>({type:l,field:b(),title:t,info:"",$required:!1}),props:(p,{t:i})=>w(i,l+".props",[{type:"Required",field:"formCreate$required",title:"\u662F\u5426\u5FC5\u586B"},{type:"switch",field:"drag",title:"\u62D6\u62FD\u4E0A\u4F20",value:!1},{type:"select",field:"fileType",title:"\u56FE\u7247\u7C7B\u578B\u9650\u5236",value:["image/jpeg","image/png","image/gif"],options:[{label:"image/apng",value:"image/apng"},{label:"image/bmp",value:"image/bmp"},{label:"image/gif",value:"image/gif"},{label:"image/jpeg",value:"image/jpeg"},{label:"image/pjpeg",value:"image/pjpeg"},{label:"image/svg+xml",value:"image/svg+xml"},{label:"image/tiff",value:"image/tiff"},{label:"image/webp",value:"image/webp"},{label:"image/x-icon",value:"image/x-icon"}],props:{multiple:!0}},{type:"inputNumber",field:"fileSize",title:"\u5927\u5C0F\u9650\u5236(MB)",value:5,props:{min:0}},{type:"inputNumber",field:"limit",title:"\u6570\u91CF\u9650\u5236",value:5,props:{min:0}},{type:"input",field:"height",title:"\u7EC4\u4EF6\u9AD8\u5EA6",value:"150px"},{type:"input",field:"width",title:"\u7EC4\u4EF6\u5BBD\u5EA6",value:"150px"},{type:"input",field:"borderradius",title:"\u7EC4\u4EF6\u8FB9\u6846\u5706\u89D2",value:"8px"}])}})(),_=q({name:"UserSelect",label:"\u7528\u6237\u9009\u62E9\u5668",icon:"icon-user-o"}),y=q({name:"DeptSelect",label:"\u90E8\u95E8\u9009\u62E9\u5668",icon:"icon-address-card-o"}),v=(()=>{const t="\u5B57\u5178\u9009\u62E9\u5668",l="DictSelect",p=h([]);return M(async()=>{const i=await ue();i&&i.length!==0&&(p.value=(i==null?void 0:i.map(r=>({label:r.name,value:r.type})))??[])}),{icon:"icon-doc-text",label:t,name:l,rule:()=>({type:l,field:b(),title:t,info:"",$required:!1}),props:(i,{t:r})=>w(r,l+".props",[{type:"Required",field:"formCreate$required",title:"\u662F\u5426\u5FC5\u586B"},{type:"select",field:"dictType",title:"\u5B57\u5178\u7C7B\u578B",value:"",options:p.value},{type:"select",field:"dictValueType",title:"\u5B57\u5178\u503C\u7C7B\u578B",value:"str",options:[{label:"\u6570\u5B57",value:"int"},{label:"\u5B57\u7B26\u4E32",value:"str"},{label:"\u5E03\u5C14\u503C",value:"bool"}]},...$])}})(),x=q({name:"ApiSelect",label:"\u63A5\u53E3\u9009\u62E9\u5668",icon:"icon-server",props:[...de]});M(async()=>{var t,l;await A(),(t=e.value)==null||t.removeMenuItem("upload"),(l=e.value)==null||l.removeMenuItem("fc-editor"),[o,n,a,m].forEach(p=>{var i,r;(i=e.value)==null||i.addComponent(p),(r=e.value)==null||r.appendMenuItem("main",{icon:p.icon,name:p.name,label:p.label})}),(()=>{var i,r,u,s;(i=e.value)==null||i.removeMenuItem("select"),(r=e.value)==null||r.removeMenuItem("radio"),(u=e.value)==null||u.removeMenuItem("checkbox");const p={name:"system",title:"\u7CFB\u7EDF\u5B57\u6BB5",list:[_,y,v,x].map(c=>{var S;return(S=e.value)==null||S.addComponent(c),{icon:c.icon,name:c.name,label:c.label}})};(s=e.value)==null||s.addMenu(p)})()})};function ce(e){const o=["true","false","null"],n={scope:"literal",beginKeywords:o.join(" ")};return{name:"JSON",aliases:["jsonc"],keywords:{literal:o},contains:[{className:"attr",begin:/"(\\.|[^\\"\r\n])*"(?=\s*:)/,relevance:1.01},{match:/[{}[\],:]/,className:"punctuation",relevance:0},e.QUOTE_STRING_MODE,n,e.C_NUMBER_MODE,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE],illegal:"\\S"}}const fe={class:"float-right mb-2"},ve={key:0,ref:"editor"},ge={class:"hljs"},ye=V({name:"InfraBuild",__name:"index",setup(e){const{t:o}=K(),n=P(),a=h(),m=h(!1),_=h(""),y=h(-1),v=h("");me(a);const x=u=>{m.value=!0,_.value=u},t=()=>{x("\u751F\u6210 JSON"),y.value=0,v.value=a.value.getRule()},l=()=>{x("\u751F\u6210 Options"),y.value=1,v.value=a.value.getOption()},p=()=>{x("\u751F\u6210\u7EC4\u4EF6"),y.value=2,v.value=i()},i=()=>{const u=a.value.getRule(),s=a.value.getOption();return`<template>
    <form-create
      v-model:api="fApi"
      :rule="rule"
      :option="option"
      @submit="onSubmit"
    ></form-create>
  </template>
  <script setup lang=ts>
    const faps = ref(null)
    const rule = ref('')
    const option = ref('')
    const init = () => {
      rule.value = formCreate.parseJson('${pe.toJson(u).replaceAll("\\","\\\\")}')
      option.value = formCreate.parseJson('${JSON.stringify(s)}')
    }
    const onSubmit = (formData) => {
      //todo \u63D0\u4EA4\u8868\u5355
    }
    init()
  <\/script>`},r=u=>{let s="json";return y.value===2&&(s="xml"),ne(u)||(u=JSON.stringify(u)),O.highlight(s,u,!0).value||"&nbsp;"};return M(async()=>{O.registerLanguage("xml",se),O.registerLanguage("json",ce)}),(u,s)=>{const c=Y,S=X,R=W,I=H("FcDesigner"),k=re,D=le,J=L,z=Q("dompurify-html");return j(),E(ae,null,[d(k,null,{default:f(()=>[d(R,null,{default:f(()=>[d(S,null,{default:f(()=>[T("div",fe,[d(c,{size:"small",type:"primary",onClick:t},{default:f(()=>[C("\u751F\u6210 JSON")]),_:1}),d(c,{size:"small",type:"success",onClick:l},{default:f(()=>[C("\u751F\u6210 Options")]),_:1}),d(c,{size:"small",type:"danger",onClick:p},{default:f(()=>[C("\u751F\u6210\u7EC4\u4EF6")]),_:1})])]),_:1})]),_:1}),d(I,{ref_key:"designer",ref:a,height:"780px"},null,512)]),_:1}),d(J,{modelValue:g(m),"onUpdate:modelValue":s[1]||(s[1]=N=>ie(m)?m.value=N:null),title:g(_),"max-height":"600"},{default:f(()=>[g(m)?(j(),E("div",ve,[d(c,{style:{float:"right"},onClick:s[0]||(s[0]=N=>(async B=>{const{copy:U,copied:G,isSupported:F}=oe({source:B});F?(await U(),g(G)&&n.success(o("common.copySuccess"))):n.error(o("common.copyError"))})(g(v)))},{default:f(()=>[C(ee(g(o)("common.copy")),1)]),_:1}),d(D,{height:"580"},{default:f(()=>[T("div",null,[T("pre",null,[te(T("code",ge,null,512),[[z,r(g(v))]])])])]),_:1})],512)):Z("",!0)]),_:1},8,["modelValue","title"])],64)}}});export{ye as default};
