import{d as z,e as A,z as B,r as u,A as G,J as n,o as m,w as t,O as J,B as K,a as l,h as r,C as M,D as O,c as P,F as R,G as E,K as H,S as Q,P as T,M as W,l as V,x as X}from"./index-QQaZ7rbf.js";import{_ as Y}from"./Dialog.vue_vue_type_style_index_0_lang-BZRnyNPI.js";import{S as v}from"./index-DkuRYFz4.js";import{g as Z}from"./index-D-uYqOkD.js";const $=z({name:"ShopDueLabelForm",__name:"ShopDueLabelForm",emits:["success"],setup(ee,{expose:g,emit:w}){const{t:p}=A(),f=B(),d=u(!1),h=u(""),i=u(!1),b=u(""),o=u({id:void 0,title:void 0,shopId:void 0,shopName:void 0}),D=G({shopId:[{required:!0,message:"\u8BF7\u9009\u62E9\u5E97\u94FA",trigger:"blur"}],title:[{required:!0,message:"\u6807\u7B7E\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),c=u(),y=u([]);g({open:async(e,a)=>{if(d.value=!0,h.value=p("action."+e),b.value=e,x(),k(),a){i.value=!0;try{o.value=await v.getShopDueLabel(a)}finally{i.value=!1}}}});const I=w,L=async()=>{await c.value.validate(),i.value=!0;try{const e=o.value;b.value==="create"?(await v.createShopDueLabel(e),f.success(p("common.createSuccess"))):(await v.updateShopDueLabel(e),f.success(p("common.updateSuccess"))),d.value=!1,I("success")}finally{i.value=!1}},k=async()=>{try{const e=await Z();y.value=e}finally{}},x=()=>{var e;o.value={id:void 0,title:void 0,shopId:void 0,shopName:void 0},(e=c.value)==null||e.resetFields()};return(e,a)=>{const F=H,C=O,_=M,U=Q,q=K,S=W,N=Y,j=T;return m(),n(N,{title:l(h),modelValue:l(d),"onUpdate:modelValue":a[3]||(a[3]=s=>X(d)?d.value=s:null)},{footer:t(()=>[r(S,{onClick:L,type:"primary",disabled:l(i)},{default:t(()=>[V("\u786E \u5B9A")]),_:1},8,["disabled"]),r(S,{onClick:a[2]||(a[2]=s=>d.value=!1)},{default:t(()=>[V("\u53D6 \u6D88")]),_:1})]),default:t(()=>[J((m(),n(q,{ref_key:"formRef",ref:c,model:l(o),rules:l(D),"label-width":"100px"},{default:t(()=>[r(_,{label:"\u9009\u62E9\u5E97\u94FA",prop:"shopId"},{default:t(()=>[r(C,{modelValue:l(o).shopId,"onUpdate:modelValue":a[0]||(a[0]=s=>l(o).shopId=s),placeholder:"\u9009\u62E9\u5E97\u94FA"},{default:t(()=>[(m(!0),P(R,null,E(l(y),s=>(m(),n(F,{key:s.id,label:s.name,value:s.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),r(_,{label:"\u6807\u7B7E\u540D\u79F0",prop:"title"},{default:t(()=>[r(U,{modelValue:l(o).title,"onUpdate:modelValue":a[1]||(a[1]=s=>l(o).title=s),placeholder:"\u8BF7\u8F93\u5165\u6807\u7B7E\u540D\u79F0"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[j,l(i)]])]),_:1},8,["title","modelValue"])}}});export{$ as _};
