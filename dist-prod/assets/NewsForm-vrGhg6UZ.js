import{dq as G,z as x,aj as J,d as Q,bb as R,a4 as N,r as W,J as y,o as u,w as n,h as e,ak as X,g as m,c as w,F as Y,G as $,i as g,$ as S,a,t as I,M as D,N as H,m as K,al as L,S as Z,E as ee,x as ae,bY as le,ap as te,q as ne,s as oe,_ as se}from"./index-QQaZ7rbf.js";import ie from"./CoverSelect-DXXLSxa1.js";const O=x(),de=(v,V)=>({MENU_CONF:{uploadImage:{server:v,maxFileSize:5242880,maxNumberOfFiles:10,allowedFileTypes:["image/*"],meta:{accountId:V,type:"image"},metaWithUrl:!0,headers:{Accept:"*",Authorization:"Bearer "+J(),"tenant-id":G()},withCredentials:!0,timeout:5e3,fieldName:"file",onBeforeUpload:r=>r,onProgress(r){},onSuccess(r,p){},onFailed(r,p){O.alertError(p.message)},onError(r,p,U){O.alertError(p.message)},customInsert(r,p){p(r.data.url,"image",r.data.url)}}}}),ue=()=>({title:"",thumbMediaId:"",author:"",digest:"",showCoverPic:"",content:"",contentSourceUrl:"",needOpenComment:"",onlyFansCanComment:"",thumbUrl:""}),ce={class:"select-item"},re=["onClick"],me={class:"news-content"},pe=["src"],ge={class:"news-content-title"},ve={key:0,class:"child"},he=["onClick"],fe={class:"news-content-item"},Ce={class:"news-content-item-title"},ye={class:"news-content-item-img"},we=["src"],ke={class:"child"},_e={key:0},Ve=(v=>(ne("data-v-c4606cac"),v=v(),oe(),v))(()=>m("p",null,"\u6458\u8981:",-1)),Ue=Q({name:"NewsForm",__name:"NewsForm",props:{isCreating:{type:Boolean},modelValue:{}},emits:["update:modelValue"],setup(v,{emit:V}){const r=x(),p=v,U=R("accountId"),E=de("https://meeting.ai-centre.org/admin-api/mp/material/upload-permanent",U),M=V,l=N({get:()=>p.modelValue===null?[{title:"",thumbMediaId:"",author:"",digest:"",showCoverPic:"",content:"",contentSourceUrl:"",needOpenComment:"",onlyFansCanComment:"",thumbUrl:""}]:p.modelValue,set(o){M("update:modelValue",o)}}),c=W(0),d=N(()=>l.value[c.value]),b=o=>{const s=l.value[o];l.value[o]=l.value[o+1],l.value[o+1]=s,c.value=o+1},z=async o=>{try{await r.confirm("\u786E\u5B9A\u5220\u9664\u8BE5\u56FE\u6587\u5417?"),l.value.splice(o,1),c.value===o&&(c.value=0)}catch{}},P=()=>{l.value.push({title:"",thumbMediaId:"",author:"",digest:"",showCoverPic:"",content:"",contentSourceUrl:"",needOpenComment:"",onlyFansCanComment:"",thumbUrl:""}),c.value=l.value.length-1};return(o,s)=>{const f=H,C=D,k=K,A=X,_=Z,F=ee,B=L,q=te;return u(),y(q,null,{default:n(()=>[e(A,{width:"40%"},{default:n(()=>[m("div",ce,[(u(!0),w(Y,null,$(a(l),(t,i)=>(u(),w("div",{key:i},[i===0?(u(),w("div",{key:0,class:S(["news-main father",{activeAddNews:a(c)===i}]),onClick:h=>c.value=i},[m("div",me,[m("img",{class:"material-img",src:t.thumbUrl},null,8,pe),m("div",ge,I(t.title),1)]),a(l).length>1?(u(),w("div",ve,[e(C,{type:"info",circle:"",size:"small",onClick:()=>b(i)},{default:n(()=>[e(f,{icon:"ep:arrow-down-bold"})]),_:2},1032,["onClick"]),o.isCreating?(u(),y(C,{key:0,type:"danger",circle:"",size:"small",onClick:()=>z(i)},{default:n(()=>[e(f,{icon:"ep:delete"})]),_:2},1032,["onClick"])):g("",!0)])):g("",!0)],10,re)):g("",!0),i>0?(u(),w("div",{key:1,class:S(["news-main-item father",{activeAddNews:a(c)===i}]),onClick:h=>c.value=i},[m("div",fe,[m("div",Ce,I(t.title),1),m("div",ye,[m("img",{class:"material-img",src:t.thumbUrl,width:"100%"},null,8,we)])]),m("div",ke,[a(l).length>i+1?(u(),y(C,{key:0,circle:"",type:"info",size:"small",onClick:()=>b(i)},{default:n(()=>[e(f,{icon:"ep:arrow-down-bold"})]),_:2},1032,["onClick"])):g("",!0),i>0?(u(),y(C,{key:1,type:"info",circle:"",size:"small",onClick:()=>(h=>{const T=l.value[h];l.value[h]=l.value[h-1],l.value[h-1]=T,c.value=h-1})(i)},{default:n(()=>[e(f,{icon:"ep:arrow-up-bold"})]),_:2},1032,["onClick"])):g("",!0),o.isCreating?(u(),y(C,{key:2,type:"danger",size:"small",circle:"",onClick:()=>z(i)},{default:n(()=>[e(f,{icon:"ep:delete"})]),_:2},1032,["onClick"])):g("",!0)])],10,he)):g("",!0)]))),128)),e(k,{justify:"center",class:"ope-row"},{default:n(()=>[a(l).length<8&&o.isCreating?(u(),y(C,{key:0,type:"primary",circle:"",onClick:P},{default:n(()=>[e(f,{icon:"ep:plus"})]),_:1})):g("",!0)]),_:1})])]),_:1}),e(B,null,{default:n(()=>[a(l).length>0?(u(),w("div",_e,[e(k,{gutter:20},{default:n(()=>[e(_,{modelValue:a(d).title,"onUpdate:modelValue":s[0]||(s[0]=t=>a(d).title=t),placeholder:"\u8BF7\u8F93\u5165\u6807\u9898\uFF08\u5FC5\u586B\uFF09"},null,8,["modelValue"]),e(_,{modelValue:a(d).author,"onUpdate:modelValue":s[1]||(s[1]=t=>a(d).author=t),placeholder:"\u8BF7\u8F93\u5165\u4F5C\u8005",style:{"margin-top":"5px"}},null,8,["modelValue"]),e(_,{modelValue:a(d).contentSourceUrl,"onUpdate:modelValue":s[2]||(s[2]=t=>a(d).contentSourceUrl=t),placeholder:"\u8BF7\u8F93\u5165\u539F\u6587\u5730\u5740",style:{"margin-top":"5px"}},null,8,["modelValue"])]),_:1}),e(k,{gutter:20},{default:n(()=>[e(F,{span:12},{default:n(()=>[e(ie,{modelValue:a(d),"onUpdate:modelValue":s[3]||(s[3]=t=>ae(d)?d.value=t:null),"is-first":a(c)===0},null,8,["modelValue","is-first"])]),_:1}),e(F,{span:12},{default:n(()=>[Ve,e(_,{rows:8,type:"textarea",modelValue:a(d).digest,"onUpdate:modelValue":s[4]||(s[4]=t=>a(d).digest=t),placeholder:"\u8BF7\u8F93\u5165\u6458\u8981",class:"digest",maxlength:"120"},null,8,["modelValue"])]),_:1})]),_:1}),e(k,null,{default:n(()=>[e(a(le),{modelValue:a(d).content,"onUpdate:modelValue":s[5]||(s[5]=t=>a(d).content=t),"editor-config":a(E)},null,8,["modelValue","editor-config"])]),_:1})])):g("",!0)]),_:1})]),_:1})}}}),j=se(Ue,[["__scopeId","data-v-c4606cac"]]),be=Object.freeze(Object.defineProperty({__proto__:null,default:j},Symbol.toStringTag,{value:"Module"}));export{j as N,be as a,ue as c};
