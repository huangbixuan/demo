import{d as L,z as X,e as Y,r as c,A as Z,f as $,R as ee,c as g,o as s,h as e,w as a,B as ae,a as o,C as le,S as oe,T as Q,O as u,M as re,l as i,N as te,J as m,n as se,p as ne,t as pe,P as ie,F as de}from"./index-QQaZ7rbf.js";import{_ as ce}from"./index.vue_vue_type_script_setup_true_lang-CtP16Cnh.js";import{_ as ue}from"./ContentWrap.vue_vue_type_script_setup_true_lang-CerucUbi.js";import{f as me,d as fe}from"./formatTime-esrXlwGe.js";import{d as N}from"./download--D_IyRio.js";import{f as ke,h as ye,i as _e,e as he,d as ge}from"./index-BiAqHivH.js";import{_ as we}from"./ShopDeskForm.vue_vue_type_script_setup_true_lang-BAu8gzKL.js";import{_ as be}from"./ShopDeskForm2.vue_vue_type_script_setup_true_lang-DzE3FSBC.js";import{_ as xe}from"./ShopDeskForm3.vue_vue_type_script_setup_true_lang-BdxPPv8D.js";import{_ as Ce}from"./UserImportForm.vue_vue_type_script_name_SystemUserImportForm_setup_true_lang-t2lzNV7g.js";import ve from"./Order-8j7yK7oB.js";import"./index-BctfKmg_.js";import"./index-D_95hI5s.js";import"./Dialog.vue_vue_type_style_index_0_lang-BZRnyNPI.js";import"./Materials-DPzAVFcF.js";import"./el-image-DHi7RmhO.js";import"./material-mdbw-jQF.js";import"./index-D-uYqOkD.js";import"./index-RcpyhGJW.js";import"./el-text-CnZwsJZ9.js";import"./el-drawer-PTxXA9Gz.js";import"./el-dropdown-item-D1XCTc1V.js";import"./index-AwhozRCE.js";import"./StoreOrderForm.vue_vue_type_script_setup_true_lang-CpsUpqAP.js";import"./OrderSend-DBRvLAbS.js";import"./OrderSendInfo-qp9YJrZl.js";import"./OrderDetail-yVQkAKN5.js";import"./el-timeline-item-CFJSbWRQ.js";import"./el-avatar-Bk2V5BPv.js";import"./el-descriptions-item-BBtnvGnE.js";const Ne={key:0},Se={key:1},Te={key:0},ze={key:1},Oe=L({__name:"index",setup(Re){const w=X(),{t:K}=Y(),x=c(!0),S=c(0),T=c([]),n=Z({pageNo:1,pageSize:10,shopId:null,shopName:null,number:null,miniQrcode:null,h5Qrcode:null,aliQrcode:null,note:null,orderCount:null,costAmount:null,lastOrderNo:null,lastOrderTime:[],lastOrderStatus:null,status:null,createTime:[]}),z=c(),k=c(!1),O=c(!1),_=async()=>{x.value=!0;try{const r=await ke(n);T.value=r.list,S.value=r.total}finally{x.value=!1}},b=()=>{n.pageNo=1,_()},B=()=>{z.value.resetFields(),b()},R=c(),V=c(),q=c(),F=c(),h=(r,t)=>{r=="batchCreate"?V.value.open(r,t):r=="qrcode"?q.value.open(r,t):r=="order"?F.value.open(r,t):R.value.open(r,t)},D=async()=>{try{await w.exportConfirm(),k.value=!0;const r=await _e(n);N.excel(r,"\u95E8\u5E97 - \u684C\u53F7.xls")}catch{}finally{k.value=!1}},I=async()=>{try{k.value=!0;const r=await he();N.excel(r,"\u6279\u91CF\u5BFC\u5165\u684C\u53F7\u6A21\u677F.xls")}catch{}finally{k.value=!1}},J=async()=>{try{await w.confirm("\u5C0F\u7A0B\u5E8F\u4E8C\u7EF4\u7801\u53EA\u80FD\u4E0B\u8F7D\u6B63\u5F0F\u7684\u54E6"),O.value=!0;const r=await ge(0);N.zip(r,"qrcode.zip")}catch{}finally{k.value=!1}},U=c(),M=()=>{U.value.open()};return $(()=>{_()}),(r,t)=>{const A=oe,C=le,y=te,p=re,W=ae,P=ue,d=ne,j=se,E=ce,f=ee("hasPermi"),G=ie;return s(),g(de,null,[e(P,null,{default:a(()=>[e(W,{class:"-mb-15px",model:o(n),ref_key:"queryFormRef",ref:z,inline:!0,"label-width":"68px"},{default:a(()=>[e(C,{label:"\u5E97\u94FA\u540D\u79F0",prop:"shopName"},{default:a(()=>[e(A,{modelValue:o(n).shopName,"onUpdate:modelValue":t[0]||(t[0]=l=>o(n).shopName=l),placeholder:"\u8BF7\u8F93\u5165\u5E97\u94FA\u540D\u79F0",clearable:"",onKeyup:Q(b,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),e(C,{label:"\u684C\u53F7",prop:"number"},{default:a(()=>[e(A,{modelValue:o(n).number,"onUpdate:modelValue":t[1]||(t[1]=l=>o(n).number=l),placeholder:"\u8BF7\u8F93\u5165\u7F16\u53F7",clearable:"",onKeyup:Q(b,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),e(C,null,{default:a(()=>[e(p,{onClick:b},{default:a(()=>[e(y,{icon:"ep:search",class:"mr-5px"}),i(" \u641C\u7D22")]),_:1}),e(p,{onClick:B},{default:a(()=>[e(y,{icon:"ep:refresh",class:"mr-5px"}),i(" \u91CD\u7F6E")]),_:1}),u((s(),m(p,{type:"primary",plain:"",onClick:t[2]||(t[2]=l=>h("create"))},{default:a(()=>[e(y,{icon:"ep:plus",class:"mr-5px"}),i(" \u65B0\u589E ")]),_:1})),[[f,["desk:shop-desk:create"]]]),u((s(),m(p,{type:"primary",plain:"",onClick:t[3]||(t[3]=l=>h("batchCreate"))},{default:a(()=>[e(y,{icon:"ep:plus",class:"mr-5px"}),i(" \u6279\u91CF\u65B0\u589E ")]),_:1})),[[f,["desk:shop-desk:create"]]]),u((s(),m(p,{type:"success",plain:"",onClick:D,loading:o(k)},{default:a(()=>[e(y,{icon:"ep:download",class:"mr-5px"}),i(" \u5BFC\u51FA ")]),_:1},8,["loading"])),[[f,["desk:shop-desk:export"]]]),u((s(),m(p,{type:"warning",plain:"",onClick:J,loading:o(O)},{default:a(()=>[e(y,{icon:"ep:download",class:"mr-5px"}),i(" \u6279\u91CF\u4E0B\u8F7D\u70B9\u9910\u7801 ")]),_:1},8,["loading"])),[[f,["desk:shop-desk:export"]]]),u((s(),m(p,{type:"danger",plain:"",onClick:M,loading:o(k)},{default:a(()=>[e(y,{icon:"ep:upload",class:"mr-5px"}),i(" \u5BFC\u5165 ")]),_:1},8,["loading"])),[[f,["desk:shop-desk:export"]]]),u((s(),m(p,{type:"success",plain:"",onClick:I,loading:o(k)},{default:a(()=>[e(y,{icon:"ep:download",class:"mr-5px"}),i(" \u4E0B\u8F7D\u5BFC\u5165\u6A21\u677F ")]),_:1},8,["loading"])),[[f,["desk:shop-desk:export"]]])]),_:1})]),_:1},8,["model"])]),_:1}),e(P,null,{default:a(()=>[u((s(),m(j,{data:o(T)},{default:a(()=>[e(d,{label:"id",align:"center",prop:"id"}),e(d,{label:"\u5E97\u94FA\u540D\u79F0",align:"center",prop:"shopName"}),e(d,{label:"\u684C\u53F7\u5206\u7C7B",align:"center",prop:"cateName"}),e(d,{label:"\u684C\u53F7",align:"center",prop:"number"}),e(d,{label:"\u684C\u53F7\u540D\u79F0",align:"center",prop:"title"}),e(d,{label:"\u4E0B\u5355\u6570",align:"center",prop:"orderCount"}),e(d,{label:"\u6D88\u8D39\u91D1\u989D",align:"center",prop:"costAmount"}),e(d,{label:"\u4E0A\u6B21\u4E0B\u5355\u65F6\u95F4",align:"center",prop:"lastOrderTime",width:"170"},{default:a(l=>[l.row.lastOrderTime?(s(),g("span",Ne,pe(o(me)(l.row.lastOrderTime)),1)):(s(),g("span",Se,"\u65E0"))]),_:1}),e(d,{label:"\u72B6\u6001",align:"center",prop:"status"},{default:a(l=>[l.row.status==1?(s(),g("span",Te,"\u542F\u7528")):(s(),g("span",ze,"\u7981\u7528"))]),_:1}),e(d,{label:"\u6DFB\u52A0\u65F6\u95F4",align:"center",prop:"createTime",formatter:o(fe),width:"170"},null,8,["formatter"]),e(d,{label:"\u64CD\u4F5C",align:"center",width:"250",fixed:"right"},{default:a(l=>[u((s(),m(p,{link:"",type:"success",onClick:v=>h("qrcode",l.row.id)},{default:a(()=>[i(" \u4E8C\u7EF4\u7801 ")]),_:2},1032,["onClick"])),[[f,["desk:shop-desk:update"]]]),u((s(),m(p,{link:"",type:"primary",onClick:v=>h("order",l.row.id)},{default:a(()=>[i(" \u76F8\u5173\u8BA2\u5355 ")]),_:2},1032,["onClick"])),[[f,["desk:shop-desk:update"]]]),u((s(),m(p,{link:"",type:"primary",onClick:v=>h("update",l.row.id)},{default:a(()=>[i(" \u7F16\u8F91 ")]),_:2},1032,["onClick"])),[[f,["desk:shop-desk:update"]]]),u((s(),m(p,{link:"",type:"danger",onClick:v=>(async H=>{try{await w.delConfirm(),await ye(H),w.success(K("common.delSuccess")),await _()}catch{}})(l.row.id)},{default:a(()=>[i(" \u5220\u9664 ")]),_:2},1032,["onClick"])),[[f,["desk:shop-desk:delete"]]])]),_:1})]),_:1},8,["data"])),[[G,o(x)]]),e(E,{total:o(S),page:o(n).pageNo,"onUpdate:page":t[4]||(t[4]=l=>o(n).pageNo=l),limit:o(n).pageSize,"onUpdate:limit":t[5]||(t[5]=l=>o(n).pageSize=l),onPagination:_},null,8,["total","page","limit"])]),_:1}),e(we,{ref_key:"formRef",ref:R,onSuccess:_},null,512),e(be,{ref_key:"formRef2",ref:V,onSuccess:_},null,512),e(xe,{ref_key:"formRef3",ref:q},null,512),e(Ce,{ref_key:"importFormRef",ref:U,onSuccess:_},null,512),e(ve,{ref_key:"order",ref:F},null,512)],64)}}});export{Oe as default};
