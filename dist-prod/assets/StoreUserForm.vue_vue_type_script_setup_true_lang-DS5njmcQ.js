import{aU as c,d as W,e as X,z as j,r as d,A as E,c as I,o as m,F as C,h as t,a as l,x as $,w as r,O as H,J as F,B as L,C as N,D as Q,G as T,K as Y,S as Z,g as ee,aW as ae,aX as le,l as p,P as se,M as te}from"./index-QQaZ7rbf.js";import{_ as re}from"./Dialog.vue_vue_type_style_index_0_lang-BZRnyNPI.js";import{_ as oe}from"./UserSelect.vue_vue_type_script_setup_true_name_User_lang-DgBr_L2D.js";import{g as ue}from"./index-D-uYqOkD.js";const v={getStoreUserPage:async o=>await c.get({url:"/store/store-user/page",params:o}),getStoreUser:async o=>await c.get({url:"/store/store-user/get?id="+o}),createStoreUser:async o=>await c.post({url:"/store/store-user/create",data:o}),updateStoreUser:async o=>await c.put({url:"/store/store-user/update",data:o}),deleteStoreUser:async o=>await c.delete({url:"/store/store-user/delete?id="+o}),exportStoreUser:async o=>await c.download({url:"/store/store-user/export-excel",params:o})},de=W({name:"StoreUserForm",__name:"StoreUserForm",emits:["success"],setup(o,{expose:q,emit:A}){const{t:f}=X(),g=j(),i=d(!1),S=d(""),n=d(!1),V=d(""),s=d({id:void 0,shopId:void 0,uid:void 0,nickname:"",status:void 0}),D=E({shopId:[{required:!0,message:"\u95E8\u5E97\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],uid:[{required:!0,message:"\u8BF7\u9009\u62E9\u7528\u6237",trigger:"blur"}]}),y=d(),w=d([]);q({open:async(u,e)=>{if(i.value=!0,S.value=f("action."+u),V.value=u,z(),e){n.value=!0;try{s.value=await v.getStoreUser(e)}finally{n.value=!1}}const U=await ue();w.value=U}});const K=A,P=async()=>{await y.value.validate(),n.value=!0;try{const u=s.value;V.value==="create"?(await v.createStoreUser(u),g.success(f("common.createSuccess"))):(await v.updateStoreUser(u),g.success(f("common.updateSuccess"))),i.value=!1,K("success")}finally{n.value=!1}},b=d(),R=async u=>{s.value.nickname=u.nickname,s.value.uid=u.id},z=()=>{var u;s.value={id:void 0,shopId:void 0,uid:void 0,nickname:"",status:1},(u=y.value)==null||u.resetFields()};return(u,e)=>{const U=Y,B=Q,_=N,k=Z,h=le,G=ae,J=L,x=te,M=re,O=se;return m(),I(C,null,[t(M,{title:l(S),modelValue:l(i),"onUpdate:modelValue":e[6]||(e[6]=a=>$(i)?i.value=a:null)},{footer:r(()=>[t(x,{onClick:P,type:"primary",disabled:l(n)},{default:r(()=>[p("\u786E \u5B9A")]),_:1},8,["disabled"]),t(x,{onClick:e[5]||(e[5]=a=>i.value=!1)},{default:r(()=>[p("\u53D6 \u6D88")]),_:1})]),default:r(()=>[H((m(),F(J,{ref_key:"formRef",ref:y,model:l(s),rules:l(D),"label-width":"100px"},{default:r(()=>[t(_,{label:"\u95E8\u5E97",prop:"shopId"},{default:r(()=>[t(B,{modelValue:l(s).shopId,"onUpdate:modelValue":e[0]||(e[0]=a=>l(s).shopId=a),placeholder:"\u9009\u62E9\u5E97\u94FA"},{default:r(()=>[(m(!0),I(C,null,T(l(w),a=>(m(),F(U,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(_,{label:"\u7528\u6237",prop:"uid"},{default:r(()=>[t(k,{modelValue:l(s).nickname,"onUpdate:modelValue":e[2]||(e[2]=a=>l(s).nickname=a),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237id"},{append:r(()=>[ee("span",{style:{cursor:"pointer"},onClick:e[1]||(e[1]=a=>{b.value.open()})},"\u9009\u62E9\u7528\u6237")]),_:1},8,["modelValue"]),t(k,{modelValue:l(s).uid,"onUpdate:modelValue":e[3]||(e[3]=a=>l(s).uid=a),type:"hidden"},null,8,["modelValue"])]),_:1}),t(_,{label:"\u72B6\u6001",prop:"status"},{default:r(()=>[t(G,{modelValue:l(s).status,"onUpdate:modelValue":e[4]||(e[4]=a=>l(s).status=a)},{default:r(()=>[t(h,{label:1},{default:r(()=>[p("\u542F\u7528")]),_:1}),t(h,{label:0},{default:r(()=>[p("\u7981\u7528")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[O,l(n)]])]),_:1},8,["title","modelValue"]),t(oe,{ref_key:"UserSelectRef",ref:b,onSaveUser:R},null,512)],64)}}});export{v as S,de as _};
