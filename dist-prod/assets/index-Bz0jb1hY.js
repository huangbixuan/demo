import{d as k,z as F,e as R,r as m,A as M,R as U,c as r,o as i,h as l,w as s,B as j,a,C as q,O as d,F as w,G as A,m as B,J as G,M as J,N as O,a7 as W,P as D,_ as E}from"./index-QQaZ7rbf.js";import{_ as H}from"./index.vue_vue_type_script_setup_true_lang-CtP16Cnh.js";import{_ as K}from"./ContentWrap.vue_vue_type_script_setup_true_lang-CerucUbi.js";import{g as L,d as Q}from"./index-COkZqY69.js";import T from"./main-B8cmAKC9.js";import{_ as V}from"./main.vue_vue_type_script_setup_true_lang-CdYlBeNF.js";import"./index-BctfKmg_.js";import"./index-D_95hI5s.js";import"./el-image-DHi7RmhO.js";import"./index-CKlW-SbG.js";const X={class:"waterfall"},Y=E(k({name:"MpFreePublish",__name:"index",setup(Z){const u=F(),{t:I}=R(),c=m(!0),f=m(0),g=m([]),e=M({pageNo:1,pageSize:10,accountId:-1}),y=o=>{e.accountId=o,e.pageNo=1,p()},p=async()=>{try{c.value=!0;const o=await L(e);g.value=o.list,f.value=o.total}finally{c.value=!1}};return(o,n)=>{const h=q,v=j,_=K,b=O,C=J,N=B,x=H,z=U("hasPermi"),P=D;return i(),r(w,null,[l(_,null,{default:s(()=>[l(v,{class:"-mb-15px",model:a(e),ref:"queryFormRef",inline:!0,"label-width":"68px"},{default:s(()=>[l(h,{label:"\u516C\u4F17\u53F7",prop:"accountId"},{default:s(()=>[l(a(V),{onChange:y})]),_:1})]),_:1},8,["model"])]),_:1}),l(_,null,{default:s(()=>[d((i(),r("div",X,[(i(!0),r(w,null,A(a(g),t=>d((i(),r("div",{class:"waterfall-item",key:t.articleId},[l(a(T),{articles:t.content.newsItem},null,8,["articles"]),l(N,{justify:"center",class:"ope-row"},{default:s(()=>[d((i(),G(C,{type:"danger",circle:"",onClick:$=>(async S=>{try{await u.delConfirm("\u5220\u9664\u540E\u7528\u6237\u5C06\u65E0\u6CD5\u8BBF\u95EE\u6B64\u9875\u9762\uFF0C\u786E\u5B9A\u5220\u9664\uFF1F"),await Q(e.accountId,S.articleId),u.success(I("common.delSuccess")),await p()}catch{}})(t)},{default:s(()=>[l(b,{icon:"ep:delete"})]),_:2},1032,["onClick"])),[[z,["mp:free-publish:delete"]]])]),_:2},1024)])),[[W,t.content&&t.content.newsItem]])),128))])),[[P,a(c)]]),l(x,{total:a(f),page:a(e).pageNo,"onUpdate:page":n[0]||(n[0]=t=>a(e).pageNo=t),limit:a(e).pageSize,"onUpdate:limit":n[1]||(n[1]=t=>a(e).pageSize=t),onPagination:p},null,8,["total","page","limit"])]),_:1})],64)}}}),[["__scopeId","data-v-eeeb6a24"]]);export{Y as default};
