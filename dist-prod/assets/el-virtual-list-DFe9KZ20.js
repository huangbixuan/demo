import{aJ as ne,a4 as c,cc as le,at as z,cd as m,b5 as y,ce as oe,d as se,av as j,r as V,A as ie,cf as ue,a as E,as as ce,cg as de,aY as k,aV as ve,bc as me,be as pe}from"./index-QQaZ7rbf.js";var H=Number.isNaN||function(e){return typeof e=="number"&&e!=e};function fe(e,t){return e===t||!(!H(e)||!H(t))}function ge(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!fe(e[r],t[r]))return!1;return!0}const he=()=>{const e=ne().proxy.$props;return c(()=>{const t=(r,u,o)=>({});return e.perfMode?le(t):function(r,u){u===void 0&&(u=ge);var o=null;function p(){for(var i=[],d=0;d<arguments.length;d++)i[d]=arguments[d];if(o&&o.lastThis===this&&u(i,o.lastArgs))return o.lastResult;var f=r.apply(this,i);return o={lastResult:f,lastArgs:i,lastThis:this},f}return p.clear=function(){o=null},p}(t)})},ye=50,be="itemRendered",Se="scroll",P="forward",K="backward",we="auto",xe="smart",Ne="start",ze="center",Ee="end",b="horizontal",I="vertical",B="rtl",W="negative",Y="positive-ascending",J="positive-descending",Me={[b]:"left",[I]:"top"},R=m({type:y([Number,Function]),required:!0}),T=m({type:Number}),O=m({type:Number,default:2}),Le=m({type:String,values:["ltr","rtl"],default:"ltr"}),$=m({type:Number,default:0}),M=m({type:Number,required:!0}),_=m({type:String,values:["horizontal","vertical"],default:I}),Q=z({className:{type:String,default:""},containerElement:{type:y([String,Object]),default:"div"},data:{type:y(Array),default:()=>oe([])},direction:Le,height:{type:[String,Number],required:!0},innerElement:{type:[String,Object],default:"div"},style:{type:y([Object,String,Array])},useIsScrolling:{type:Boolean,default:!1},width:{type:[Number,String],required:!1},perfMode:{type:Boolean,default:!0},scrollbarAlwaysOn:{type:Boolean,default:!1}}),Ce=z({cache:O,estimatedItemSize:T,layout:_,initScrollOffset:$,total:M,itemSize:R,...Q}),q={type:Number,default:6},U={type:Number,default:0},X={type:Number,default:2},Ie=z({columnCache:O,columnWidth:R,estimatedColumnWidth:T,estimatedRowHeight:T,initScrollLeft:$,initScrollTop:$,itemKey:{type:y(Function),default:({columnIndex:e,rowIndex:t})=>`${t}:${e}`},rowCache:O,rowHeight:R,totalColumn:M,totalRow:M,hScrollbarSize:q,vScrollbarSize:q,scrollbarStartGap:U,scrollbarEndGap:X,role:String,...Q}),Z=z({alwaysOn:Boolean,class:String,layout:_,total:M,ratio:{type:Number,required:!0},clientSize:{type:Number,required:!0},scrollFrom:{type:Number,required:!0},scrollbarSize:q,startGap:U,endGap:X,visible:Boolean}),Be=(e,t)=>e<t?P:K,Re=e=>e==="ltr"||e===B||e===b,Te=e=>e===B;let S=null;function Oe(e=!1){if(S===null||e){const t=document.createElement("div"),r=t.style;r.width="50px",r.height="50px",r.overflow="scroll",r.direction="rtl";const u=document.createElement("div"),o=u.style;return o.width="100px",o.height="100px",t.appendChild(u),document.body.appendChild(t),t.scrollLeft>0?S=J:(t.scrollLeft=1,S=t.scrollLeft===0?W:Y),document.body.removeChild(t),S}return S}const $e=se({name:"ElVirtualScrollBar",props:Z,emits:["scroll","start-move","stop-move"],setup(e,{emit:t}){const r=c(()=>e.startGap+e.endGap),u=j("virtual-scrollbar"),o=j("scrollbar"),p=V(),i=V();let d=null,f=null;const s=ie({isDragging:!1,traveled:0}),n=c(()=>ue[e.layout]),A=c(()=>e.clientSize-E(r)),ee=c(()=>({position:"absolute",width:`${b===e.layout?A.value:e.scrollbarSize}px`,height:`${b===e.layout?e.scrollbarSize:A.value}px`,[Me[e.layout]]:"2px",right:"2px",bottom:"2px",borderRadius:"4px"})),L=c(()=>{const a=e.ratio,l=e.clientSize;if(a>=100)return Number.POSITIVE_INFINITY;if(a>=50)return a*l/100;const g=l/3;return Math.floor(Math.min(Math.max(a*l,20),g))}),te=c(()=>{if(!Number.isFinite(L.value))return{display:"none"};const a=`${L.value}px`;return function({move:g,size:N,bar:G},re){const v={},C=`translate${G.axis}(${g}px)`;return v[G.size]=N,v.transform=C,v.msTransform=C,v.webkitTransform=C,re==="horizontal"?v.height="100%":v.width="100%",v}({bar:n.value,size:a,move:s.traveled},e.layout)}),h=c(()=>Math.floor(e.clientSize-L.value-E(r))),D=()=>{window.removeEventListener("mousemove",x),window.removeEventListener("mouseup",w),document.onselectstart=f,f=null;const a=E(i);a&&(a.removeEventListener("touchmove",x),a.removeEventListener("touchend",w))},F=a=>{a.stopImmediatePropagation(),a.ctrlKey||[1,2].includes(a.button)||(s.isDragging=!0,s[n.value.axis]=a.currentTarget[n.value.offset]-(a[n.value.client]-a.currentTarget.getBoundingClientRect()[n.value.direction]),t("start-move"),(()=>{window.addEventListener("mousemove",x),window.addEventListener("mouseup",w);const l=E(i);l&&(f=document.onselectstart,document.onselectstart=()=>!1,l.addEventListener("touchmove",x),l.addEventListener("touchend",w))})())},w=()=>{s.isDragging=!1,s[n.value.axis]=0,t("stop-move"),D()},x=a=>{const{isDragging:l}=s;if(!l||!i.value||!p.value)return;const g=s[n.value.axis];if(!g)return;me(d);const N=-1*(p.value.getBoundingClientRect()[n.value.direction]-a[n.value.client])-(i.value[n.value.offset]-g);d=pe(()=>{s.traveled=Math.max(e.startGap,Math.min(N,h.value)),t("scroll",N,h.value)})},ae=a=>{const l=Math.abs(a.target.getBoundingClientRect()[n.value.direction]-a[n.value.client])-i.value[n.value.offset]/2;s.traveled=Math.max(0,Math.min(l,h.value)),t("scroll",l,h.value)};return ce(()=>e.scrollFrom,a=>{s.isDragging||(s.traveled=Math.ceil(a*h.value))}),de(()=>{D()}),()=>k("div",{role:"presentation",ref:p,class:[u.b(),e.class,(e.alwaysOn||s.isDragging)&&"always-on"],style:ee.value,onMousedown:ve(ae,["stop","prevent"]),onTouchstartPrevent:F},k("div",{ref:i,class:o.e("thumb"),style:te.value,onMousedown:F},[]))}});export{we as A,K as B,ze as C,ye as D,Ee as E,P as F,b as H,be as I,B as R,Se as S,I as V,$e as a,Y as b,W as c,Be as d,J as e,Ne as f,Oe as g,xe as h,Re as i,Ie as j,Te as k,Z as l,he as u,Ce as v};
