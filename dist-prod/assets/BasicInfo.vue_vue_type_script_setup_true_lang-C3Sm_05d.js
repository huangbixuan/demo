import{_ as q}from"./XButton-C609XjEW.js";import{_ as B}from"./Form-D4EiUnE1.js";import{d as C,e as U,z as A,b as F,A as d,r as N,f as R,c as W,o as j,F as z,h as r,g as E,a,w as i,aW as M,aX as S,l as g,t as b}from"./index-QQaZ7rbf.js";import{u as X,g as $}from"./profile-CWZskjgo.js";const D={style:{"text-align":"center"}},G=C({name:"BasicInfo",__name:"BasicInfo",setup(H){const{t:e}=U(),_=A(),k=F(),y=d({nickname:[{required:!0,message:e("profile.rules.nickname"),trigger:"blur"}],email:[{required:!0,message:e("profile.rules.mail"),trigger:"blur"},{type:"email",message:e("profile.rules.truemail"),trigger:["blur","change"]}],mobile:[{required:!0,message:e("profile.rules.phone"),trigger:"blur"},{pattern:/^1[3|4|5|6|7|8|9][0-9]\d{8}$/,message:e("profile.rules.truephone"),trigger:"blur"}]}),h=d([{field:"nickname",label:e("profile.user.nickname"),component:"Input"},{field:"mobile",label:e("profile.user.mobile"),component:"Input"},{field:"email",label:e("profile.user.email"),component:"Input"},{field:"sex",label:e("profile.user.sex"),component:"InputNumber",value:0}]),s=N(),n=async()=>{var l;const m=await $();return(l=a(s))==null||l.setValues(m),m};return R(async()=>{await n()}),(m,l)=>{const u=S,x=M,I=B,c=q;return j(),W(z,null,[r(I,{ref_key:"formRef",ref:s,labelWidth:200,rules:a(y),schema:a(h)},{sex:i(t=>[r(x,{modelValue:t.sex,"onUpdate:modelValue":o=>t.sex=o},{default:i(()=>[r(u,{label:1},{default:i(()=>[g(b(a(e)("profile.user.man")),1)]),_:1}),r(u,{label:2},{default:i(()=>[g(b(a(e)("profile.user.woman")),1)]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1},8,["rules","schema"]),E("div",D,[r(c,{title:a(e)("common.save"),type:"primary",onClick:l[0]||(l[0]=t=>(()=>{var p;const o=(p=a(s))==null?void 0:p.getElFormRef();o&&o.validate(async w=>{var f;if(w){const V=(f=a(s))==null?void 0:f.formModel;await X(V),_.success(e("common.updateSuccess"));const v=await n();k.setUserNicknameAction(v.nickname)}})})())},null,8,["title"]),r(c,{title:a(e)("common.reset"),type:"danger",onClick:l[1]||(l[1]=t=>n())},null,8,["title"])])],64)}}});export{G as _};
