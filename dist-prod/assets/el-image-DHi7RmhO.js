import{a_ as W,at as X,b5 as z,ce as Z,au as ee,d as _,bt as ae,av as le,b6 as se,c$ as te,r as c,a4 as u,bf as p,as as ie,f as oe,c as d,o as n,ay as E,i as y,g as A,t as ne,a,$ as g,F as M,az as re,J as ce,w as ue,d0 as de,aK as ve,aL as fe,d1 as pe,b4 as ye,d2 as me,cE as T,d3 as ge,d4 as we,aB as be}from"./index-QQaZ7rbf.js";const he=X({hideOnClickModal:Boolean,src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:Boolean,scrollContainer:{type:z([String,Object])},previewSrcList:{type:z(Array),default:()=>Z([])},previewTeleported:Boolean,zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},crossorigin:{type:z(String)}}),Se={load:i=>i instanceof Event,error:i=>i instanceof Event,switch:i=>W(i),close:()=>!0,show:()=>!0},ke=["src","loading","crossorigin"],xe={key:0},ze=_({name:"ElImage",inheritAttrs:!1}),Ee=be(ee(_({...ze,props:he,emits:Se,setup(i,{emit:v}){const l=i;let L="";const{t:j}=ae(),o=le("image"),F=se(),R=te(),w=c(),f=c(!1),r=c(!0),b=c(!1),m=c(),t=c(),Y=p&&"loading"in HTMLImageElement.prototype;let h,S;const K=u(()=>[o.e("inner"),k.value&&o.e("preview"),r.value&&o.is("loading")]),P=u(()=>F.style),q=u(()=>{const{fit:e}=l;return p&&e?{objectFit:e}:{}}),k=u(()=>{const{previewSrcList:e}=l;return Array.isArray(e)&&e.length>0}),D=u(()=>{const{previewSrcList:e,initialIndex:s}=l;let O=s;return s>e.length-1&&(O=0),O}),$=u(()=>l.loading!=="eager"&&(!Y&&l.loading==="lazy"||l.lazy)),x=()=>{p&&(r.value=!0,f.value=!1,w.value=l.src)};function H(e){r.value=!1,f.value=!1,v("load",e)}function J(e){r.value=!1,f.value=!0,v("error",e)}function B(){we(m.value,t.value)&&(x(),N())}const C=ge(B,200,!0);async function I(){var e;if(!p)return;await fe();const{scrollContainer:s}=l;pe(s)?t.value=s:ye(s)&&s!==""?t.value=(e=document.querySelector(s))!=null?e:void 0:m.value&&(t.value=me(m.value)),t.value&&(h=T(t,"scroll",C),setTimeout(()=>B(),100))}function N(){p&&t.value&&C&&(h==null||h(),t.value=void 0)}function G(e){if(e.ctrlKey)return e.deltaY<0||e.deltaY>0?(e.preventDefault(),!1):void 0}function Q(){k.value&&(S=T("wheel",G,{passive:!1}),L=document.body.style.overflow,document.body.style.overflow="hidden",b.value=!0,v("show"))}function U(){S==null||S(),document.body.style.overflow=L,b.value=!1,v("close")}function V(e){v("switch",e)}return ie(()=>l.src,()=>{$.value?(r.value=!0,f.value=!1,N(),I()):x()}),oe(()=>{$.value?I():x()}),(e,s)=>(n(),d("div",{ref_key:"container",ref:m,class:g([a(o).b(),e.$attrs.class]),style:ve(a(P))},[f.value?E(e.$slots,"error",{key:0},()=>[A("div",{class:g(a(o).e("error"))},ne(a(j)("el.image.error")),3)]):(n(),d(M,{key:1},[w.value!==void 0?(n(),d("img",re({key:0},a(R),{src:w.value,loading:e.loading,style:a(q),class:a(K),crossorigin:e.crossorigin,onClick:Q,onLoad:H,onError:J}),null,16,ke)):y("v-if",!0),r.value?(n(),d("div",{key:1,class:g(a(o).e("wrapper"))},[E(e.$slots,"placeholder",{},()=>[A("div",{class:g(a(o).e("placeholder"))},null,2)])],2)):y("v-if",!0)],64)),a(k)?(n(),d(M,{key:2},[b.value?(n(),ce(a(de),{key:0,"z-index":e.zIndex,"initial-index":a(D),infinite:e.infinite,"zoom-rate":e.zoomRate,"min-scale":e.minScale,"max-scale":e.maxScale,"url-list":e.previewSrcList,"hide-on-click-modal":e.hideOnClickModal,teleported:e.previewTeleported,"close-on-press-escape":e.closeOnPressEscape,onClose:U,onSwitch:V},{default:ue(()=>[e.$slots.viewer?(n(),d("div",xe,[E(e.$slots,"viewer")])):y("v-if",!0)]),_:3},8,["z-index","initial-index","infinite","zoom-rate","min-scale","max-scale","url-list","hide-on-click-modal","teleported","close-on-press-escape"])):y("v-if",!0)],64)):y("v-if",!0)],6))}}),[["__file","image.vue"]]));export{Ee as E};
