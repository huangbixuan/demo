import{d as J,e as K,z as M,r as s,A as R,J as v,o as n,w as t,O as W,B as X,a,h as d,C as E,D as $,c as C,F as O,G as S,K as H,S as L,aW as Y,aX as Z,l as c,P as ee,M as le,x as ae}from"./index-QQaZ7rbf.js";import{_ as oe}from"./Dialog.vue_vue_type_style_index_0_lang-BZRnyNPI.js";import{_ as de}from"./Materials-DPzAVFcF.js";import{g as te,c as ue,u as se}from"./index-BiAqHivH.js";import{g as ie}from"./index-D-uYqOkD.js";import{S as re}from"./index-RcpyhGJW.js";const me=J({__name:"ShopDeskForm",emits:["success"],setup(ne,{expose:Q,emit:q}){const{t:f}=K(),V=M(),r=s(!1),g=s(""),m=s(!1),_=s(""),o=s({id:void 0,shopId:void 0,shopName:void 0,cateId:void 0,title:void 0,image:"",number:void 0,miniQrcode:void 0,h5Qrcode:void 0,aliQrcode:void 0,note:void 0,orderCount:void 0,costAmount:void 0,lastOrderNo:void 0,lastOrderTime:void 0,lastOrderStatus:void 0,status:void 0}),N=R({shopId:[{required:!0,message:"\u95E8\u5E97\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],title:[{required:!0,message:"\u684C\u53F7\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],number:[{required:!0,message:"\u684C\u4F4D\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],status:[{required:!0,message:"\u72B6\u6001\uFF1A1=\u542F\u7528\uFF0C2=\u7981\u7528\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),p=s(),h=s([]),y=s([]);Q({open:async(u,l)=>{if(r.value=!0,g.value=f("action."+u),_.value=u,P(),D(),l){m.value=!0;try{o.value=await te(l)}finally{m.value=!1}}}});const x=q,A=async()=>{if(p&&await p.value.validate()){m.value=!0;try{const u=o.value;_.value==="create"?(await ue(u),V.success(f("common.createSuccess"))):(await se(u),V.success(f("common.updateSuccess"))),r.value=!1,x("success")}finally{m.value=!1}}},D=async()=>{try{const u=await ie();h.value=u}finally{}},F=async u=>{try{const l=await re.getShopDeskCategoryPage({shopId:u});y.value=l.list}finally{}},P=()=>{var u;o.value={id:void 0,shopId:void 0,shopName:void 0,cateId:void 0,title:void 0,image:"",number:void 0,miniQrcode:void 0,h5Qrcode:void 0,aliQrcode:void 0,note:void 0,orderCount:void 0,costAmount:void 0,lastOrderNo:void 0,lastOrderTime:void 0,lastOrderStatus:void 0,status:1},(u=p.value)==null||u.resetFields()};return(u,l)=>{const I=H,U=$,i=E,b=L,T=de,k=Z,j=Y,z=X,w=le,B=oe,G=ee;return n(),v(B,{title:a(g),modelValue:a(r),"onUpdate:modelValue":l[8]||(l[8]=e=>ae(r)?r.value=e:null)},{footer:t(()=>[d(w,{onClick:A,type:"primary",disabled:a(m)},{default:t(()=>[c("\u786E \u5B9A")]),_:1},8,["disabled"]),d(w,{onClick:l[7]||(l[7]=e=>r.value=!1)},{default:t(()=>[c("\u53D6 \u6D88")]),_:1})]),default:t(()=>[W((n(),v(z,{ref_key:"formRef",ref:p,model:a(o),rules:a(N),"label-width":"100px"},{default:t(()=>[d(i,{label:"\u9009\u62E9\u5E97\u94FA",prop:"shopId"},{default:t(()=>[d(U,{modelValue:a(o).shopId,"onUpdate:modelValue":l[0]||(l[0]=e=>a(o).shopId=e),placeholder:"\u9009\u62E9\u5E97\u94FA",onChange:F},{default:t(()=>[(n(!0),C(O,null,S(a(h),e=>(n(),v(I,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),d(i,{label:"\u9009\u62E9\u684C\u9762\u5206\u7C7B",prop:"cateId"},{default:t(()=>[d(U,{modelValue:a(o).cateId,"onUpdate:modelValue":l[1]||(l[1]=e=>a(o).cateId=e),placeholder:"\u9009\u62E9\u684C\u9762\u5206\u7C7B"},{default:t(()=>[(n(!0),C(O,null,S(a(y),e=>(n(),v(I,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),d(i,{label:"\u684C\u4F4D\u540D\u79F0",prop:"title"},{default:t(()=>[d(b,{modelValue:a(o).title,"onUpdate:modelValue":l[2]||(l[2]=e=>a(o).title=e),placeholder:"\u8BF7\u8F93\u5165\u684C\u4F4D\u540D\u79F0"},null,8,["modelValue"])]),_:1}),d(i,{label:"\u684C\u9762\u56FE\u7247",prop:"picUrl"},{default:t(()=>[d(T,{modelValue:a(o).image,"onUpdate:modelValue":l[3]||(l[3]=e=>a(o).image=e),num:"1",type:"image"},null,8,["modelValue"])]),_:1}),d(i,{label:"\u684C\u53F7",prop:"number"},{default:t(()=>[d(b,{modelValue:a(o).number,"onUpdate:modelValue":l[4]||(l[4]=e=>a(o).number=e),placeholder:"\u8BF7\u8F93\u5165\u684C\u53F7"},null,8,["modelValue"])]),_:1}),d(i,{label:"\u5907\u6CE8",prop:"note"},{default:t(()=>[d(b,{modelValue:a(o).note,"onUpdate:modelValue":l[5]||(l[5]=e=>a(o).note=e),placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8"},null,8,["modelValue"])]),_:1}),d(i,{label:"\u72B6\u6001",prop:"status"},{default:t(()=>[d(j,{modelValue:a(o).status,"onUpdate:modelValue":l[6]||(l[6]=e=>a(o).status=e)},{default:t(()=>[d(k,{label:1},{default:t(()=>[c("\u542F\u7528")]),_:1}),d(k,{label:0},{default:t(()=>[c("\u7981\u7528")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[G,a(m)]])]),_:1},8,["title","modelValue"])}}});export{me as _};
