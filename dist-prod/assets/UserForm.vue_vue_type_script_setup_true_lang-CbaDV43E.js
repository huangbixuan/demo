import{d as j,e as z,z as A,r as m,A as B,J as p,o as n,w as o,O as D,B as G,a,h as d,C as J,S as K,D as O,c as P,F as R,G as q,K as E,P as H,M as L,l as _,x as N}from"./index-QQaZ7rbf.js";import{_ as Q}from"./Dialog.vue_vue_type_style_index_0_lang-BZRnyNPI.js";import{b as T}from"./index-BMmUWe6o.js";import{g as W,u as X}from"./index-DJTZl51b.js";const Y=j({name:"MpUserForm",__name:"UserForm",emits:["success"],setup(Z,{expose:V,emit:b}){const{t:y}=z(),g=A(),u=m(!1),t=m(!1),l=m({id:void 0,nickname:void 0,remark:void 0,tagIds:[]}),w=B({}),i=m(),v=m([]);V({open:async r=>{if(u.value=!0,h(),r){t.value=!0;try{l.value=await W(r)}finally{t.value=!1}}v.value=await T()}});const I=b,U=async()=>{if(i&&await i.value.validate()){t.value=!0;try{await X(l.value),g.success(y("common.updateSuccess")),u.value=!1,I("success")}finally{t.value=!1}}},h=()=>{var r;l.value={id:void 0,nickname:void 0,remark:void 0,tagIds:[]},(r=i.value)==null||r.resetFields()};return(r,s)=>{const f=K,c=J,F=E,x=O,C=G,k=L,M=Q,S=H;return n(),p(M,{modelValue:a(u),"onUpdate:modelValue":s[4]||(s[4]=e=>N(u)?u.value=e:null),title:"\u4FEE\u6539"},{footer:o(()=>[d(k,{disabled:a(t),type:"primary",onClick:U},{default:o(()=>[_("\u786E \u5B9A")]),_:1},8,["disabled"]),d(k,{onClick:s[3]||(s[3]=e=>u.value=!1)},{default:o(()=>[_("\u53D6 \u6D88")]),_:1})]),default:o(()=>[D((n(),p(C,{ref_key:"formRef",ref:i,model:a(l),rules:a(w),"label-width":"80px"},{default:o(()=>[d(c,{label:"\u6635\u79F0",prop:"nickname"},{default:o(()=>[d(f,{modelValue:a(l).nickname,"onUpdate:modelValue":s[0]||(s[0]=e=>a(l).nickname=e),placeholder:"\u8BF7\u8F93\u5165\u6635\u79F0"},null,8,["modelValue"])]),_:1}),d(c,{label:"\u5907\u6CE8",prop:"remark"},{default:o(()=>[d(f,{modelValue:a(l).remark,"onUpdate:modelValue":s[1]||(s[1]=e=>a(l).remark=e),placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8"},null,8,["modelValue"])]),_:1}),d(c,{label:"\u6807\u7B7E",prop:"tagIds"},{default:o(()=>[d(x,{modelValue:a(l).tagIds,"onUpdate:modelValue":s[2]||(s[2]=e=>a(l).tagIds=e),clearable:"",multiple:"",placeholder:"\u8BF7\u9009\u62E9\u6807\u7B7E"},{default:o(()=>[(n(!0),P(R,null,q(a(v),e=>(n(),p(F,{key:e.tagId,label:e.name,value:e.tagId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[S,a(t)]])]),_:1},8,["modelValue"])}}});export{Y as _};
