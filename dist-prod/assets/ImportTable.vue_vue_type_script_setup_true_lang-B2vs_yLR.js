import{d as G,z as J,r as n,A as L,J as b,o as f,w as a,h as e,B as M,a as l,C as O,D as P,c as E,F as H,G as Q,K as W,S as $,T as x,M as X,l as v,N as Y,m as Z,O as ee,n as ae,p as le,P as oe,x as te}from"./index-QQaZ7rbf.js";import{_ as de}from"./Dialog.vue_vue_type_style_index_0_lang-BZRnyNPI.js";import{b as ne,c as se}from"./index-D-DH1qWO.js";import{g as ue}from"./index-B6q6muef.js";const me=G({name:"InfraCodegenImportTable",__name:"ImportTable",emits:["success"],setup(re,{expose:I,emit:S}){const k=J(),s=n(!1),_=n(!0),C=n([]),o=L({name:void 0,comment:void 0,dataSourceConfigId:0}),R=n(),m=n([]),u=async()=>{_.value=!0;try{C.value=await ne(o)}finally{_.value=!1}},U=async()=>{o.name=void 0,o.comment=void 0,o.dataSourceConfigId=m.value[0].id,await u()};I({open:async()=>{m.value=await ue(),o.dataSourceConfigId=m.value[0].id,s.value=!0,await u()}});const g=()=>{s.value=!1,r.value=[]},h=n(),r=n([]),K=c=>{var t;(t=l(h))==null||t.toggleRowSelection(c)},T=c=>{r.value=c.map(t=>t.name)},D=async()=>{await se({dataSourceConfigId:o.dataSourceConfigId,tableNames:r.value}),k.success("\u5BFC\u5165\u6210\u529F"),F("success"),g()},F=S;return(c,t)=>{const N=W,j=P,i=O,y=$,V=Y,p=X,q=M,w=le,z=Z,A=de,B=oe;return f(),b(A,{modelValue:l(s),"onUpdate:modelValue":t[3]||(t[3]=d=>te(s)?s.value=d:null),title:"\u5BFC\u5165\u8868",width:"800px"},{footer:a(()=>[e(p,{disabled:l(r).length===0,type:"primary",onClick:D},{default:a(()=>[v(" \u5BFC\u5165 ")]),_:1},8,["disabled"]),e(p,{onClick:g},{default:a(()=>[v("\u5173\u95ED")]),_:1})]),default:a(()=>[e(q,{ref_key:"queryFormRef",ref:R,inline:!0,model:l(o),"label-width":"68px"},{default:a(()=>[e(i,{label:"\u6570\u636E\u6E90",prop:"dataSourceConfigId"},{default:a(()=>[e(j,{modelValue:l(o).dataSourceConfigId,"onUpdate:modelValue":t[0]||(t[0]=d=>l(o).dataSourceConfigId=d),class:"!w-240px",placeholder:"\u8BF7\u9009\u62E9\u6570\u636E\u6E90"},{default:a(()=>[(f(!0),E(H,null,Q(l(m),d=>(f(),b(N,{key:d.id,label:d.name,value:d.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(i,{label:"\u8868\u540D\u79F0",prop:"name"},{default:a(()=>[e(y,{modelValue:l(o).name,"onUpdate:modelValue":t[1]||(t[1]=d=>l(o).name=d),class:"!w-240px",clearable:"",placeholder:"\u8BF7\u8F93\u5165\u8868\u540D\u79F0",onKeyup:x(u,["enter"])},null,8,["modelValue"])]),_:1}),e(i,{label:"\u8868\u63CF\u8FF0",prop:"comment"},{default:a(()=>[e(y,{modelValue:l(o).comment,"onUpdate:modelValue":t[2]||(t[2]=d=>l(o).comment=d),class:"!w-240px",clearable:"",placeholder:"\u8BF7\u8F93\u5165\u8868\u63CF\u8FF0",onKeyup:x(u,["enter"])},null,8,["modelValue"])]),_:1}),e(i,null,{default:a(()=>[e(p,{onClick:u},{default:a(()=>[e(V,{class:"mr-5px",icon:"ep:search"}),v(" \u641C\u7D22 ")]),_:1}),e(p,{onClick:U},{default:a(()=>[e(V,{class:"mr-5px",icon:"ep:refresh"}),v(" \u91CD\u7F6E ")]),_:1})]),_:1})]),_:1},8,["model"]),e(z,null,{default:a(()=>[ee((f(),b(l(ae),{ref_key:"tableRef",ref:h,data:l(C),height:"260px",onRowClick:K,onSelectionChange:T},{default:a(()=>[e(w,{type:"selection",width:"55"}),e(w,{"show-overflow-tooltip":!0,label:"\u8868\u540D\u79F0",prop:"name"}),e(w,{"show-overflow-tooltip":!0,label:"\u8868\u63CF\u8FF0",prop:"comment"})]),_:1},8,["data"])),[[B,l(_)]])]),_:1})]),_:1},8,["modelValue"])}}});export{me as _};
