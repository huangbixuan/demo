import{aU as m,d as K,e as M,z as N,r as o,A as P,J as h,o as p,w as d,O as R,B as W,a,h as t,C as X,D as E,c as H,K as L,F as Q,G as T,S as Y,aW as Z,aX as $,l as f,P as ee,M as ae,x as le}from"./index-QQaZ7rbf.js";import{_ as se}from"./Dialog.vue_vue_type_style_index_0_lang-BZRnyNPI.js";import{_ as de}from"./Materials-DPzAVFcF.js";import{g as te}from"./index-D-uYqOkD.js";const ue=async c=>await m.get({url:"/shop/ads/page",params:c}),oe=async c=>await m.delete({url:"/shop/ads/delete?id="+c}),ie=K({__name:"AdsForm",emits:["success"],setup(c,{expose:U,emit:k}){const{t:w}=M(),y=N(),i=o(!1),_=o(""),r=o(!1),b=o(""),l=o({id:void 0,image:void 0,isSwitch:void 0,weigh:void 0,shopId:0}),F=P({image:[{required:!0,message:"\u56FE\u7247\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],weigh:[{required:!0,message:"\u6743\u91CD\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],shopId:[{required:!0,message:"\u8BF7\u9009\u62E9\u5E97\u94FA",trigger:"blur"}]}),n=o(),V=o([]);U({open:async(u,e)=>{if(i.value=!0,_.value=w("action."+u),b.value=u,A(),x(),e){r.value=!0;try{l.value=await(async v=>await m.get({url:"/shop/ads/get?id="+v}))(e),l.value.shopId=Number(l.value.shopId)}finally{r.value=!1}}}});const q=k,C=async()=>{if(n&&await n.value.validate()){r.value=!0;try{const u=l.value;b.value==="create"?(await(async e=>await m.post({url:"/shop/ads/create",data:e}))(u),y.success(w("common.createSuccess"))):(await(async e=>await m.put({url:"/shop/ads/update",data:e}))(u),y.success(w("common.updateSuccess"))),i.value=!1,q("success")}finally{r.value=!1}}},x=async()=>{try{const u=await te();V.value=u}finally{}},A=()=>{var u;l.value={id:void 0,image:void 0,isSwitch:1,weigh:void 0,shopId:0},(u=n.value)==null||u.resetFields()};return(u,e)=>{const v=L,z=E,g=X,O=de,j=Y,I=$,B=Z,D=W,S=ae,G=se,J=ee;return p(),h(G,{title:a(_),modelValue:a(i),"onUpdate:modelValue":e[5]||(e[5]=s=>le(i)?i.value=s:null)},{footer:d(()=>[t(S,{onClick:C,type:"primary",disabled:a(r)},{default:d(()=>[f("\u786E \u5B9A")]),_:1},8,["disabled"]),t(S,{onClick:e[4]||(e[4]=s=>i.value=!1)},{default:d(()=>[f("\u53D6 \u6D88")]),_:1})]),default:d(()=>[R((p(),h(D,{ref_key:"formRef",ref:n,model:a(l),rules:a(F),"label-width":"100px"},{default:d(()=>[t(g,{label:"\u5C55\u793A\u5E97\u94FA",prop:"shopId"},{default:d(()=>[t(z,{modelValue:a(l).shopId,"onUpdate:modelValue":e[0]||(e[0]=s=>a(l).shopId=s),placeholder:"\u9009\u62E9\u5E97\u94FA"},{default:d(()=>[(p(),h(v,{key:0,label:"\u5168\u90E8",value:0})),(p(!0),H(Q,null,T(a(V),s=>(p(),h(v,{key:s.id,label:s.name,value:s.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(g,{label:"\u56FE\u7247",prop:"image"},{default:d(()=>[t(O,{modelValue:a(l).image,"onUpdate:modelValue":e[1]||(e[1]=s=>a(l).image=s),num:"1",type:"image"},null,8,["modelValue"])]),_:1}),t(g,{label:"\u6743\u91CD",prop:"weigh"},{default:d(()=>[t(j,{modelValue:a(l).weigh,"onUpdate:modelValue":e[2]||(e[2]=s=>a(l).weigh=s),placeholder:"\u8BF7\u8F93\u5165\u6743\u91CD"},null,8,["modelValue"])]),_:1}),t(g,{label:"\u662F\u5426\u53EF\u7528",prop:"isSwitch"},{default:d(()=>[t(B,{modelValue:a(l).isSwitch,"onUpdate:modelValue":e[3]||(e[3]=s=>a(l).isSwitch=s)},{default:d(()=>[t(I,{label:1},{default:d(()=>[f("\u662F")]),_:1}),t(I,{label:0},{default:d(()=>[f("\u5426")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[J,a(r)]])]),_:1},8,["title","modelValue"])}}});export{ie as _,oe as d,ue as g};
