import{aU as n,d as B,e as j,z as J,r as m,A as M,J as k,o as w,w as t,O as N,B as O,a,h as l,C as P,S as R,g as q,l as v,ba as E,N as G,P as H,M as L,x as Q}from"./index-QQaZ7rbf.js";import{_ as T}from"./Dialog.vue_vue_type_style_index_0_lang-BZRnyNPI.js";const W=async r=>n.delete({url:"/ma/account/delete?id="+r,method:"delete"}),X=async r=>n.get({url:"/ma/account/page",params:r}),Y=async r=>n.put({url:"/ma/account/set-main?id="+r}),Z=B({__name:"AccountForm",emits:["success"],setup(r,{expose:x,emit:h}){const{t:y}=j(),g=J(),d=m(!1),V=m(""),o=m(!1),_=m(""),u=m({id:void 0,name:"",account:"",appId:"",appSecret:"",token:"",aesKey:"",remark:""}),U=M({name:[{required:!0,message:"\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],appId:[{required:!0,message:"\u516C\u4F17\u53F7 appId \u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],appSecret:[{required:!0,message:"\u516C\u4F17\u53F7\u5BC6\u94A5\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),i=m();x({open:async(s,e)=>{if(d.value=!0,V.value=y("action."+s),_.value=s,D(),e){o.value=!0;try{u.value=await(async c=>n.get({url:"/ma/account/get?id="+c}))(e)}finally{o.value=!1}}}});const A=h,C=async()=>{if(i&&await i.value.validate()){o.value=!0;try{const s=u.value;_.value==="create"?(await(async e=>await n.post({url:"/ma/account/create",data:e}))(s),g.success(y("common.createSuccess"))):(await(async e=>n.put({url:"/ma/account/update",data:e}))(s),g.success(y("common.updateSuccess"))),d.value=!1,A("success")}finally{o.value=!1}}},D=()=>{var s;u.value={id:void 0,name:"",account:"",appId:"",appSecret:"",token:"",aesKey:"",remark:""},(s=i.value)==null||s.resetFields()};return(s,e)=>{const c=R,f=P,b=G,S=E,F=O,I=L,K=T,z=H;return w(),k(K,{modelValue:a(d),"onUpdate:modelValue":e[5]||(e[5]=p=>Q(d)?d.value=p:null),title:a(V)},{footer:t(()=>[l(I,{disabled:a(o),type:"primary",onClick:C},{default:t(()=>[v("\u786E \u5B9A")]),_:1},8,["disabled"]),l(I,{onClick:e[4]||(e[4]=p=>d.value=!1)},{default:t(()=>[v("\u53D6 \u6D88")]),_:1})]),default:t(()=>[N((w(),k(F,{ref_key:"formRef",ref:i,model:a(u),rules:a(U),"label-width":"120px"},{default:t(()=>[l(f,{label:"\u540D\u79F0",prop:"name"},{default:t(()=>[l(c,{modelValue:a(u).name,"onUpdate:modelValue":e[0]||(e[0]=p=>a(u).name=p),placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0"},null,8,["modelValue"])]),_:1}),l(f,{label:"appId",prop:"appId"},{label:t(()=>[q("span",null,[l(S,{content:"\u5728\u5FAE\u4FE1\u516C\u4F17\u5E73\u53F0\uFF08mp.weixin.qq.com\uFF09\u7684\u83DC\u5355 [\u8BBE\u7F6E\u4E0E\u5F00\u53D1 - \u5C0F\u7A0B\u5E8F\u8BBE\u7F6E - \u57FA\u672C\u8BBE\u7F6E] \u4E2D\u80FD\u627E\u5230\u300C\u5F00\u53D1\u8005ID(AppID)\u300D",placement:"top"},{default:t(()=>[l(b,{icon:"ep:question-filled",style:{"vertical-align":"middle"}})]),_:1}),v(" appId ")])]),default:t(()=>[l(c,{modelValue:a(u).appId,"onUpdate:modelValue":e[1]||(e[1]=p=>a(u).appId=p),placeholder:"\u8BF7\u8F93\u5165\u5C0F\u7A0B\u5E8F appId"},null,8,["modelValue"])]),_:1}),l(f,{label:"appSecret",prop:"appSecret"},{label:t(()=>[q("span",null,[l(S,{content:"\u5728\u5FAE\u4FE1\u516C\u4F17\u5E73\u53F0\uFF08mp.weixin.qq.com\uFF09\u7684\u83DC\u5355 [\u8BBE\u7F6E\u4E0E\u5F00\u53D1 - \u5C0F\u7A0B\u5E8F\u8BBE\u7F6E - \u57FA\u672C\u8BBE\u7F6E] \u4E2D\u80FD\u627E\u5230\u300C\u5F00\u53D1\u8005\u5BC6\u7801(AppSecret)\u300D",placement:"top"},{default:t(()=>[l(b,{icon:"ep:question-filled",style:{"vertical-align":"middle"}})]),_:1}),v(" appSecret ")])]),default:t(()=>[l(c,{modelValue:a(u).appSecret,"onUpdate:modelValue":e[2]||(e[2]=p=>a(u).appSecret=p),placeholder:"\u8BF7\u8F93\u5165\u5C0F\u7A0B\u5E8F appSecret"},null,8,["modelValue"])]),_:1}),l(f,{label:"\u5907\u6CE8",prop:"remark"},{default:t(()=>[l(c,{modelValue:a(u).remark,"onUpdate:modelValue":e[3]||(e[3]=p=>a(u).remark=p),placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8",type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[z,a(o)]])]),_:1},8,["modelValue","title"])}}});export{Z as _,W as d,X as g,Y as s};
