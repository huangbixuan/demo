import{aU as h,d as J,r as z,A as K,f as q,c,o as n,i as x,O as I,h as t,F as E,G as M,g as O,t as B,m as L,w as d,M as Q,l as U,N as R,a as e,P as V,J as D,n as X,p as Y,_ as Z}from"./index-QQaZ7rbf.js";import{_ as $}from"./index.vue_vue_type_script_setup_true_lang-CtP16Cnh.js";import aa from"./main-B8cmAKC9.js";import ea from"./main-CZZklA9W.js";import{_ as ta}from"./main.vue_vue_type_script_setup_true_lang-CtNEQeQ-.js";import{g as la}from"./index-BvM_QHiW.js";import{g as ia}from"./index-COkZqY69.js";import{d as j}from"./formatTime-esrXlwGe.js";var S=(o=>(o.Draft="2",o.Published="1",o))(S||{});const W=o=>h.get({url:"/mp/draft/page",params:o}),na=(o,u)=>h.post({url:"/mp/draft/create?accountId="+o,data:{articles:u}}),oa=(o,u,p)=>h.put({url:"/mp/draft/update?accountId="+o+"&mediaId="+u,method:"put",data:p}),ra=(o,u)=>h.delete({url:"/mp/draft/delete?accountId="+o+"&mediaId="+u}),pa={class:"pb-30px"},sa={key:0},ca={class:"waterfall"},da=["src"],ma={class:"item-name"},ua={key:1},ga={key:2},fa={key:3},ya={class:"waterfall"},wa={key:0},A=Z(J({name:"WxMaterialSelect",__name:"main",props:{type:{},accountId:{},newsType:{default:S.Published}},emits:["select-material"],setup(o,{emit:u}){const p=o,F=u,y=z(!1),g=z(0),f=z([]),i=K({pageNo:1,pageSize:10,accountId:p.accountId}),w=r=>{F("select-material",r)},P=async()=>{y.value=!0;try{p.type==="news"&&p.newsType===S.Published?await G():p.type==="news"&&p.newsType===S.Draft?await H():await v()}finally{y.value=!1}},v=async()=>{const r=await la({...i,type:p.type});f.value=r.list,g.value=r.total},G=async()=>{const r=await ia(i);r.list.forEach(l=>{l.content.newsItem.forEach(m=>{m.picUrl=m.thumbUrl})}),f.value=r.list,g.value=r.total},H=async()=>{const r=await W(i);r.list.forEach(l=>{l.content.newsItem.forEach(m=>{m.picUrl=m.thumbUrl})}),f.value=r.list,g.value=r.total};return q(async()=>{P()}),(r,l)=>{const m=R,_=Q,C=L,b=$,s=Y,T=X,k=V;return n(),c("div",pa,[p.type==="image"?(n(),c("div",sa,[I((n(),c("div",ca,[(n(!0),c(E,null,M(e(f),a=>(n(),c("div",{class:"waterfall-item",key:a.mediaId},[O("img",{class:"material-img",src:a.url},null,8,da),O("p",ma,B(a.name),1),t(C,{class:"ope-row"},{default:d(()=>[t(_,{type:"success",onClick:N=>w(a)},{default:d(()=>[U(" \u9009\u62E9 "),t(m,{icon:"ep:circle-check"})]),_:2},1032,["onClick"])]),_:2},1024)]))),128))])),[[k,e(y)]]),t(b,{total:e(g),page:e(i).pageNo,"onUpdate:page":l[0]||(l[0]=a=>e(i).pageNo=a),limit:e(i).pageSize,"onUpdate:limit":l[1]||(l[1]=a=>e(i).pageSize=a),onPagination:v},null,8,["total","page","limit"])])):p.type==="voice"?(n(),c("div",ua,[I((n(),D(T,{data:e(f)},{default:d(()=>[t(s,{label:"\u7F16\u53F7",align:"center",prop:"mediaId"}),t(s,{label:"\u6587\u4EF6\u540D",align:"center",prop:"name"}),t(s,{label:"\u8BED\u97F3",align:"center"},{default:d(a=>[t(e(ea),{url:a.row.url},null,8,["url"])]),_:1}),t(s,{label:"\u4E0A\u4F20\u65F6\u95F4",align:"center",prop:"createTime",width:"180",formatter:e(j)},null,8,["formatter"]),t(s,{label:"\u64CD\u4F5C",align:"center",fixed:"right"},{default:d(a=>[t(_,{type:"primary",link:"",onClick:N=>w(a.row)},{default:d(()=>[U("\u9009\u62E9 "),t(m,{icon:"ep:plus"})]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[k,e(y)]]),t(b,{total:e(g),page:e(i).pageNo,"onUpdate:page":l[2]||(l[2]=a=>e(i).pageNo=a),limit:e(i).pageSize,"onUpdate:limit":l[3]||(l[3]=a=>e(i).pageSize=a),onPagination:P},null,8,["total","page","limit"])])):p.type==="video"?(n(),c("div",ga,[I((n(),D(T,{data:e(f)},{default:d(()=>[t(s,{label:"\u7F16\u53F7",align:"center",prop:"mediaId"}),t(s,{label:"\u6587\u4EF6\u540D",align:"center",prop:"name"}),t(s,{label:"\u6807\u9898",align:"center",prop:"title"}),t(s,{label:"\u4ECB\u7ECD",align:"center",prop:"introduction"}),t(s,{label:"\u89C6\u9891",align:"center"},{default:d(a=>[t(e(ta),{url:a.row.url},null,8,["url"])]),_:1}),t(s,{label:"\u4E0A\u4F20\u65F6\u95F4",align:"center",prop:"createTime",width:"180",formatter:e(j)},null,8,["formatter"]),t(s,{label:"\u64CD\u4F5C",align:"center",fixed:"right","class-name":"small-padding fixed-width"},{default:d(a=>[t(_,{type:"primary",link:"",onClick:N=>w(a.row)},{default:d(()=>[U("\u9009\u62E9 "),t(m,{icon:"akar-icons:circle-plus"})]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[k,e(y)]]),t(b,{total:e(g),page:e(i).pageNo,"onUpdate:page":l[4]||(l[4]=a=>e(i).pageNo=a),limit:e(i).pageSize,"onUpdate:limit":l[5]||(l[5]=a=>e(i).pageSize=a),onPagination:v},null,8,["total","page","limit"])])):p.type==="news"?(n(),c("div",fa,[I((n(),c("div",ya,[(n(!0),c(E,null,M(e(f),a=>(n(),c("div",{class:"waterfall-item",key:a.mediaId},[a.content&&a.content.newsItem?(n(),c("div",wa,[t(e(aa),{articles:a.content.newsItem},null,8,["articles"]),t(C,{class:"ope-row"},{default:d(()=>[t(_,{type:"success",onClick:N=>w(a)},{default:d(()=>[U(" \u9009\u62E9 "),t(m,{icon:"ep:circle-check"})]),_:2},1032,["onClick"])]),_:2},1024)])):x("",!0)]))),128))])),[[k,e(y)]]),t(b,{total:e(g),page:e(i).pageNo,"onUpdate:page":l[6]||(l[6]=a=>e(i).pageNo=a),limit:e(i).pageSize,"onUpdate:limit":l[7]||(l[7]=a=>e(i).pageSize=a),onPagination:v},null,8,["total","page","limit"])])):x("",!0)])}}}),[["__scopeId","data-v-35dfb6f3"]]),va=Object.freeze(Object.defineProperty({__proto__:null,default:A},Symbol.toStringTag,{value:"Module"}));export{A as W,na as c,ra as d,W as g,va as m,oa as u};
