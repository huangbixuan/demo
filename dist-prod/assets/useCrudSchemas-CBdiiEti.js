import{aU as u,A as P,e as Y,cn as S,dL as T,ca as F,aY as D,U as E,H as A}from"./index-QQaZ7rbf.js";import{e as w,t as H,f as I}from"./tree-Bh1o0y0-.js";import{_ as M}from"./DictTag.vue_vue_type_script_lang-DFL6gWod.js";const U=async s=>await u.get({url:"/system/mail-account/page",params:s}),x=async s=>await u.get({url:"/system/mail-account/get?id="+s}),L=async s=>await u.post({url:"/system/mail-account/create",data:s}),N=async s=>await u.put({url:"/system/mail-account/update",data:s}),_=async s=>await u.delete({url:"/system/mail-account/delete?id="+s}),j=async()=>u.get({url:"/system/mail-account/simple-list"}),{t:v}=Y(),k=s=>{const o=P({searchSchema:[],tableColumns:[],formSchema:[],detailSchema:[]}),t=q(s,o);o.searchSchema=t||[];const l=z(s);o.tableColumns=l||[];const a=B(s,o);o.formSchema=a;const i=G(s);return o.detailSchema=i,{allSchemas:o}},q=(s,o)=>{const t=[],l=[];w(s,a=>{var i,m,d,p;if(a!=null&&a.isSearch||(i=a.search)!=null&&i.show){let y=((m=a==null?void 0:a.search)==null?void 0:m.component)||"Input";const f=[];let h={};if(a.dictType){const n={label:"\u5168\u90E8",value:""};f.push(n),S(a.dictType).forEach(c=>{f.push(c)}),h={options:f},(d=a.search)!=null&&d.component||(y="Select")}const e=T({component:y,...a.search,field:a.field,label:((p=a.search)==null?void 0:p.label)||a.label},{componentProps:h});e.api&&l.push(async()=>{var c;const n=await e.api();if(n){const r=F(o.searchSchema,b=>b.field===e.field);r!==-1&&(o.searchSchema[r].componentProps.options=g(n,(c=e.componentProps.optionsAlias)==null?void 0:c.labelField))}}),delete e.show,t.push(e)}});for(const a of l)a();return t},z=s=>{const o=H(s,{conversion:t=>{var l;if((t==null?void 0:t.isTable)!==!1&&((l=t==null?void 0:t.table)==null?void 0:l.show)!==!1)return!t.formatter&&t.dictType&&(t.formatter=(a,i,m)=>D(M,{type:t.dictType,value:m})),{...t.table,...t}}});return I(o,t=>(t.children===void 0&&delete t.children,!!t.field))},B=(s,o)=>{const t=[],l=[];w(s,a=>{var i,m,d,p,y;if((a==null?void 0:a.isForm)!==!1&&((i=a==null?void 0:a.form)==null?void 0:i.show)!==!1){let f=((m=a==null?void 0:a.form)==null?void 0:m.component)||"Input",h="";(d=a.form)!=null&&d.value?h=(p=a.form)==null?void 0:p.value:f==="InputNumber"&&(h=0);let e={};if(a.dictType){const c=[];a.dictClass&&a.dictClass==="number"?E(a.dictType).forEach(r=>{c.push(r)}):a.dictClass&&a.dictClass==="boolean"?A(a.dictType).forEach(r=>{c.push(r)}):S(a.dictType).forEach(r=>{c.push(r)}),e={options:c},a.form&&a.form.component||(f="Select")}const n=T({component:f,value:h,...a.form,field:a.field,label:((y=a.form)==null?void 0:y.label)||a.label},{componentProps:e});n.api&&l.push(async()=>{var r;const c=await n.api();if(c){const b=F(o.formSchema,C=>C.field===n.field);b!==-1&&(o.formSchema[b].componentProps.options=g(c,(r=n.componentProps.optionsAlias)==null?void 0:r.labelField))}}),delete n.show,t.push(n)}});for(const a of l)a();return t},G=s=>{const o=[];return w(s,t=>{var l,a,i,m,d;if((t==null?void 0:t.isDetail)!==!1&&((l=t.detail)==null?void 0:l.show)!==!1){const p={...t.detail,field:t.field,label:((a=t.detail)==null?void 0:a.label)||t.label};t.dictType&&(p.dictType=t.dictType),((i=t.detail)!=null&&i.dateFormat||t.formatter=="formatDate")&&(p.dateFormat=(m=t==null?void 0:t.detail)!=null&&m.dateFormat?(d=t==null?void 0:t.detail)==null?void 0:d.dateFormat:"YYYY-MM-DD HH:mm:ss"),delete p.show,o.push(p)}}),o},g=(s,o)=>s==null?void 0:s.map(t=>(o?t.labelField=v(t.labelField):t.label=v(t.label),t));export{N as a,U as b,L as c,_ as d,j as e,x as g,k as u};
