import{d as j,aE as H,e as Q,z as W,r as d,A as X,f as Y,R as Z,c as F,o as n,h as e,w as a,B as $,a as o,C as ee,S as ae,T as le,D as oe,F as g,G as te,U as se,I as A,J as c,K as re,O as m,M as ne,l as p,N as pe,i as ie,n as ue,p as de,P as ce,aL as me,aF as E}from"./index-QQaZ7rbf.js";import{_ as fe}from"./DictTag.vue_vue_type_script_lang-DFL6gWod.js";import{_ as ye}from"./ContentWrap.vue_vue_type_script_setup_true_lang-CerucUbi.js";import{h as _e}from"./tree-Bh1o0y0-.js";import{b as we,d as ve}from"./index-D4W76Tl3.js";import{_ as he}from"./MenuForm.vue_vue_type_script_setup_true_lang-B7yy35ic.js";import"./color-xEzN0Pg5.js";import"./index-D_95hI5s.js";import"./Dialog.vue_vue_type_style_index_0_lang-BZRnyNPI.js";import"./index-BctfKmg_.js";import"./el-tree-select-BtYVvkSk.js";import"./constants-D0aoFN3l.js";const ke=j({name:"SystemMenu",__name:"index",setup(be){const{wsCache:O}=H(),{t:N}=Q(),w=W(),v=d(!0),R=d([]),i=X({name:void 0,status:void 0}),U=d(),h=d(!1),k=d(!0),f=async()=>{v.value=!0;try{const y=await we(i);R.value=_e(y)}finally{v.value=!1}},b=()=>{f()},P=()=>{U.value.resetFields(),b()},V=d(),C=(y,t,x)=>{V.value.open(y,t,x)},D=()=>{k.value=!1,h.value=!h.value,me(()=>{k.value=!0})},K=async()=>{try{await w.confirm("\u5373\u5C06\u66F4\u65B0\u7F13\u5B58\u5237\u65B0\u6D4F\u89C8\u5668\uFF01","\u5237\u65B0\u83DC\u5355\u7F13\u5B58"),O.delete(E.USER),O.delete(E.ROLE_ROUTERS),location.reload()}catch{}};return Y(()=>{f()}),(y,t)=>{const x=ae,S=ee,L=re,q=oe,u=pe,s=ne,z=$,M=ye,r=de,B=fe,G=ue,_=Z("hasPermi"),I=ce;return n(),F(g,null,[e(M,null,{default:a(()=>[e(z,{ref_key:"queryFormRef",ref:U,inline:!0,model:o(i),class:"-mb-15px","label-width":"68px"},{default:a(()=>[e(S,{label:"\u83DC\u5355\u540D\u79F0",prop:"name"},{default:a(()=>[e(x,{modelValue:o(i).name,"onUpdate:modelValue":t[0]||(t[0]=l=>o(i).name=l),class:"!w-240px",clearable:"",placeholder:"\u8BF7\u8F93\u5165\u83DC\u5355\u540D\u79F0",onKeyup:le(b,["enter"])},null,8,["modelValue"])]),_:1}),e(S,{label:"\u72B6\u6001",prop:"status"},{default:a(()=>[e(q,{modelValue:o(i).status,"onUpdate:modelValue":t[1]||(t[1]=l=>o(i).status=l),class:"!w-240px",clearable:"",placeholder:"\u8BF7\u9009\u62E9\u83DC\u5355\u72B6\u6001"},{default:a(()=>[(n(!0),F(g,null,te(o(se)(o(A).COMMON_STATUS),l=>(n(),c(L,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(S,null,{default:a(()=>[e(s,{onClick:b},{default:a(()=>[e(u,{class:"mr-5px",icon:"ep:search"}),p(" \u641C\u7D22 ")]),_:1}),e(s,{onClick:P},{default:a(()=>[e(u,{class:"mr-5px",icon:"ep:refresh"}),p(" \u91CD\u7F6E ")]),_:1}),m((n(),c(s,{plain:"",type:"primary",onClick:t[2]||(t[2]=l=>C("create"))},{default:a(()=>[e(u,{class:"mr-5px",icon:"ep:plus"}),p(" \u65B0\u589E ")]),_:1})),[[_,["system:menu:create"]]]),e(s,{plain:"",type:"danger",onClick:D},{default:a(()=>[e(u,{class:"mr-5px",icon:"ep:sort"}),p(" \u5C55\u5F00/\u6298\u53E0 ")]),_:1}),e(s,{plain:"",onClick:K},{default:a(()=>[e(u,{class:"mr-5px",icon:"ep:refresh"}),p(" \u5237\u65B0\u83DC\u5355\u7F13\u5B58 ")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(M,null,{default:a(()=>[o(k)?m((n(),c(G,{key:0,data:o(R),"default-expand-all":o(h),"row-key":"id"},{default:a(()=>[e(r,{"show-overflow-tooltip":!0,label:"\u83DC\u5355\u540D\u79F0",prop:"name",width:"250"}),e(r,{align:"center",label:"\u56FE\u6807",prop:"icon",width:"100"},{default:a(l=>[e(u,{icon:l.row.icon},null,8,["icon"])]),_:1}),e(r,{label:"\u6392\u5E8F",prop:"sort",width:"60"}),e(r,{"show-overflow-tooltip":!0,label:"\u6743\u9650\u6807\u8BC6",prop:"permission"}),e(r,{"show-overflow-tooltip":!0,label:"\u7EC4\u4EF6\u8DEF\u5F84",prop:"component"}),e(r,{"show-overflow-tooltip":!0,label:"\u7EC4\u4EF6\u540D\u79F0",prop:"componentName"}),e(r,{label:"\u72B6\u6001",prop:"status",width:"80"},{default:a(l=>[e(B,{type:o(A).COMMON_STATUS,value:l.row.status},null,8,["type","value"])]),_:1}),e(r,{align:"center",label:"\u64CD\u4F5C"},{default:a(l=>[m((n(),c(s,{link:"",type:"primary",onClick:T=>C("update",l.row.id)},{default:a(()=>[p(" \u4FEE\u6539 ")]),_:2},1032,["onClick"])),[[_,["system:menu:update"]]]),m((n(),c(s,{link:"",type:"primary",onClick:T=>C("create",void 0,l.row.id)},{default:a(()=>[p(" \u65B0\u589E ")]),_:2},1032,["onClick"])),[[_,["system:menu:create"]]]),m((n(),c(s,{link:"",type:"danger",onClick:T=>(async J=>{try{await w.delConfirm(),await ve(J),w.success(N("common.delSuccess")),await f()}catch{}})(l.row.id)},{default:a(()=>[p(" \u5220\u9664 ")]),_:2},1032,["onClick"])),[[_,["system:menu:delete"]]])]),_:1})]),_:1},8,["data","default-expand-all"])),[[I,o(v)]]):ie("",!0)]),_:1}),e(he,{ref_key:"formRef",ref:V,onSuccess:f},null,512)],64)}}});export{ke as default};
