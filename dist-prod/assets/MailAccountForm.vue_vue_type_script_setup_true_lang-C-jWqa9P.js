import{d as x,e as F,z as S,r as u,J as b,o as g,w as r,O as A,h as i,a as t,P as C,M as R,l as y,x as j}from"./index-QQaZ7rbf.js";import{_ as z}from"./Dialog.vue_vue_type_style_index_0_lang-BZRnyNPI.js";import{_ as E}from"./Form-D4EiUnE1.js";import{g as J,c as O,a as P}from"./useCrudSchemas-CBdiiEti.js";import{a as U,r as q}from"./account.data-BIOy4ZWF.js";const B=x({name:"SystemMailAccountForm",__name:"MailAccountForm",emits:["success"],setup(D,{expose:_,emit:w}){const{t:c}=F(),n=S(),e=u(!1),f=u(""),s=u(!1),d=u(""),o=u();_({open:async(l,a)=>{if(e.value=!0,f.value=c("action."+l),d.value=l,a){s.value=!0;try{const m=await J(a);o.value.setValues(m)}finally{s.value=!1}}}});const h=w,M=async()=>{if(o&&await o.value.getElFormRef().validate()){s.value=!0;try{const l=o.value.formModel;d.value==="create"?(await O(l),n.success(c("common.createSuccess"))):(await P(l),n.success(c("common.updateSuccess"))),e.value=!1,h("success")}finally{s.value=!1}}};return(l,a)=>{const m=E,v=R,V=z,k=C;return g(),b(V,{modelValue:t(e),"onUpdate:modelValue":a[1]||(a[1]=p=>j(e)?e.value=p:null),title:t(f)},{footer:r(()=>[i(v,{disabled:t(s),type:"primary",onClick:M},{default:r(()=>[y("\u786E \u5B9A")]),_:1},8,["disabled"]),i(v,{onClick:a[0]||(a[0]=p=>e.value=!1)},{default:r(()=>[y("\u53D6 \u6D88")]),_:1})]),default:r(()=>[A(i(m,{ref_key:"formRef",ref:o,rules:t(q),schema:t(U).formSchema},null,8,["rules","schema"]),[[k,t(s)]])]),_:1},8,["modelValue","title"])}}});export{B as _};
