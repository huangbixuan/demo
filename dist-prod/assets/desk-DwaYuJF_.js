import{d as Ae,b as de,z as pe,r as s,aj as ue,a4 as ce,dg as fe,A as me,aO as ge,dr as Ue,f as ye,cg as ve,c as i,o,J as c,i as be,h as t,a as n,w as r,am as xe,E as ke,B as he,C as we,D as Qe,F as x,G as V,K as Oe,M as Ce,l as X,N as Se,c2 as Ve,x as Z,O as _e,g as a,a7 as Ee,v as Ne,y as Me,m as Ye,$ as Re,t as f,aV as Ie,q as Be,s as Fe,_ as Ke}from"./index-QQaZ7rbf.js";import{E as Pe}from"./el-empty-DtZU1JEc.js";import{_ as ze}from"./ContentWrap.vue_vue_type_script_setup_true_lang-CerucUbi.js";import{i as Te}from"./index-AwhozRCE.js";import{g as Je}from"./index-D-uYqOkD.js";import{f as We}from"./index-BiAqHivH.js";import Xe from"./OrderDetail2-CnyN-31Z.js";import Ze from"./OrderDetail3-By5B-sIx.js";import{f as j,a as je}from"./formatTime-esrXlwGe.js";import{S as De}from"./index-RcpyhGJW.js";import"./index-D_95hI5s.js";import"./el-descriptions-item-BBtnvGnE.js";import"./el-image-DHi7RmhO.js";import"./el-avatar-Bk2V5BPv.js";import"./help-B4Ek7LMd.js";import"./el-drawer-PTxXA9Gz.js";import"./el-dropdown-item-D1XCTc1V.js";import"./category-Cad002jB.js";import"./product-Ckxj6eZ5.js";import"./index-DCAaTwVR.js";import"./settlement-B7gMaVg4.js";import"./slipay-ClwQEZyt.js";import"./UserSelect.vue_vue_type_script_setup_true_name_User_lang-DgBr_L2D.js";import"./Dialog.vue_vue_type_style_index_0_lang-BZRnyNPI.js";import"./index.vue_vue_type_script_setup_true_lang-CtP16Cnh.js";import"./index-BctfKmg_.js";import"./index-aKI4neIb.js";import"./payResult-B3JXS29c.js";import"./scanPay-DpRycoM8.js";import"./hangList.vue_vue_type_script_setup_true_name_settlement_lang-CBj79_xI.js";import"./settlement2-D3ppEXd1.js";import"./ChangeDesk-DK1Evdqx.js";const u=g=>(Be("data-v-93e7fa89"),g=g(),Fe(),g),He=u(()=>a("div",null,"1\u3001\u5B9E\u65F6\u663E\u793A\u5802\u98DF\u70B9\u9910\u4E0E\u9884\u7EA6\u8BA2\u5355\uFF0C\u7531\u4E8E\u4E00\u4E2A\u684C\u53F0\u53EF\u4EE5\u6709\u591A\u4E2A\u9884\u7EA6\u8BA2\u5355\uFF0C\u6240\u4EE5\u64CD\u4F5C\u5982\u4E0B.",-1)),qe=u(()=>a("div",null,"2\u3001\u5982\u679C\u684C\u53F0\u6709\u9884\u7EA6\u8BA2\u5355\u4E14\u662F\u5F53\u5929\u7684\uFF0C\u53BB\u534F\u52A9\u70B9\u9910\u5FC5\u987B\u5148\u9009\u62E9\u9884\u7EA6\u8BA2\u5355\u540E\u518D\u53BB\u70B9\u9910.",-1)),Le=u(()=>a("div",null,"3\u3001\u5982\u679C\u684C\u53F0\u6CA1\u6709\u5F53\u5929\u8BA2\u5355\uFF0C\u53EF\u4EE5\u76F4\u63A5\u53BB\u534F\u52A9\u70B9\u9910\u3002\u6240\u6709\u4EE5\u4E0A\u70B9\u9910\u5B8C\u6210\u7ED3\u8D26\u540E\u5982\u679C\u684C\u53F0\u8FD8\u6709\u9884\u7EA6\u5355\uFF0C\u5F53\u524D\u684C\u53F0\u4F1A\u6062\u590D\u9884\u7EA6\u72B6\u6001\u3002",-1)),Ge={id:"buttonAudio",src:"/voice_new_order.mp3",controls:""},$e=u(()=>a("div",{style:{display:"flex","align-content":"center","align-items":"center","margin-right":"15px"}},[a("div",{style:{"background-color":"#945bf1",height:"20px",width:"20px","margin-right":"5px"}}),a("div",null,"\u672A\u5F00\u53F0")],-1)),et=u(()=>a("div",{style:{display:"flex","align-content":"center","align-items":"center","margin-right":"15px"}},[a("div",{style:{"background-color":"#409eff",height:"20px",width:"20px","margin-right":"5px"}}),a("div",null,"\u5DF2\u5F00\u53F0")],-1)),tt=u(()=>a("div",{style:{display:"flex","align-content":"center","align-items":"center","margin-right":"15px"}},[a("div",{style:{"background-color":"#5cb85c",height:"20px",width:"20px","margin-right":"5px"}}),a("div",null,"\u5C31\u9910\u4E2D")],-1)),at=u(()=>a("div",{style:{display:"flex","align-content":"center","align-items":"center"}},[a("div",{style:{"background-color":"#E6A23C",height:"20px",width:"20px","margin-right":"5px"}}),a("div",null,"\u5DF2\u9884\u7EA6")],-1)),lt=["onClick"],ot={key:0,style:{"background-color":"#5cb85c",padding:"5px 0px","text-align":"center",color:"#fff","font-weight":"bolder"}},rt={key:1,style:{"background-color":"#409eff",padding:"5px 0px","text-align":"center",color:"#fff","font-weight":"bolder"}},st={key:2,style:{"background-color":"#E6A23C",padding:"5px 0px","text-align":"center",color:"#fff","font-weight":"bolder"}},nt={key:3,style:{"background-color":"#945bf1",padding:"5px 0px","text-align":"center",color:"#fff","font-weight":"bolder"}},it={style:{"background-color":"#f1f5ff",padding:"30px 0px 10px 0px","text-align":"center"}},At={style:{"font-size":"15px",color:"#333","font-weight":"bolder","margin-bottom":"20px"}},dt={key:0},pt={key:1},ut={key:2},ct={key:3},ft={key:0,style:{"font-size":"12px",color:"#666","margin-bottom":"30px",padding:"0 5px",height:"25px","text-align":"center"}},mt={key:1,style:{"font-size":"12px",color:"#666","margin-bottom":"30px",padding:"0 5px",height:"25px","text-align":"center"}},gt={style:{display:"flex","justify-content":"space-between"}},Ut=u(()=>a("div",null,null,-1)),yt=["onClick"],vt=Ae({__name:"desk",setup(g){const _=de(),k=pe(),D=s("https://meeting.ai-centre.org/infra/ws".replace("http","ws")+"?token="+ue());ce(()=>H.value==="OPEN");const{status:H,data:U,close:q}=fe(D.value,{autoReconnect:!1,heartbeat:!0}),E=s(!0);s(0),s([]);const d=me({pageNo:1,pageSize:50,orderStatus:1,type:"work",shopId:void 0,cateId:void 0}),N=s(),h=s(0),y=s(!0),M=s([]),w=s([]),Y=s([]),m=s({});s("border:solid 1px #ffa500"),s(1);const Q=s({}),R=s(!0);ge(()=>{if(U.value)try{if(U.value==="pong")return;const l=JSON.parse(U.value),A=l.type,O=JSON.parse(l.content);if(A==="sync-order-msg")return void(_.getUser.shopId!=0&&_.getUser.shopId!=O.shopId||G())}catch{k.error("\u5904\u7406\u6D88\u606F\u53D1\u751F\u5F02\u5E38\uFF1A"+U.value)}});const L=()=>{R.value=!1},G=()=>{y.value&&(Ue({title:"\u65B0\u8BA2\u5355\u901A\u77E5",message:"\u4F60\u6709\u4E2A\u65B0\u7684\u8BA2\u5355\u54E6\uFF0C\u8BF7\u6CE8\u610F\u67E5\u770B\uFF01",type:"success",duration:8e3}),document.getElementById("buttonAudio").play().catch(l=>{})),p()},$=(l,A)=>{l.paneName>0?(d.cateId=l.paneName,p()):(d.cateId=null,p())},p=async()=>{E.value=!0;try{const l=await We(d);w.value=l.list,m.value={}}finally{E.value=!1}},ee=l=>{Q.value=l},I=()=>{d.pageNo=1,p()},te=()=>{N.value.resetFields(),I()},B=s(),F=s();s();const K=l=>{m.value=l,B.value.open(l),F.value.open(l)};return ye(()=>{(async()=>{try{const l=await Je();M.value=l}finally{}})(),p(),(async()=>{try{const l=await De.getShopDeskCategoryPage(d);Y.value=l.list}finally{}})()}),ve(()=>{q()}),(l,A)=>{const O=xe,v=ze,ae=Oe,le=Qe,b=we,P=Se,z=Ce,oe=Ve,re=he,T=Me,se=Ne,C=ke,J=Ye,ne=Pe;return o(),i(x,null,[n(R)?(o(),c(v,{key:0},{default:r(()=>[t(O,{type:"warning",title:"\u6E29\u99A8\u63D0\u793A",onClose:L},{default:r(()=>[He,qe,Le]),_:1})]),_:1})):be("",!0),t(J,null,{default:r(()=>[t(C,{span:16},{default:r(()=>[t(v,null,{default:r(()=>[t(re,{class:"-mb-15px",model:n(d),ref_key:"queryFormRef",ref:N,inline:!0,"label-width":"68px"},{default:r(()=>[t(b,{label:"\u9009\u62E9\u95E8\u5E97",prop:"orderId"},{default:r(()=>[t(le,{modelValue:n(d).shopId,"onUpdate:modelValue":A[0]||(A[0]=e=>n(d).shopId=e),class:"!w-240px",placeholder:"\u5F53\u524D\u6240\u6709\u95E8\u5E97"},{default:r(()=>[(o(!0),i(x,null,V(n(M),e=>(o(),c(ae,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(b,null,{default:r(()=>[t(z,{onClick:I},{default:r(()=>[t(P,{icon:"ep:search",class:"mr-5px"}),X(" \u641C\u7D22")]),_:1}),t(z,{onClick:te},{default:r(()=>[t(P,{icon:"ep:refresh",class:"mr-5px"}),X(" \u5237\u65B0")]),_:1})]),_:1}),t(b,{label:""},{default:r(()=>[t(oe,{modelValue:n(y),"onUpdate:modelValue":A[1]||(A[1]=e=>Z(y)?y.value=e:null),"active-text":"\u8BA2\u5355\u63D0\u9192\u5F00\u542F\u4E2D","inactive-text":"\u8BA2\u5355\u63D0\u9192\u5173\u95ED\u4E2D"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1}),t(v,null,{default:r(()=>[_e(a("audio",Ge,null,512),[[Ee,!1]]),t(se,{class:"tab-box",modelValue:n(h),"onUpdate:modelValue":A[2]||(A[2]=e=>Z(h)?h.value=e:null),type:"card",onTabClick:$},{default:r(()=>[t(T,{label:"\u5168\u90E8",name:0}),(o(!0),i(x,null,V(n(Y),(e,S)=>(o(),c(T,{label:e.name,name:e.id,key:S},null,8,["label","name"]))),128))]),_:1},8,["modelValue"]),t(b,{label:"\u72B6\u6001\uFF1A"},{default:r(()=>[$e,et,tt,at]),_:1}),n(w).length>0?(o(),c(J,{key:0,gutter:24},{default:r(()=>[(o(!0),i(x,null,V(n(w),(e,S)=>(o(),c(C,{span:4,key:S},{default:r(()=>[a("div",{style:{"margin-bottom":"20px"},class:Re({selected:e.id==n(m).id}),onClick:ie=>K(e)},[e.lastOrderStatus==1&&e.lastOrderNo?(o(),i("div",ot,f(e.number),1)):e.lastOrderStatus!=1||e.lastOrderNo?e.bookStatus==1&&e.lastOrderStatus==0?(o(),i("div",st,f(e.number),1)):(o(),i("div",nt,f(e.number),1)):(o(),i("div",rt,f(e.number),1)),a("div",it,[a("div",At,[e.lastOrderStatus==1&&e.lastOrderNo?(o(),i("span",dt,"\u5C31\u9910\u4E2D")):e.lastOrderStatus!=1||e.lastOrderNo?e.bookStatus==1&&e.lastOrderStatus==0?(o(),i("span",ut,"\u5DF2\u9884\u7EA6")):(o(),i("span",ct,"\u672A\u5F00\u53F0")):(o(),i("span",pt,"\u5DF2\u5F00\u53F0"))]),e.bookStatus==1&&e.lastOrderStatus==0?(o(),i("div",ft,"\u9884\u7EA6\u65F6\u95F4:"+f(n(Q).deskId==e.id?n(j)(n(Q).dueTime):n(j)(e.bookTime)),1)):(o(),i("div",mt,f(e.lastOrderTime?n(je)(e.lastOrderTime)+"\u4E0B\u8FC7\u5355":"\u4ECE\u672A\u4E0B\u5355"),1)),a("div",gt,[Ut,a("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAMAAAC5zwKfAAAAAXNSR0IArs4c6QAAAV9QTFRFAAAA/4AA/78A/5kA/7YA/6oA/5kA/6IA/6oA/50A/6QA/6oA/58A/6UA/6oA/6EA/6YA/6oA/6IA/6YA/6oA/6MA/6cA/6EA/6QA/6cA/6UA/6cA/6UA/6gA/6MA/6MA/6YA/6gA/6QA/6YA/6QA/6YA/6QA/6UA/6cA/6UA/6YA/6QA/6YA/6QA/6QA/6UA/6UA/6YA/6QA/6UA/6UA/6QA/6UA/6UA/6QA/6UA/6UA/6YA/6UA/6QA/6UA/6UA/6UA/6UA/6UA/6UA/6UA/6YA/6UA/6QA/6UA/6UA/6UA/6UA/6UA/6UA/6UA/6UA/6UA/6UA/6UA/6UA/6YA/6UA/6UA/6QA/6UA/6UA/6UA/6UA/6UA/6UA/6UA/6UA/6UA/6UA/6UA/6UA/6UA/6YA/6UA/6QA/6UA/6UA/6UA/6UA/6UA/6UA/6UA/6UA/6UA/6UA/6UA/6UA/6UAqBaEgAAAAHR0Uk5TAAIEBQcJCgsMDQ4PEBESExQVFhcYGRobHB0fICIjJCcoKSo5O0hJSktSWVpkZWhpb3V2eoCBgoOHi42PkZKUlpeZm6WssbO0uLq8wMHKy8zOz9HS09TV1tfY2drb3N3e3+Dh4uPk5ufo6evs8PHy9Pf4/f5uTOsSAAACpElEQVRYw63Z6VfTQBAAcBQVEAjQUsAWvNPU+1asByoiCnKIBdpCpKXIoRWv+f+fbfdwkybb2WT2U3a67/cme0z2vXZ1kbYbQOs5ANRendiDY0LPBlqwmR8lyDw60AZaMAe0YBZoQQdoQcUjAW2gBdX8KECvFx/MAi2YA1rQn19c0AFaMMCLBdpACwblFwcM9qKDIV5kMMyLCtpAC4bmFxHUeJFAG2jBHNCCWaAFHaAFO3mmoA20YMf8DEGEZwRmgRbMAS2Iys8AdIAWxHpYkO2/+dv5XwFGffrOB0OQ5feg8XS51uZtZRrxJ0Yg8+Zbz0nX5xWsVnzBAOTzd4v1hsseb7WHhe/iQbEej3g/saV4K708mkeDsh58n+SRgU3pLZ/msUt1LKjsl91hHrOEuHSKRyYOsYvi2X9fpFhk73uG91N72G3jq3/Ffh7vK6j5JXawG7utHnzu478MbsCKmD+rjD0pAfVgfYD/NvpGPCVc7NELPL9rPb5RQyXsWQ6pB4WzXq+MLQ6h36NCvzLKs8u1oKZerU3JURdK2PKlrX+zctgcth5q6/2ntBw3uYkDtd+jdXVVRlwMqM1vw7fKbmdQO3/lQd/oVLUTqPXcET4qMzvKn8Z39aCNym+8AkVRe5IVZUTNLL+EOMlNozQkquH/6gXvjOZP5JT52urvjLXP40MDb9sSu++AR6pCHJNf1yt47zDFR53bl7GKWJn0Nz7oJP5+Kl5m6kgJ7k3w6FPWf25wf7nJ5+/AE60mPd/ltMF96H2Q1/gWsnn82Oq8MrqPP27ebY7awrXz8o1/9JrdTxfuzQTdvn6+uL/Inq4Z30/17WWE+6SuLRJ7cycM1gPR8rT57V8n9f6+ttT/F+K27WcX1QP3+89xjFZ7O32121Ng/gEPNM/usukMzQAAAABJRU5ErkJggg==",onClick:Ie(ie=>(async W=>{if(W.lastOrderStatus!=0)try{await k.confirm("\u786E\u5B9A\u9000\u53F0\u6E05\u7A7A\u5F53\u524D\u684C\u4F4D"),await Te(W.id),p(),K({})}catch{}else k.error("\u5DF2\u7ECF\u662F\u7A7A\u684C\u5566\uFF01")})(e),["stop"])},null,8,yt)])])],10,lt)]),_:2},1024))),128))]),_:1})):(o(),c(ne,{key:1,description:"\u6682\u65E0\u684C\u53F0\u6570\u636E"}))]),_:1})]),_:1}),t(C,{span:8},{default:r(()=>[t(v,null,{default:r(()=>[t(Xe,{ref_key:"formRef4",ref:F,"desk-info":n(m),onSuccess:p},null,8,["desk-info"]),t(Ze,{ref_key:"formRef5",ref:B,"desk-info":n(m),onSuccess:p,onDueTime:ee},null,8,["desk-info"])]),_:1})]),_:1})]),_:1})],64)}}}),bt=Ke(vt,[["__scopeId","data-v-93e7fa89"]]);export{bt as default};
