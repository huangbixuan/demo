import{aU as p,d as z,e as j,z as B,r as m,A as J,J as w,o as U,w as s,O as M,B as O,a,h as d,C as P,S as R,aW as W,aX as X,l as f,P as E,M as G,x as H}from"./index-QQaZ7rbf.js";import{_ as K}from"./Dialog.vue_vue_type_style_index_0_lang-BZRnyNPI.js";const L=async v=>await p.get({url:"/member/user-address/page",params:v}),Q=async v=>await p.delete({url:"/member/user-address/delete?id="+v}),T=z({__name:"UserAddressForm",emits:["success"],setup(v,{expose:D,emit:N}){const{t:g}=j(),b=B(),r=m(!1),y=m(""),u=m(!1),V=m(""),l=m({id:void 0,uid:void 0,realName:void 0,phone:void 0,province:void 0,city:void 0,cityId:void 0,district:void 0,detail:void 0,postCode:void 0,longitude:void 0,latitude:void 0,isDefault:void 0,address:""}),q=J({realName:[{required:!0,message:"\u6536\u8D27\u4EBA\u59D3\u540D\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],phone:[{required:!0,message:"\u6536\u8D27\u4EBA\u7535\u8BDD\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],address:[{required:!0,message:"\u6536\u8D27\u4EBA\u5730\u5740\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],detail:[{required:!0,message:"\u6536\u8D27\u4EBA\u8BE6\u7EC6\u5730\u5740\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],isDefault:[{required:!0,message:"\u662F\u5426\u9ED8\u8BA4\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),c=m();D({open:async(o,e)=>{if(r.value=!0,y.value=g("action."+o),V.value=o,k(),e){u.value=!0;try{l.value=await(async i=>await p.get({url:"/member/user-address/get?id="+i}))(e)}finally{u.value=!1}}}});const x=N,C=async()=>{if(c&&await c.value.validate()){u.value=!0;try{const o=l.value;V.value==="create"?(await(async e=>await p.post({url:"/member/user-address/create",data:e}))(o),b.success(g("common.createSuccess"))):(await(async e=>await p.put({url:"/member/user-address/update",data:e}))(o),b.success(g("common.updateSuccess"))),r.value=!1,x("success")}finally{u.value=!1}}},k=()=>{var o;l.value={id:void 0,uid:void 0,realName:void 0,phone:void 0,province:void 0,city:void 0,cityId:void 0,district:void 0,detail:void 0,postCode:void 0,longitude:void 0,latitude:void 0,isDefault:void 0,address:""},(o=c.value)==null||o.resetFields()};return(o,e)=>{const i=R,n=P,_=X,S=W,A=O,h=G,F=K,I=E;return U(),w(F,{title:a(y),modelValue:a(r),"onUpdate:modelValue":e[6]||(e[6]=t=>H(r)?r.value=t:null)},{footer:s(()=>[d(h,{onClick:C,type:"primary",disabled:a(u)},{default:s(()=>[f("\u786E \u5B9A")]),_:1},8,["disabled"]),d(h,{onClick:e[5]||(e[5]=t=>r.value=!1)},{default:s(()=>[f("\u53D6 \u6D88")]),_:1})]),default:s(()=>[M((U(),w(A,{ref_key:"formRef",ref:c,model:a(l),rules:a(q),"label-width":"150px"},{default:s(()=>[d(n,{label:"\u6536\u8D27\u4EBA\u59D3\u540D",prop:"realName"},{default:s(()=>[d(i,{modelValue:a(l).realName,"onUpdate:modelValue":e[0]||(e[0]=t=>a(l).realName=t),placeholder:"\u8BF7\u8F93\u5165\u6536\u8D27\u4EBA\u59D3\u540D"},null,8,["modelValue"])]),_:1}),d(n,{label:"\u6536\u8D27\u4EBA\u7535\u8BDD",prop:"phone"},{default:s(()=>[d(i,{modelValue:a(l).phone,"onUpdate:modelValue":e[1]||(e[1]=t=>a(l).phone=t),placeholder:"\u8BF7\u8F93\u5165\u6536\u8D27\u4EBA\u7535\u8BDD"},null,8,["modelValue"])]),_:1}),d(n,{label:"\u6536\u8D27\u4EBA\u5730\u5740",prop:"address"},{default:s(()=>[d(i,{modelValue:a(l).address,"onUpdate:modelValue":e[2]||(e[2]=t=>a(l).address=t),placeholder:"\u8BF7\u8F93\u5165\u6536\u8D27\u4EBA\u6240\u5728\u7701"},null,8,["modelValue"])]),_:1}),d(n,{label:"\u6536\u8D27\u4EBA\u8BE6\u7EC6\u5730\u5740",prop:"detail"},{default:s(()=>[d(i,{modelValue:a(l).detail,"onUpdate:modelValue":e[3]||(e[3]=t=>a(l).detail=t),placeholder:"\u8BF7\u8F93\u5165\u6536\u8D27\u4EBA\u8BE6\u7EC6\u5730\u5740"},null,8,["modelValue"])]),_:1}),d(n,{label:"\u662F\u5426\u9ED8\u8BA4",prop:"isDefault"},{default:s(()=>[d(S,{modelValue:a(l).isDefault,"onUpdate:modelValue":e[4]||(e[4]=t=>a(l).isDefault=t)},{default:s(()=>[d(_,{label:1},{default:s(()=>[f("\u662F")]),_:1}),d(_,{label:0},{default:s(()=>[f("\u5426")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[I,a(u)]])]),_:1},8,["title","modelValue"])}}});export{T as _,Q as d,L as g};
