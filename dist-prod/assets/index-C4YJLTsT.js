import{d as Y,z as Z,e as $,r as m,A as ee,f as ae,R as le,c as E,o as c,h as e,w as a,E as te,B as oe,a as o,C as se,S as re,T as I,O as h,M as ie,l as d,N as pe,J as u,v as ne,x as ce,F as K,G as me,y as de,n as ue,p as fe,g as we,k as ge,P as he,m as _e}from"./index-QQaZ7rbf.js";import{_ as ye}from"./index.vue_vue_type_script_setup_true_lang-CtP16Cnh.js";import{E as ke}from"./el-image-DHi7RmhO.js";import{_ as be}from"./ContentWrap.vue_vue_type_script_setup_true_lang-CerucUbi.js";import{d as Ne}from"./formatTime-esrXlwGe.js";import{g as xe,s as Ce,d as Se}from"./product-Ckxj6eZ5.js";import ve from"./StoreProductForm-Nd9l3Ysd.js";import{_ as Ve}from"./CateTree.vue_vue_type_script_name_StoreProductCateTree_setup_true_lang-uh0HMrA9.js";import"./index-BctfKmg_.js";import"./index-D_95hI5s.js";import"./Dialog.vue_vue_type_style_index_0_lang-BZRnyNPI.js";import"./Materials-DPzAVFcF.js";import"./material-mdbw-jQF.js";import"./category-Cad002jB.js";import"./index-D-uYqOkD.js";import"./tree-Bh1o0y0-.js";const ze=["onClick"],Ue=Y({__name:"index",setup(Pe){const w=Z(),{t:M}=$(),_=m(!0),S=m(0),v=m([]),l=ee({pageNo:1,pageSize:10,storeName:null,isPostage:null,isShow:1,stock:1,cateId:null,shopName:null}),V=m();m(!1);const y=m("1"),q=m([{title:"\u51FA\u552E\u4E2D\u4EA7\u54C1",name:"1"},{title:"\u5F85\u4E0A\u67B6\u4EA7\u54C1",name:"2"},{title:"\u5DF2\u552E\u7F44\u4EA7\u54C1",name:"3"}]),i=async()=>{_.value=!0;try{const r=await xe(l);v.value=r.list,S.value=r.total}finally{_.value=!1}},A=async r=>{l.cateId=r.id,await i()},B=(r,t)=>{r.paneName=="1"&&(l.isShow=1,l.stock=1,i()),r.paneName=="2"&&(l.isShow=0,l.stock=1,i()),r.paneName=="3"&&(l.isShow=1,l.stock=0,i())},g=()=>{l.pageNo=1,i()},D=()=>{V.value.resetFields(),g()},z=m(),U=(r,t)=>{z.value.open(r,t)};return ae(()=>{i()}),(r,t)=>{const k=be,P=te,F=re,b=se,N=pe,f=ie,G=oe,p=fe,J=ke,R=ge,O=ue,j=de,H=ne,L=ye,Q=_e,x=le("hasPermi"),W=he;return c(),E(K,null,[e(Q,{gutter:20},{default:a(()=>[e(P,{span:4,xs:24},{default:a(()=>[e(k,{class:"h-1/1"},{default:a(()=>[e(Ve,{onNodeClick:A})]),_:1})]),_:1}),e(P,{span:20,xs:24},{default:a(()=>[e(k,null,{default:a(()=>[e(G,{class:"-mb-15px",model:o(l),ref_key:"queryFormRef",ref:V,inline:!0,"label-width":"68px"},{default:a(()=>[e(b,{label:"\u5546\u54C1\u540D\u79F0",prop:"storeName"},{default:a(()=>[e(F,{modelValue:o(l).storeName,"onUpdate:modelValue":t[0]||(t[0]=s=>o(l).storeName=s),placeholder:"\u8BF7\u8F93\u5165\u5546\u54C1\u540D\u79F0",clearable:"",onKeyup:I(g,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),e(b,{label:"\u5E97\u94FA\u540D\u79F0",prop:"shopName"},{default:a(()=>[e(F,{modelValue:o(l).shopName,"onUpdate:modelValue":t[1]||(t[1]=s=>o(l).shopName=s),placeholder:"\u8BF7\u8F93\u5165\u5206\u7C7B\u540D\u79F0",clearable:"",onKeyup:I(g,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),e(b,null,{default:a(()=>[e(f,{onClick:g},{default:a(()=>[e(N,{icon:"ep:search",class:"mr-5px"}),d(" \u641C\u7D22")]),_:1}),e(f,{onClick:D},{default:a(()=>[e(N,{icon:"ep:refresh",class:"mr-5px"}),d(" \u91CD\u7F6E")]),_:1}),h((c(),u(f,{type:"primary",plain:"",onClick:t[2]||(t[2]=s=>U("create"))},{default:a(()=>[e(N,{icon:"ep:plus",class:"mr-5px"}),d(" \u65B0\u589E ")]),_:1})),[[x,["shop:store-product:create"]]])]),_:1})]),_:1},8,["model"])]),_:1}),e(k,null,{default:a(()=>[e(H,{modelValue:o(y),"onUpdate:modelValue":t[3]||(t[3]=s=>ce(y)?y.value=s:null),type:"card",onTabClick:B},{default:a(()=>[(c(!0),E(K,null,me(o(q),s=>(c(),u(j,{label:s.title,key:s.name,name:s.name},{default:a(()=>[h((c(),u(O,{data:o(v)},{default:a(()=>[e(p,{label:"id",align:"center",width:"50",prop:"id"}),e(p,{label:"\u5546\u54C1\u56FE\u7247",align:"center",prop:"image"},{default:a(n=>[e(J,{style:{width:"100px",height:"100px"},src:n.row.image,"zoom-rate":1.2,"preview-src-list":[n.row.image],"initial-index":0,"z-index":900,"hide-on-click-modal":!0,"preview-teleported":!0,fit:"cover"},null,8,["src","preview-src-list"])]),_:1}),e(p,{label:"\u6240\u5C5E\u95E8\u5E97",align:"center",prop:"shopName"}),e(p,{label:"\u5546\u54C1\u540D\u79F0",align:"center",prop:"storeName"}),e(p,{label:"\u5546\u54C1\u4EF7\u683C",align:"center",prop:"price"}),e(p,{label:"\u9500\u91CF",align:"center",width:"80",prop:"sales"}),e(p,{label:"\u5E93\u5B58",align:"center",width:"80",prop:"stock"}),e(p,{label:"\u72B6\u6001",align:"center",prop:"isShow"},{default:a(n=>[we("div",{onClick:T=>(async(C,X)=>{try{await w.confirm("\u786E\u5B9A\u8981\u4E0A\u4E0B\u67B6\uFF1F"),await Ce(C,X),w.success("\u64CD\u4F5C\u6210\u529F"),await i()}catch{}})(n.row.id,n.row.isShow)},[n.row.isShow===1?(c(),u(R,{key:0,style:{cursor:"pointer"},type:"success"},{default:a(()=>[d("\u5DF2\u4E0A\u67B6")]),_:1})):(c(),u(R,{key:1,style:{cursor:"pointer"},type:"danger"},{default:a(()=>[d("\u5DF2\u4E0B\u67B6")]),_:1}))],8,ze)]),_:1}),e(p,{label:"\u6DFB\u52A0\u65F6\u95F4",align:"center",prop:"createTime",formatter:o(Ne)},null,8,["formatter"]),e(p,{label:"\u64CD\u4F5C",align:"center"},{default:a(n=>[h((c(),u(f,{link:"",type:"primary",onClick:T=>U("update",n.row.id)},{default:a(()=>[d(" \u7F16\u8F91 ")]),_:2},1032,["onClick"])),[[x,["shop:store-product:update"]]]),h((c(),u(f,{link:"",type:"danger",onClick:T=>(async C=>{try{await w.delConfirm(),await Se(C),w.success(M("common.delSuccess")),await i()}catch{}})(n.row.id)},{default:a(()=>[d(" \u5220\u9664 ")]),_:2},1032,["onClick"])),[[x,["shop:store-product:delete"]]])]),_:1})]),_:1},8,["data"])),[[W,o(_)]])]),_:2},1032,["label","name"]))),128))]),_:1},8,["modelValue"]),e(L,{total:o(S),page:o(l).pageNo,"onUpdate:page":t[4]||(t[4]=s=>o(l).pageNo=s),limit:o(l).pageSize,"onUpdate:limit":t[5]||(t[5]=s=>o(l).pageSize=s),onPagination:i},null,8,["total","page","limit"])]),_:1})]),_:1})]),_:1}),e(ve,{ref_key:"formRef",ref:z,onSuccess:i},null,512)],64)}}});export{Ue as default};
