import{d as pe,z as ie,e as me,r as p,A as fe,R as ce,J as k,o,w as l,h as e,v as ye,x as v,a as d,y as _e,C as ke,aW as we,c8 as be,l as t,B as ge,S as he,T as z,M as Ve,N as ve,O as B,n as xe,p as Se,g as w,i as f,k as Ce,t as _,c as i,F as Te,G as Ne,P as Ie,_ as Ue}from"./index-QQaZ7rbf.js";import{E as Pe}from"./el-drawer-PTxXA9Gz.js";import{_ as Oe}from"./index.vue_vue_type_script_setup_true_lang-CtP16Cnh.js";import{E as Re,a as ze,b as Be}from"./el-dropdown-item-D1XCTc1V.js";import{_ as De}from"./ContentWrap.vue_vue_type_script_setup_true_lang-CerucUbi.js";import{d as Q}from"./formatTime-esrXlwGe.js";import{a as Fe,p as Ee}from"./index-AwhozRCE.js";import{_ as Ke}from"./StoreOrderForm.vue_vue_type_script_setup_true_lang-CpsUpqAP.js";import Ae from"./OrderSend-DBRvLAbS.js";import je from"./OrderSendInfo-qp9YJrZl.js";import qe from"./OrderDetail-yVQkAKN5.js";import"./index-BctfKmg_.js";import"./index-D_95hI5s.js";import"./Dialog.vue_vue_type_style_index_0_lang-BZRnyNPI.js";import"./el-timeline-item-CFJSbWRQ.js";import"./el-image-DHi7RmhO.js";import"./el-avatar-Bk2V5BPv.js";import"./el-descriptions-item-BBtnvGnE.js";const Ge={key:0},Je={key:1},Le={class:"tabBox_img"},Me=["src"],We={class:"tabBox_tit"},He={class:"tabBox_pice"},Qe={key:0},Xe={key:1},Ye={key:0},Ze={key:0},$e={key:1},ea={key:2},aa={key:1},la={key:0},ra={key:1},ta={class:"flex justify-center items-center"},oa=Ue(pe({__name:"Order",setup(da,{expose:X}){const D=ie(),{t:F}=me(),x=p(!0),E=p(0),K=p([]),n=fe({pageNo:1,pageSize:10,orderId:"",realName:"",userPhone:"",createTime:[],orderStatus:"",payStatus:"",orderType:"",deskId:0}),A=p(),S=p(""),C=p(""),T=p(""),j=p(""),V=p(!1);X({open:async(s,r)=>{V.value=!0,j.value=F("action."+s),n.deskId=r,c()}});const Y=(s,r)=>{n.orderType=s.paneName,c()},Z=s=>{n.orderStatus=s,c()},$=s=>{n.payStatus=s,c()},c=async()=>{x.value=!0;try{const s=await Fe(n);K.value=s.list,E.value=s.total}finally{x.value=!1}},g=()=>{n.pageNo=1,c()},ee=()=>{A.value.resetFields(),g()},q=p(),G=p(),J=p(),L=p(),N=(s,r)=>{s=="updateOrder"?q.value.open(s,r):s=="orderSend"?G.value.open(s,r):s=="sendInfo"?J.value.open(s,r):s=="orderDetail"&&L.value.open(s,r)};return(s,r)=>{const ae=_e,le=ye,m=be,M=we,b=ke,I=De,U=he,P=ve,h=Ve,re=ge,u=Se,O=Ce,W=Be,te=ze,oe=Re,de=xe,se=Oe,ne=Pe,H=ce("hasPermi"),ue=Ie;return o(),k(ne,{modelValue:d(V),"onUpdate:modelValue":r[8]||(r[8]=a=>v(V)?V.value=a:null),title:d(j),size:"60%"},{default:l(()=>[e(I,null,{default:l(()=>[e(le,{modelValue:d(S),"onUpdate:modelValue":r[0]||(r[0]=a=>v(S)?S.value=a:null),onTabClick:Y},{default:l(()=>[e(ae,{label:"\u5168\u90E8\u8BA2\u5355",name:""})]),_:1},8,["modelValue"]),e(b,{label:"\u8BA2\u5355\u72B6\u6001\uFF1A"},{default:l(()=>[e(M,{modelValue:d(C),"onUpdate:modelValue":r[1]||(r[1]=a=>v(C)?C.value=a:null),size:"large",fill:"#DC143C",onChange:Z},{default:l(()=>[e(m,{label:""},{default:l(()=>[t("\u5168\u90E8")]),_:1}),e(m,{label:"0"},{default:l(()=>[t("\u672A\u652F\u4ED8")]),_:1}),e(m,{label:"1"},{default:l(()=>[t("\u5236\u4F5C\u4E2D")]),_:1}),e(m,{label:"2"},{default:l(()=>[t("\u5F85\u6536\u8D27")]),_:1}),e(m,{label:"3"},{default:l(()=>[t("\u5DF2\u6536\u8D27/\u5DF2\u53D6\u9910")]),_:1}),e(m,{label:"5"},{default:l(()=>[t("\u9000\u6B3E\u5355")]),_:1}),e(m,{label:"6"},{default:l(()=>[t("\u5DF2\u5220\u9664")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(b,{label:"\u652F\u4ED8\u65B9\u5F0F\uFF1A"},{default:l(()=>[e(M,{modelValue:d(T),"onUpdate:modelValue":r[2]||(r[2]=a=>v(T)?T.value=a:null),size:"large",fill:"#FF1493",onChange:$},{default:l(()=>[e(m,{label:""},{default:l(()=>[t("\u5168\u90E8")]),_:1}),e(m,{label:"weixin"},{default:l(()=>[t("\u5FAE\u4FE1\u652F\u4ED8")]),_:1}),e(m,{label:"alipay"},{default:l(()=>[t("\u652F\u4ED8\u5B9D\u652F\u4ED8")]),_:1}),e(m,{label:"yue"},{default:l(()=>[t("\u4F59\u989D\u652F\u4ED8")]),_:1}),e(m,{label:"cash"},{default:l(()=>[t("\u73B0\u91D1\u652F\u4ED8")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(I,null,{default:l(()=>[e(re,{class:"-mb-15px",model:d(n),ref_key:"queryFormRef",ref:A,inline:!0,"label-width":"68px"},{default:l(()=>[e(b,{label:"\u8BA2\u5355\u53F7",prop:"orderId"},{default:l(()=>[e(U,{modelValue:d(n).orderId,"onUpdate:modelValue":r[3]||(r[3]=a=>d(n).orderId=a),placeholder:"\u8BF7\u8F93\u5165\u8BA2\u5355\u53F7",clearable:"",onKeyup:z(g,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),e(b,{label:"\u7528\u6237\u59D3\u540D",prop:"realName"},{default:l(()=>[e(U,{modelValue:d(n).realName,"onUpdate:modelValue":r[4]||(r[4]=a=>d(n).realName=a),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u59D3\u540D",clearable:"",onKeyup:z(g,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),e(b,{label:"\u7528\u6237\u7535\u8BDD",prop:"userPhone"},{default:l(()=>[e(U,{modelValue:d(n).userPhone,"onUpdate:modelValue":r[5]||(r[5]=a=>d(n).userPhone=a),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u7535\u8BDD",clearable:"",onKeyup:z(g,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),e(b,null,{default:l(()=>[e(h,{onClick:g},{default:l(()=>[e(P,{icon:"ep:search",class:"mr-5px"}),t(" \u641C\u7D22")]),_:1}),e(h,{onClick:ee},{default:l(()=>[e(P,{icon:"ep:refresh",class:"mr-5px"}),t(" \u91CD\u7F6E")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(I,null,{default:l(()=>[B((o(),k(de,{data:d(K),style:{width:"100%"}},{default:l(()=>[e(u,{label:"ID",align:"center",prop:"id"}),e(u,{label:"\u95E8\u5E97",align:"center",prop:"shopName",width:"100"}),e(u,{label:"\u684C\u53F7",align:"center",prop:"deskNumber"}),e(u,{label:"\u8BA2\u5355\u53F7",align:"center",prop:"orderId",width:"240"},{default:l(a=>[w("span",null,[a.row.orderType=="desk"?(o(),k(O,{key:0,class:"ml-2",type:"danger"},{default:l(()=>[t("\u5802\u98DF")]),_:1})):f("",!0),a.row.orderType=="takeout"?(o(),k(O,{key:1,class:"ml-2",type:"danger"},{default:l(()=>[t("\u5916\u5356")]),_:1})):f("",!0),a.row.orderType=="takein"?(o(),k(O,{key:2,class:"ml-2",type:"danger"},{default:l(()=>[t("\u81EA\u53D6")]),_:1})):f("",!0),t(" "+_(a.row.orderId),1)])]),_:1}),e(u,{label:"\u7528\u6237id\uFF5C\u6635\u79F0",align:"center",width:"120"},{default:l(a=>[w("span",null,_(a.row.uid)+"|"+_(a.row.userRespVO?a.row.userRespVO.nickname:"\u65E0"),1)]),_:1}),e(u,{label:"\u7528\u6237\u59D3\u540D|\u7535\u8BDD",align:"center",prop:"realName",width:"150"},{default:l(a=>[a.row.orderType=="takeout"?(o(),i("span",Ge,_(a.row.realName)+"|"+_(a.row.userPhone),1)):(o(),i("span",Je,"\u65E0"))]),_:1}),e(u,{label:"\u5546\u54C1\u4FE1\u606F",align:"center",prop:"userAddress",width:"350"},{default:l(a=>[(o(!0),i(Te,null,Ne(a.row.storeOrderCartInfoDOList,(y,R)=>(o(),i("div",{class:"tabBox",key:R},[w("div",Le,[w("img",{src:y.image},null,8,Me)]),w("span",We,_(y.title+" - ")+_(y.spec),1),w("span",He,_("\uFFE5"+y.price+" x "+y.number),1)]))),128))]),_:1}),e(u,{label:"\u5B9E\u9645\u652F\u4ED8",align:"center"},{default:l(a=>[a.row.paid==1?(o(),i("span",Qe,_(a.row.payPrice),1)):(o(),i("span",Xe,"\u672A\u652F\u4ED8"))]),_:1}),e(u,{label:"\u652F\u4ED8\u65B9\u5F0F",align:"center"},{default:l(a=>[a.row.paid==1?(o(),i("span",Ye,[a.row.payType=="yue"?(o(),i("span",Ze,"\u4F59\u989D\u652F\u4ED8")):f("",!0),a.row.payType=="weixin"?(o(),i("span",$e,"\u5FAE\u4FE1\u652F\u4ED8")):f("",!0),a.row.payType=="alipay"?(o(),i("span",ea,"\u652F\u4ED8\u5B9D\u652F\u4ED8")):f("",!0)])):(o(),i("span",aa))]),_:1}),e(u,{label:"\u8D2D\u4E70\u7C7B\u578B",align:"center"},{default:l(a=>[a.row.orderType=="takeout"?(o(),i("span",la,"\u5916\u5356")):f("",!0),a.row.orderType=="takein"?(o(),i("span",ra,"\u81EA\u53D6")):f("",!0)]),_:1}),e(u,{label:"\u652F\u4ED8\u65F6\u95F4",align:"center",prop:"payTime",formatter:d(Q),width:"120"},null,8,["formatter"]),e(u,{label:"\u8BA2\u5355\u72B6\u6001",align:"center",prop:"statusStr"}),e(u,{label:"\u6DFB\u52A0\u65F6\u95F4",align:"center",prop:"createTime",formatter:d(Q),width:"120"},null,8,["formatter"]),e(u,{label:"\u64CD\u4F5C",align:"center",fixed:"right",width:"150"},{default:l(a=>[w("div",ta,[a.row.statusStr=="\u672A\u652F\u4ED8"?B((o(),k(h,{key:0,link:"",type:"primary",onClick:y=>N("updateOrder",a.row.id)},{default:l(()=>[t(" \u7F16\u8F91 ")]),_:2},1032,["onClick"])),[[H,["order:store-order:update"]]]):f("",!0),a.row.statusStr=="\u672A\u53D1\u8D27"?B((o(),k(h,{key:1,link:"",type:"primary",onClick:y=>N("orderSend",a.row.id)},{default:l(()=>[t(" \u51FA\u5355 ")]),_:2},1032,["onClick"])),[[H,["order:store-order:update"]]]):f("",!0),e(oe,null,{dropdown:l(()=>[e(te,null,{default:l(()=>[a.row.statusStr=="\u672A\u652F\u4ED8"?(o(),k(W,{key:0,onClick:y=>(async R=>{try{await D.confirm("\u4FEE\u6539\u4E3A\u652F\u4ED8\u72B6\u6001"),await Ee(R),D.success(F("common.updateSuccess")),await c()}catch{}})(a.row.id)},{default:l(()=>[t("\u786E\u8BA4\u4ED8\u6B3E")]),_:2},1032,["onClick"])):f("",!0),e(W,{onClick:y=>N("orderDetail",a.row.id)},{default:l(()=>[t("\u8BA2\u5355\u8BE6\u60C5")]),_:2},1032,["onClick"])]),_:2},1024)]),default:l(()=>[e(h,{type:"primary",link:""},{default:l(()=>[e(P,{icon:"ep:d-arrow-right"}),t(" \u66F4\u591A")]),_:1})]),_:2},1024)])]),_:1})]),_:1},8,["data"])),[[ue,d(x)]]),e(se,{total:d(E),page:d(n).pageNo,"onUpdate:page":r[6]||(r[6]=a=>d(n).pageNo=a),limit:d(n).pageSize,"onUpdate:limit":r[7]||(r[7]=a=>d(n).pageSize=a),onPagination:c},null,8,["total","page","limit"])]),_:1}),e(Ke,{ref_key:"formRef",ref:q,onSuccess:c},null,512),e(Ae,{ref_key:"formRef1",ref:G,onSuccess:c},null,512),e(je,{ref_key:"formRef2",ref:J,onSuccess:c},null,512),e(qe,{ref_key:"formRef4",ref:L},null,512)]),_:1},8,["modelValue","title"])}}}),[["__scopeId","data-v-482d6ba7"]]);export{oa as default};
