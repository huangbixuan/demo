import{d as D,z as I,e as J,r as o,A as K,f as M,R as O,c as d,o as p,h as e,w as a,B as j,a as t,C as E,S as G,T as H,O as f,M as L,l as u,N as Q,J as y,n as W,p as X,i as Y,P as Z,F as $}from"./index-QQaZ7rbf.js";import{_ as ee}from"./index.vue_vue_type_script_setup_true_lang-CtP16Cnh.js";import{_ as ae}from"./ContentWrap.vue_vue_type_script_setup_true_lang-CerucUbi.js";import{d as le}from"./formatTime-esrXlwGe.js";import{a as te,d as ne}from"./index-BJHtJA0Z.js";import{_ as se}from"./WechatTemplateForm.vue_vue_type_script_setup_true_lang-Ubq6K7Jv.js";import"./index-BctfKmg_.js";import"./index-D_95hI5s.js";import"./Dialog.vue_vue_type_style_index_0_lang-BZRnyNPI.js";const pe={key:0},re={key:1},oe={key:2},ie=D({__name:"index2",setup(me){const b=I(),{t:V}=J(),g=o(!0),h=o(0),C=o([]),s=K({pageNo:1,pageSize:10,tempkey:null,name:null,content:null,tempid:null,createTime:[],status:null,type:null}),x=o();o(!1);const i=async()=>{g.value=!0;try{const m=await te(s);C.value=m.list,h.value=m.total}finally{g.value=!1}},_=()=>{s.pageNo=1,i()},F=()=>{x.value.resetFields(),_()},v=o(),S=(m,n)=>{v.value.open(m,n)};return M(()=>{i()}),(m,n)=>{const P=G,z=E,k=Q,c=L,R=j,N=ae,r=X,T=W,U=ee,w=O("hasPermi"),q=Z;return p(),d($,null,[e(N,null,{default:a(()=>[e(R,{class:"-mb-15px",model:t(s),ref_key:"queryFormRef",ref:x,inline:!0,"label-width":"68px"},{default:a(()=>[e(z,{label:"\u6A21\u677F\u540D",prop:"name"},{default:a(()=>[e(P,{modelValue:t(s).name,"onUpdate:modelValue":n[0]||(n[0]=l=>t(s).name=l),placeholder:"\u8BF7\u8F93\u5165\u6A21\u677F\u540D",clearable:"",onKeyup:H(_,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),e(z,null,{default:a(()=>[e(c,{onClick:_},{default:a(()=>[e(k,{icon:"ep:search",class:"mr-5px"}),u(" \u641C\u7D22")]),_:1}),e(c,{onClick:F},{default:a(()=>[e(k,{icon:"ep:refresh",class:"mr-5px"}),u(" \u91CD\u7F6E")]),_:1}),f((p(),y(c,{type:"primary",plain:"",onClick:n[1]||(n[1]=l=>S("create"))},{default:a(()=>[e(k,{icon:"ep:plus",class:"mr-5px"}),u(" \u65B0\u589E ")]),_:1})),[[w,["message:wechat-template:create"]]])]),_:1})]),_:1},8,["model"])]),_:1}),e(N,null,{default:a(()=>[f((p(),y(T,{data:t(C)},{default:a(()=>[e(r,{label:"\u6A21\u677Fid",align:"center",prop:"id"}),e(r,{label:"\u6A21\u677F\u7F16\u53F7",align:"center",prop:"tempkey"}),e(r,{label:"\u6A21\u677F\u540D",align:"center",prop:"name"}),e(r,{label:"\u6A21\u677FID",align:"center",prop:"tempid"}),e(r,{label:"\u7C7B\u578B",align:"center",prop:"type"},{default:a(l=>[l.row.type=="template"?(p(),d("span",pe,"\u6A21\u677F\u6D88\u606F")):Y("",!0),l.row.type=="subscribe"?(p(),d("span",re,"\u8BA2\u9605\u6D88\u606F")):(p(),d("span",oe))]),_:1}),e(r,{label:"\u6DFB\u52A0\u65F6\u95F4",align:"center",prop:"createTime",formatter:t(le)},null,8,["formatter"]),e(r,{label:"\u64CD\u4F5C",align:"center"},{default:a(l=>[f((p(),y(c,{link:"",type:"primary",onClick:A=>S("update",l.row.id)},{default:a(()=>[u(" \u7F16\u8F91 ")]),_:2},1032,["onClick"])),[[w,["message:wechat-template:update"]]]),f((p(),y(c,{link:"",type:"danger",onClick:A=>(async B=>{try{await b.delConfirm(),await ne(B),b.success(V("common.delSuccess")),await i()}catch{}})(l.row.id)},{default:a(()=>[u(" \u5220\u9664 ")]),_:2},1032,["onClick"])),[[w,["message:wechat-template:delete"]]])]),_:1})]),_:1},8,["data"])),[[q,t(g)]]),e(U,{total:t(h),page:t(s).pageNo,"onUpdate:page":n[2]||(n[2]=l=>t(s).pageNo=l),limit:t(s).pageSize,"onUpdate:limit":n[3]||(n[3]=l=>t(s).pageSize=l),onPagination:i},null,8,["total","page","limit"])]),_:1}),e(se,{ref_key:"formRef",ref:v,onSuccess:i},null,512)],64)}}});export{ie as default};
