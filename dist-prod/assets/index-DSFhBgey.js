import{d as D,r as d,A as V,c as v,o as c,h as a,w as p,B as E,a as e,C as F,D as G,F as x,G as P,dG as A,I as H,J as q,K as B,S as J,L as K,M as L,l as b,N as O,O as R,a7 as W,cm as j}from"./index-QQaZ7rbf.js";import{_ as X}from"./index.vue_vue_type_script_setup_true_lang-CtP16Cnh.js";import{_ as Q}from"./ContentWrap.vue_vue_type_script_setup_true_lang-CerucUbi.js";import{W as Z,g as $}from"./main-D8ejSx9U.js";import{M as ee}from"./types-VQvH2Qnl.js";import{_ as ae}from"./main.vue_vue_type_script_setup_true_lang-CdYlBeNF.js";import{_ as le}from"./MessageTable.vue_vue_type_script_setup_true_lang-Nklat-wV.js";import"./index-BctfKmg_.js";import"./index-D_95hI5s.js";import"./TabNews-mo0oRnuR.js";import"./main-B8cmAKC9.js";import"./el-image-DHi7RmhO.js";import"./main-BSp1ppd9.js";import"./main-CZZklA9W.js";import"./main.vue_vue_type_script_setup_true_lang-CtNEQeQ-.js";import"./index-BvM_QHiW.js";import"./index-COkZqY69.js";import"./formatTime-esrXlwGe.js";import"./main-DihDTKAv.js";import"./TabText.vue_vue_type_script_setup_true_lang-GGhtc3Am.js";import"./TabImage-DEdi2Zg_.js";import"./useUpload-uA0mAQ_g.js";import"./TabVoice-CyqrFiNP.js";import"./TabVideo-C--YXe8L.js";import"./TabMusic.vue_vue_type_script_setup_true_lang-Czrc2u0K.js";import"./MsgList-DIhIIgoD.js";import"./Msg.vue_vue_type_script_setup_true_lang-6vcmggxB.js";import"./main.vue_vue_type_script_setup_true_lang-Cdn7u86j.js";import"./main--NwUXV6B.js";import"./MsgEvent.vue_vue_type_script_setup_true_lang-Dbcasxw7.js";import"./index-DJTZl51b.js";import"./index-CKlW-SbG.js";const oe=D({name:"MpMessage",__name:"index",setup(te){const n=d(!1),u=d(0),f=d([]),l=V({pageNo:1,pageSize:10,openid:"",accountId:-1,type:ee.Text,createTime:[]}),_=d(null),s=V({show:!1,userId:0}),I=r=>{l.accountId=r,l.pageNo=1,m()},m=()=>{l.pageNo=1,g()},g=async()=>{try{n.value=!0;const r=await $(l);f.value=r.list,u.value=r.total}finally{n.value=!1}},M=async()=>{var o;const r=l.accountId;(o=_.value)==null||o.resetFields(),l.accountId=r,m()},N=async r=>{s.userId=r,s.show=!0};return(r,o)=>{const i=F,S=B,U=G,T=J,Y=K,h=O,y=L,k=E,w=Q,C=X,z=j;return c(),v(x,null,[a(w,null,{default:p(()=>[a(k,{class:"-mb-15px",model:e(l),ref_key:"queryFormRef",ref:_,inline:!0,"label-width":"68px"},{default:p(()=>[a(i,{label:"\u516C\u4F17\u53F7",prop:"accountId"},{default:p(()=>[a(e(ae),{onChange:I})]),_:1}),a(i,{label:"\u6D88\u606F\u7C7B\u578B",prop:"type"},{default:p(()=>[a(U,{modelValue:e(l).type,"onUpdate:modelValue":o[0]||(o[0]=t=>e(l).type=t),placeholder:"\u8BF7\u9009\u62E9\u6D88\u606F\u7C7B\u578B",class:"!w-240px"},{default:p(()=>[(c(!0),v(x,null,P(e(A)(e(H).MP_MESSAGE_TYPE),t=>(c(),q(S,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(i,{label:"\u7528\u6237\u6807\u8BC6",prop:"openid"},{default:p(()=>[a(T,{modelValue:e(l).openid,"onUpdate:modelValue":o[1]||(o[1]=t=>e(l).openid=t),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u6807\u8BC6",clearable:"","v-on":m,class:"!w-240px"},null,8,["modelValue"])]),_:1}),a(i,{label:"\u521B\u5EFA\u65F6\u95F4",prop:"createTime"},{default:p(()=>[a(Y,{modelValue:e(l).createTime,"onUpdate:modelValue":o[2]||(o[2]=t=>e(l).createTime=t),style:{width:"240px"},"value-format":"YYYY-MM-DD HH:mm:ss",type:"daterange","range-separator":"-","start-placeholder":"\u5F00\u59CB\u65E5\u671F","end-placeholder":"\u7ED3\u675F\u65E5\u671F","default-time":["00:00:00","23:59:59"],class:"!w-240px"},null,8,["modelValue"])]),_:1}),a(i,null,{default:p(()=>[a(y,{onClick:m},{default:p(()=>[a(h,{icon:"ep:search",class:"mr-5px"}),b(" \u641C\u7D22 ")]),_:1}),a(y,{onClick:M},{default:p(()=>[a(h,{icon:"ep:refresh",class:"mr-5px"}),b(" \u91CD\u7F6E ")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),a(w,null,{default:p(()=>[a(le,{list:e(f),loading:e(n),onSend:N},null,8,["list","loading"]),R(a(C,{total:e(u),page:e(l).pageNo,"onUpdate:page":o[3]||(o[3]=t=>e(l).pageNo=t),limit:e(l).pageSize,"onUpdate:limit":o[4]||(o[4]=t=>e(l).pageSize=t),onPagination:g},null,8,["total","page","limit"]),[[W,e(u)>0]])]),_:1}),a(z,{title:"\u7C89\u4E1D\u6D88\u606F\u5217\u8868",modelValue:e(s).show,"onUpdate:modelValue":o[5]||(o[5]=t=>e(s).show=t),onClick:o[6]||(o[6]=t=>e(s).show=!0),width:"50%","destroy-on-close":""},{default:p(()=>[a(e(Z),{"user-id":e(s).userId},null,8,["user-id"])]),_:1},8,["modelValue"])],64)}}});export{oe as default};
