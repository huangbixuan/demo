import{d as E,e as F,z as G,r as l,f as M,c as m,o as f,F as C,i as $,h as e,a as o,g as p,l as r,t as s,G as q,$ as A,w as t,k as B,M as H,_ as J}from"./index-QQaZ7rbf.js";import{E as K,a as L}from"./el-descriptions-item-BBtnvGnE.js";import{e as Q,t as U,o as V,f as W}from"./index-AwhozRCE.js";import{a as X,f as Y}from"./formatTime-esrXlwGe.js";import Z from"./help-B4Ek7LMd.js";import ee from"./settlement2-D3ppEXd1.js";import ae from"./ChangeDesk-DK1Evdqx.js";import"./el-drawer-PTxXA9Gz.js";import"./el-empty-DtZU1JEc.js";import"./el-dropdown-item-D1XCTc1V.js";import"./el-avatar-Bk2V5BPv.js";import"./category-Cad002jB.js";import"./product-Ckxj6eZ5.js";import"./index-D-uYqOkD.js";import"./index-DCAaTwVR.js";import"./settlement-B7gMaVg4.js";import"./slipay-ClwQEZyt.js";import"./UserSelect.vue_vue_type_script_setup_true_name_User_lang-DgBr_L2D.js";import"./Dialog.vue_vue_type_style_index_0_lang-BZRnyNPI.js";import"./index.vue_vue_type_script_setup_true_lang-CtP16Cnh.js";import"./index-BctfKmg_.js";import"./el-image-DHi7RmhO.js";import"./ContentWrap.vue_vue_type_script_setup_true_lang-CerucUbi.js";import"./index-D_95hI5s.js";import"./index-aKI4neIb.js";import"./payResult-B3JXS29c.js";import"./scanPay-DpRycoM8.js";import"./hangList.vue_vue_type_script_setup_true_name_settlement_lang-CBj79_xI.js";import"./index-BiAqHivH.js";import"./index-RcpyhGJW.js";const te={key:0,style:{padding:"0px 0px 80px 0px"}},re={style:{display:"flex","justify-content":"space-between","border-radius":"15px 15px 0 0",background:"linear-gradient(0deg, #ff8425, #ffa92e)",padding:"10px 20px 40px 15px",color:"#fff","margin-bottom":"20px"}},le={style:{"font-size":"30px","font-weight":"bolder"}},se={style:{"font-size":"12px","font-weight":"bolder","margin-top":"5px"}},oe={style:{"font-weight":"bolder","margin-top":"10px"}},ie=["onClick"],de={key:0},ue={key:1},ne={key:2},pe={style:{"margin-top":"30px","text-align":"center"}},me={style:{"margin-bottom":"10px"}},fe=J(E({__name:"OrderDetail3",emits:["success","dueTime"],setup(ce,{expose:N,emit:O}){const{t:P}=F(),c=G(),z=l(""),R=l(!1),_=l({});l(""),l({}),l([]),l(0);const i=l({}),k=l(0),w=l([]),d=l({}),h=async n=>{R.value=!0,i.value=n,d.value={},k.value=0,n.id||(i.value.bookStatus=1),z.value="\u684C\u53F0\uFF1A"+n.number,n.id&&T(n.id)};N({open:h});const S=l(),y=O,g=()=>{h({}),y("success")},T=async n=>{let v=await W(n);w.value=v};return M(()=>{}),(n,v)=>{const D=B,u=L,j=K,I=H;return f(),m(C,null,[o(i).bookStatus==1?(f(),m("div",te,[p("div",re,[p("div",null,[p("div",null,[r("\u684C\u53F0\uFF1A"),p("span",le,s(o(i).number),1)]),p("div",se,"\u5C31\u9910\u65F6\u95F4:"+s(o(i).lastOrderTime?o(X)(o(i).lastOrderTime)+"\u4E0B\u8FC7\u5355":"--"),1)]),p("span",oe,"\u4EBA\u6570\uFF1A"+s(o(_).deskPeople?o(_).deskPeople:"--")+"\u4EBA",1)]),(f(!0),m(C,null,q(o(w),(a,x)=>(f(),m("div",{key:x,class:A(o(k)==a.id?"selected-book":""),style:{cursor:"pointer"},onClick:ve=>{return b=a,k.value=b.id,d.value=b,void y("dueTime",{deskId:b.deskId,dueTime:b.dueTime});var b}},[e(j,{title:"\u8BA2\u5355\u4FE1\u606F",column:2},{title:t(()=>[r(" \u8BA2\u5355\u4FE1\u606F "),e(D,{type:"danger"},{default:t(()=>[r("\u5E8F\u53F71")]),_:1})]),default:t(()=>[e(u,{label:"\u95E8\u5E97"},{default:t(()=>[r(s(a.shopName),1)]),_:2},1024),e(u,{label:"\u684C\u4F4D\u53F7"},{default:t(()=>[r(s(a.deskNumber?a.deskNumber:"\u65E0"),1)]),_:2},1024),e(u,{label:"\u5C31\u9910\u4EBA\u6570"},{default:t(()=>[r(s(a.deskPeople)+"\u4EBA",1)]),_:2},1024),e(u,{label:"\u8BA2\u5355\u53F7"},{default:t(()=>[r(s(a.orderId),1)]),_:2},1024),e(u,{label:"\u9884\u7EA6\u65F6\u95F4"},{default:t(()=>[r(s(o(Y)(a.dueTime)),1)]),_:2},1024),e(u,{label:"\u5230\u5E97\u65F6\u95F4"},{default:t(()=>[r(s(a.reachTime),1)]),_:2},1024),e(u,{label:"\u9884\u7EA6\u4EBA"},{default:t(()=>[r(s(a.realName),1)]),_:2},1024),e(u,{label:"\u9884\u7EA6\u9884\u7559\u7535\u8BDD"},{default:t(()=>[r(s(a.userPhone),1)]),_:2},1024),e(u,{label:"\u9884\u7EA6\u72B6\u6001"},{default:t(()=>[a.dueStatus==1?(f(),m("span",de,"\u9884\u7EA6\u4E2D")):a.dueStatus==2?(f(),m("span",ue,"\u5DF2\u53D6\u6D88")):(f(),m("span",ne,"\u5DF2\u5B8C\u6210"))]),_:2},1024)]),_:2},1024)],10,ie))),128)),p("div",pe,[p("div",me,[e(I,{type:"warning",style:{background:"linear-gradient(0deg, #ff8425, #ffa92e)",width:"45%"},round:"",onClick:v[0]||(v[0]=a=>(async()=>{if(!i.value.id)return void c.error("\u8BF7\u5148\u9009\u62E9\u684C\u53F0\uFF01");let x=await Q(i.value.id);if(!d.value.id&&x>0)c.error("\u4ECA\u5929\u6709\u9884\u7EA6\u8BA2\u5355\uFF0C\u6E05\u9009\u62E9\u9884\u7EA6\u8BA2\u5355\u540E\u518D\u53BB\u70B9\u9910\u54E6");else{if(d.value.orderId&&!await U(d.value.orderId))return void c.error("\u6E05\u9009\u62E9\u4ECA\u5929\u7684\u9884\u7EA6\u8BA2\u5355,\u518D\u53BB\u70B9\u9910\u54E6");S.value.open(i.value,d.value)}})())},{default:t(()=>[r("\u534F\u52A9\u70B9\u9910")]),_:1}),e(I,{type:"warning",style:{background:"linear-gradient(0deg, #ff8425, #ffa92e)",width:"45%"},round:"",onClick:v[1]||(v[1]=a=>(async()=>{if(d.value.id)try{await c.confirm("\u786E\u5B9A\u53D6\u6D88\u9884\u7EA6"),await V(d.value.id),c.success(P("common.updateSuccess")),y("success"),T(d.value.deskId)}catch{}else c.error("\u8BF7\u9009\u62E9\u9700\u8981\u53D6\u6D88\u7684\u9884\u7EA6\u8BA2\u5355")})())},{default:t(()=>[r("\u53D6\u6D88\u9884\u7EA6")]),_:1})])])])):$("",!0),e(Z,{ref_key:"helpOrderRef",ref:S,onSuccess:g},null,512),e(ee,{ref:"settlementRef",onSuccess:g},null,512),e(ae,{ref:"changeDeskRef",onSuccess:g},null,512)],64)}}}),[["__scopeId","data-v-011725fc"]]);export{fe as default};
