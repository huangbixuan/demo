import{d as J,z as M,e as j,r as s,A as D,f as E,R as G,c,o as i,h as e,w as a,B as H,a as o,C as L,S as Q,T as F,O as f,M as W,l as d,N as X,J as g,n as Y,p as Z,P as $,F as ee}from"./index-QQaZ7rbf.js";import{_ as le}from"./index.vue_vue_type_script_setup_true_lang-CtP16Cnh.js";import{_ as ae}from"./ContentWrap.vue_vue_type_script_setup_true_lang-CerucUbi.js";import{d as C}from"./formatTime-esrXlwGe.js";import{_ as te,g as oe,d as re}from"./Form.vue_vue_type_script_setup_true_lang-BkVG8hFx.js";import{_ as ne}from"./OrderRecord.vue_vue_type_script_setup_true_lang-1x8fcZNa.js";import"./index-BctfKmg_.js";import"./index-D_95hI5s.js";import"./Dialog.vue_vue_type_style_index_0_lang-BZRnyNPI.js";import"./Materials-DPzAVFcF.js";import"./el-image-DHi7RmhO.js";import"./material-mdbw-jQF.js";import"./index-D-uYqOkD.js";import"./el-drawer-PTxXA9Gz.js";const ie={key:0},pe={key:1},se={key:0},ue={key:1},ce={key:2},de=J({__name:"index",setup(me){const x=M(),{t:P}=j(),w=s(!0),v=s(0),N=s([]),n=D({pageNo:1,pageSize:10,shopId:null,shopName:null,title:null,switch:null,least:null,value:null,startTime:[],endtIme:[],createTime:[],weigh:null,type:null,exchangeCode:null,receive:null,distribute:null,score:null,instructions:null,image:null,limit:null}),S=s();s(!1);const m=async()=>{w.value=!0;try{const p=await oe(n);N.value=p.list,v.value=p.total}finally{w.value=!1}},h=()=>{n.pageNo=1,m()},I=()=>{S.value.resetFields(),h()},T=s(),R=s(),_=(p,r)=>{p=="couponRecord"?R.value.open(p,r):T.value.open(p,r)};return E(()=>{m()}),(p,r)=>{const V=Q,b=L,k=X,u=W,K=H,z=ae,t=Z,O=Y,q=le,y=G("hasPermi"),A=$;return i(),c(ee,null,[e(z,null,{default:a(()=>[e(K,{class:"-mb-15px",model:o(n),ref_key:"queryFormRef",ref:S,inline:!0,"label-width":"100px"},{default:a(()=>[e(b,{label:"\u5E97\u94FA\u540D\u79F0",prop:"shopName"},{default:a(()=>[e(V,{modelValue:o(n).shopName,"onUpdate:modelValue":r[0]||(r[0]=l=>o(n).shopName=l),placeholder:"\u8BF7\u8F93\u5165\u5E97\u94FA\u540D\u79F0",clearable:"",onKeyup:F(h,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),e(b,{label:"\u4F18\u60E0\u5238\u540D\u79F0",prop:"title"},{default:a(()=>[e(V,{modelValue:o(n).title,"onUpdate:modelValue":r[1]||(r[1]=l=>o(n).title=l),placeholder:"\u8BF7\u8F93\u5165\u4F18\u60E0\u5238\u540D\u79F0",clearable:"",onKeyup:F(h,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),e(b,null,{default:a(()=>[e(u,{onClick:h},{default:a(()=>[e(k,{icon:"ep:search",class:"mr-5px"}),d(" \u641C\u7D22")]),_:1}),e(u,{onClick:I},{default:a(()=>[e(k,{icon:"ep:refresh",class:"mr-5px"}),d(" \u91CD\u7F6E")]),_:1}),f((i(),g(u,{type:"primary",onClick:r[2]||(r[2]=l=>_("create"))},{default:a(()=>[e(k,{icon:"ep:plus",class:"mr-5px"}),d(" \u65B0\u589E ")]),_:1})),[[y,["coupon::create"]]])]),_:1})]),_:1},8,["model"])]),_:1}),e(z,null,{default:a(()=>[f((i(),g(O,{data:o(N)},{default:a(()=>[e(t,{label:"id",align:"center",prop:"id"}),e(t,{label:"\u53EF\u7528\u5E97\u94FA",align:"center",prop:"shopName",width:"150"}),e(t,{label:"\u4F18\u60E0\u5238\u540D\u79F0",align:"center",prop:"title",width:"150"}),e(t,{label:"\u662F\u5426\u4E0A\u67B6",align:"center",prop:"isSwitch"},{default:a(l=>[l.row.isSwitch==1?(i(),c("span",ie,"\u4E0A\u67B6")):(i(),c("span",pe,"\u4E0B\u67B6"))]),_:1}),e(t,{label:"\u6D88\u8D39\u591A\u5C11\u53EF\u7528",align:"center",prop:"least",width:"150"}),e(t,{label:"\u4F18\u60E0\u5238\u91D1\u989D",align:"center",prop:"value",width:"150"}),e(t,{label:"\u53EF\u7528\u7C7B\u578B",align:"center",prop:"type"},{default:a(l=>[l.row.type==1?(i(),c("span",se,"\u81EA\u53D6")):l.row.type==0?(i(),c("span",ue,"\u5916\u5356")):(i(),c("span",ce,"\u901A\u7528"))]),_:1}),e(t,{label:"\u5151\u6362\u7801",align:"center",prop:"exchangeCode"}),e(t,{label:"\u5DF2\u9886",align:"center",prop:"receive"}),e(t,{label:"\u53D1\u884C\u6570\u91CF",align:"center",prop:"distribute"}),e(t,{label:"\u9650\u9886\u6570\u91CF",align:"center",prop:"limit"}),e(t,{label:"\u5F00\u59CB\u65F6\u95F4",align:"center",prop:"startTime",formatter:o(C),width:"170"},null,8,["formatter"]),e(t,{label:"\u7ED3\u675F\u65F6\u95F4",align:"center",prop:"endTime",formatter:o(C),width:"170"},null,8,["formatter"]),e(t,{label:"\u521B\u5EFA\u65F6\u95F4",align:"center",prop:"createTime",formatter:o(C),width:"170"},null,8,["formatter"]),e(t,{label:"\u64CD\u4F5C",align:"center",fixed:"right",width:"150"},{default:a(l=>[f((i(),g(u,{link:"",type:"primary",onClick:U=>_("update",l.row.id)},{default:a(()=>[d(" \u7F16\u8F91 ")]),_:2},1032,["onClick"])),[[y,["coupon::update"]]]),f((i(),g(u,{link:"",type:"danger",onClick:U=>(async B=>{try{await x.delConfirm(),await re(B),x.success(P("common.delSuccess")),await m()}catch{}})(l.row.id)},{default:a(()=>[d(" \u5220\u9664 ")]),_:2},1032,["onClick"])),[[y,["coupon::delete"]]]),f((i(),g(u,{link:"",type:"primary",onClick:U=>_("couponRecord",l.row.id)},{default:a(()=>[d(" \u9886\u53D6\u8BB0\u5F55 ")]),_:2},1032,["onClick"])),[[y,["coupon::delete"]]])]),_:1})]),_:1},8,["data"])),[[A,o(w)]]),e(q,{total:o(v),page:o(n).pageNo,"onUpdate:page":r[3]||(r[3]=l=>o(n).pageNo=l),limit:o(n).pageSize,"onUpdate:limit":r[4]||(r[4]=l=>o(n).pageSize=l),onPagination:m},null,8,["total","page","limit"])]),_:1}),e(te,{ref_key:"formRef",ref:T,onSuccess:m},null,512),e(ne,{ref_key:"formRef5",ref:R},null,512)],64)}}});export{de as default};
