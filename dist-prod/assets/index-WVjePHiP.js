import{d as B,z as J,e as j,r as n,A as E,f as G,R as H,c as L,o as d,h as e,w as a,B as Q,a as l,C as W,S as X,T as z,O as u,M as Y,l as c,N as Z,J as f,n as $,p as ee,I as ae,P as le,F as oe}from"./index-QQaZ7rbf.js";import{_ as te}from"./index.vue_vue_type_script_setup_true_lang-CtP16Cnh.js";import{_ as se}from"./DictTag.vue_vue_type_script_lang-DFL6gWod.js";import{_ as pe}from"./ContentWrap.vue_vue_type_script_setup_true_lang-CerucUbi.js";import{d as re}from"./formatTime-esrXlwGe.js";import{d as ie}from"./download--D_IyRio.js";import{S as x}from"./index-RcpyhGJW.js";import{_ as ne}from"./ShopDeskCategoryForm.vue_vue_type_script_setup_true_lang-oqDBN52y.js";import"./index-BctfKmg_.js";import"./color-xEzN0Pg5.js";import"./index-D_95hI5s.js";import"./Dialog.vue_vue_type_style_index_0_lang-BZRnyNPI.js";import"./index-D-uYqOkD.js";import"./constants-D0aoFN3l.js";const de=B({name:"ShopDeskCategory",__name:"index",setup(ce){const k=J(),{t:D}=j(),_=n(!0),C=n([]),b=n(0),t=E({pageNo:1,pageSize:10,shopId:void 0,parentId:void 0,shopName:void 0,name:void 0,picUrl:void 0,people:void 0,sort:void 0,description:void 0,status:void 0,createTime:[]}),S=n(),v=n(!1),m=async()=>{_.value=!0;try{const r=await x.getShopDeskCategoryPage(t);C.value=r.list,b.value=r.total}finally{_.value=!1}},g=()=>{t.pageNo=1,m()},F=()=>{S.value.resetFields(),g()},N=n(),U=(r,s)=>{N.value.open(r,s)},P=async()=>{try{await k.exportConfirm(),v.value=!0;const r=await x.exportShopDeskCategory(t);ie.excel(r,"\u95E8\u5E97\u684C\u53F7\u5206\u7C7B.xls")}catch{}finally{v.value=!1}};return G(()=>{m()}),(r,s)=>{const V=X,w=W,y=Z,i=Y,I=Q,T=pe,p=ee,M=se,O=$,R=te,h=H("hasPermi"),A=le;return d(),L(oe,null,[e(T,null,{default:a(()=>[e(I,{class:"-mb-15px",model:l(t),ref_key:"queryFormRef",ref:S,inline:!0,"label-width":"68px"},{default:a(()=>[e(w,{label:"\u5E97\u94FA\u540D\u79F0",prop:"shopName"},{default:a(()=>[e(V,{modelValue:l(t).shopName,"onUpdate:modelValue":s[0]||(s[0]=o=>l(t).shopName=o),placeholder:"\u8BF7\u8F93\u5165\u5E97\u94FA\u540D\u79F0",clearable:"",onKeyup:z(g,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),e(w,{label:"\u5206\u7C7B\u540D\u79F0",prop:"name"},{default:a(()=>[e(V,{modelValue:l(t).name,"onUpdate:modelValue":s[1]||(s[1]=o=>l(t).name=o),placeholder:"\u8BF7\u8F93\u5165\u5206\u7C7B\u540D\u79F0",clearable:"",onKeyup:z(g,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),e(w,null,{default:a(()=>[e(i,{onClick:g},{default:a(()=>[e(y,{icon:"ep:search",class:"mr-5px"}),c(" \u641C\u7D22")]),_:1}),e(i,{onClick:F},{default:a(()=>[e(y,{icon:"ep:refresh",class:"mr-5px"}),c(" \u91CD\u7F6E")]),_:1}),u((d(),f(i,{type:"primary",plain:"",onClick:s[2]||(s[2]=o=>U("create"))},{default:a(()=>[e(y,{icon:"ep:plus",class:"mr-5px"}),c(" \u65B0\u589E ")]),_:1})),[[h,["desk:shop-desk-category:create"]]]),u((d(),f(i,{type:"success",plain:"",onClick:P,loading:l(v)},{default:a(()=>[e(y,{icon:"ep:download",class:"mr-5px"}),c(" \u5BFC\u51FA ")]),_:1},8,["loading"])),[[h,["desk:shop-desk-category:export"]]])]),_:1})]),_:1},8,["model"])]),_:1}),e(T,null,{default:a(()=>[u((d(),f(O,{data:l(C),stripe:!0,"show-overflow-tooltip":!0},{default:a(()=>[e(p,{label:"\u5206\u7C7B\u7F16\u53F7",align:"center",prop:"id"}),e(p,{label:"\u5E97\u94FA\u540D\u79F0",align:"center",prop:"shopName"}),e(p,{label:"\u5206\u7C7B\u540D\u79F0",align:"center",prop:"name"}),e(p,{label:"\u4EBA\u6570",align:"center",prop:"people"}),e(p,{label:"\u5206\u7C7B\u6392\u5E8F",align:"center",prop:"sort"}),e(p,{label:"\u5F00\u542F\u72B6\u6001",align:"center",prop:"status"},{default:a(o=>[e(M,{type:l(ae).COMMON_STATUS,value:o.row.status},null,8,["type","value"])]),_:1}),e(p,{label:"\u521B\u5EFA\u65F6\u95F4",align:"center",prop:"createTime",formatter:l(re),width:"180px"},null,8,["formatter"]),e(p,{label:"\u64CD\u4F5C",align:"center"},{default:a(o=>[u((d(),f(i,{link:"",type:"primary",onClick:K=>U("update",o.row.id)},{default:a(()=>[c(" \u7F16\u8F91 ")]),_:2},1032,["onClick"])),[[h,["desk:shop-desk-category:update"]]]),u((d(),f(i,{link:"",type:"danger",onClick:K=>(async q=>{try{await k.delConfirm(),await x.deleteShopDeskCategory(q),k.success(D("common.delSuccess")),await m()}catch{}})(o.row.id)},{default:a(()=>[c(" \u5220\u9664 ")]),_:2},1032,["onClick"])),[[h,["desk:shop-desk-category:delete"]]])]),_:1})]),_:1},8,["data"])),[[A,l(_)]]),e(R,{total:l(b),page:l(t).pageNo,"onUpdate:page":s[3]||(s[3]=o=>l(t).pageNo=o),limit:l(t).pageSize,"onUpdate:limit":s[4]||(s[4]=o=>l(t).pageSize=o),onPagination:m},null,8,["total","page","limit"])]),_:1}),e(ne,{ref_key:"formRef",ref:N,onSuccess:m},null,512)],64)}}});export{de as default};
