import{d as B,z as J,e as K,r as m,A as O,f as T,R as j,c as b,o,h as a,w as e,B as D,a as n,C as E,S as G,T as H,O as d,M as L,l as p,N as Q,J as f,n as W,p as X,P as Y,F as Z}from"./index-QQaZ7rbf.js";import{_ as $}from"./index.vue_vue_type_script_setup_true_lang-CtP16Cnh.js";import{_ as aa}from"./ContentWrap.vue_vue_type_script_setup_true_lang-CerucUbi.js";import{_ as ea,g as la,d as ta,s as na}from"./AccountForm.vue_vue_type_script_name_MpAccountForm_setup_true_lang-DgPUmSLC.js";import"./index-BctfKmg_.js";import"./index-D_95hI5s.js";import"./Dialog.vue_vue_type_style_index_0_lang-BZRnyNPI.js";const sa={key:0,style:{color:"red"}},oa={key:1},ra=B({__name:"index",setup(ia){const y=J(),{t:M}=K(),k=m(!0),h=m(0),x=m([]),s=O({pageNo:1,pageSize:10,name:null,account:null,appId:null}),v=m(),r=async()=>{k.value=!0;try{const c=await la(s);x.value=c.list,h.value=c.total}finally{k.value=!1}},w=()=>{s.pageNo=1,r()},P=()=>{v.value.resetFields(),w()},S=m(),N=(c,t)=>{S.value.open(c,t)};return T(()=>{r()}),(c,t)=>{const R=G,z=E,C=Q,i=L,U=D,F=aa,u=X,V=W,q=$,_=j("hasPermi"),A=Y;return o(),b(Z,null,[a(F,null,{default:e(()=>[a(U,{class:"-mb-15px",model:n(s),ref_key:"queryFormRef",ref:v,inline:!0,"label-width":"68px"},{default:e(()=>[a(z,{label:"\u540D\u79F0",prop:"name"},{default:e(()=>[a(R,{modelValue:n(s).name,"onUpdate:modelValue":t[0]||(t[0]=l=>n(s).name=l),placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0",clearable:"",onKeyup:H(w,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),a(z,null,{default:e(()=>[a(i,{onClick:w},{default:e(()=>[a(C,{icon:"ep:search",class:"mr-5px"}),p("\u641C\u7D22")]),_:1}),a(i,{onClick:P},{default:e(()=>[a(C,{icon:"ep:refresh",class:"mr-5px"}),p("\u91CD\u7F6E")]),_:1}),d((o(),f(i,{type:"primary",onClick:t[1]||(t[1]=l=>N("create"))},{default:e(()=>[a(C,{icon:"ep:plus",class:"mr-5px"}),p(" \u65B0\u589E ")]),_:1})),[[_,["ma:account:create"]]])]),_:1})]),_:1},8,["model"])]),_:1}),a(F,null,{default:e(()=>[d((o(),f(V,{data:n(x)},{default:e(()=>[a(u,{label:"\u540D\u79F0",align:"center",prop:"name"}),a(u,{label:"appId",align:"center",prop:"appId",width:"180"}),a(u,{label:"\u662F\u5426\u662F\u4E3B\u8D26\u6237",align:"center",prop:"isMain"},{default:e(l=>[l.row.isMain==1?(o(),b("span",sa,"\u662F")):(o(),b("span",oa,"\u5426"))]),_:1}),a(u,{label:"\u5907\u6CE8",align:"center",prop:"remark"}),a(u,{label:"\u64CD\u4F5C",align:"center"},{default:e(l=>[d((o(),f(i,{link:"",type:"primary",onClick:I=>N("update",l.row.id)},{default:e(()=>[p(" \u7F16\u8F91 ")]),_:2},1032,["onClick"])),[[_,["ma:account:update"]]]),d((o(),f(i,{link:"",type:"danger",onClick:I=>(async g=>{try{await y.delConfirm(),await ta(g),y.success(M("common.delSuccess")),await r()}catch{}})(l.row.id)},{default:e(()=>[p(" \u5220\u9664 ")]),_:2},1032,["onClick"])),[[_,["ma:account:delete"]]]),d((o(),f(i,{link:"",type:"primary",onClick:I=>(async g=>{try{await y.confirm('\u662F\u5426\u786E\u8BA4\u8BBE\u7F6E\u516C\u4F17\u53F7\u8D26\u53F7\u7F16\u53F7\u4E3A"'+g.name+'"\u4E3B\u8D26\u6237?'),await na(g.id),y.success("\u8BBE\u7F6E\u6210\u529F"),r()}catch{}})(l.row)},{default:e(()=>[p(" \u8BBE\u7F6E\u4E3A\u4E3B\u8D26\u6237 ")]),_:2},1032,["onClick"])),[[_,["ma:account:set-main"]]])]),_:1})]),_:1},8,["data"])),[[A,n(k)]]),a(q,{total:n(h),page:n(s).pageNo,"onUpdate:page":t[2]||(t[2]=l=>n(s).pageNo=l),limit:n(s).pageSize,"onUpdate:limit":t[3]||(t[3]=l=>n(s).pageSize=l),onPagination:r},null,8,["total","page","limit"])]),_:1}),a(ea,{ref_key:"formRef",ref:S,onSuccess:r},null,512)],64)}}});export{ra as default};
