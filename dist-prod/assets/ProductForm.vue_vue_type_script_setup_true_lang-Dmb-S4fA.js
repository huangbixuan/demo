import{aU as m,d as N,e as W,z as J,r as u,A as P,aG as K,J as b,o as f,w as i,O as L,B as T,a as l,h as t,C as X,S as Q,D as Y,c as Z,F as $,G as ee,K as le,am as ae,aW as te,aX as oe,l as v,P as ie,M as re,x as de}from"./index-QQaZ7rbf.js";import{_ as se}from"./Dialog.vue_vue_type_style_index_0_lang-BZRnyNPI.js";import{_ as ue}from"./Materials-DPzAVFcF.js";import{P as ce}from"./index-BKzVBTyv.js";const ne=async p=>await m.get({url:"/score/product/page",params:p}),me=async p=>await m.delete({url:"/score/product/delete?id="+p}),pe=N({__name:"ProductForm",emits:["success"],setup(p,{expose:q,emit:I}){const{t:h}=W(),w=J(),c=u(!1),V=u(""),n=u(!1),y=u(""),o=u({id:void 0,title:void 0,image:void 0,images:void 0,desc:void 0,score:void 0,weigh:void 0,stock:void 0,sales:void 0,isSwitch:void 0}),S=P({title:[{required:!0,message:"\u4EA7\u54C1\u6807\u9898\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],cateId:[{required:!0,message:"\u8BF7\u9009\u62E9\u5546\u54C1\u5206\u7C7B",trigger:"blur"}],image:[{required:!0,message:"\u4E3B\u56FE\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],images:[{required:!0,message:"\u7EC4\u56FE\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],desc:[{required:!0,message:"\u8BE6\u60C5\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],score:[{required:!0,message:"\u6D88\u8017\u79EF\u5206\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],otPrice:[{required:!0,message:"\u5546\u54C1\u539F\u4EF7\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],stock:[{required:!0,message:"\u5E93\u5B58\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),_=u([]),E=P({autoHeightEnabled:!1,initialFrameHeight:500,initialFrameWidth:"100%",UEDITOR_HOME_URL:"/UEditor/",serverUrl:"",zIndex:9999,toolbars:[["undo","redo","|","bold","italic","underline","fontborder","strikethrough","superscript","subscript","removeformat","formatmatch","autotypeset","blockquote","pasteplain","|","forecolor","backcolor","insertorderedlist","insertunorderedlist","selectall","cleardoc","|","rowspacingtop","rowspacingbottom","lineheight","|","customstyle","paragraph","fontfamily","fontsize","|","directionalityltr","directionalityrtl","indent","|","justifyleft","justifycenter","justifyright","justifyjustify","|","touppercase","tolowercase","|","imagenone","imageleft","imageright","imagecenter"]]}),g=u();q({open:async(s,e)=>{if(c.value=!0,V.value=h("action."+s),y.value=s,z(),e){n.value=!0;try{o.value=await(async r=>await m.get({url:"/score/product/get?id="+r}))(e)}finally{n.value=!1}}const d=await ce.getProductCategoryPage({pageNo:1,pageSize:20});_.value=d.list}});const R=I,F=async()=>{if(g&&await g.value.validate()){n.value=!0;try{const s=o.value;y.value==="create"?(await(async e=>await m.post({url:"/score/product/create",data:e}))(s),w.success(h("common.createSuccess"))):(await(async e=>await m.put({url:"/score/product/update",data:e}))(s),w.success(h("common.updateSuccess"))),c.value=!1,R("success")}finally{n.value=!1}}},j=()=>{window.UE.registerUI("yshop",function(s,e){let d=new window.UE.ui.Dialog({iframeUrl:"/yshop/materia/index",editor:s,name:e,title:"\u4E0A\u4F20\u56FE\u7247",cssRules:"width:1200px;height:650px;padding:20px;"});return this.dialog=d,new window.UE.ui.Button({name:"dialog-button",title:"\u4E0A\u4F20\u56FE\u7247",cssRules:"background-image: url(../../../assets/imgs/icons.png);background-position: -726px -77px;",onclick:function(){d.render(),d.open()}})},37)},z=()=>{var s;o.value={id:void 0,title:void 0,image:void 0,images:void 0,desc:void 0,score:0,weigh:void 0,stock:0,sales:void 0,price:0,otPrice:0,isSwitch:1},(s=g.value)==null||s.resetFields()};return(s,e)=>{const d=Q,r=X,C=le,H=Y,U=ue,B=K("vue-ueditor-wrap"),D=ae,k=oe,O=te,A=T,x=re,G=se,M=ie;return f(),b(G,{title:l(V),modelValue:l(c),"onUpdate:modelValue":e[12]||(e[12]=a=>de(c)?c.value=a:null),width:"60%"},{footer:i(()=>[t(x,{onClick:F,type:"primary",disabled:l(n)},{default:i(()=>[v("\u786E \u5B9A")]),_:1},8,["disabled"]),t(x,{onClick:e[11]||(e[11]=a=>c.value=!1)},{default:i(()=>[v("\u53D6 \u6D88")]),_:1})]),default:i(()=>[L((f(),b(A,{ref_key:"formRef",ref:g,model:l(o),rules:l(S),"label-width":"100px"},{default:i(()=>[t(r,{label:"\u4EA7\u54C1\u6807\u9898",prop:"title"},{default:i(()=>[t(d,{modelValue:l(o).title,"onUpdate:modelValue":e[0]||(e[0]=a=>l(o).title=a),placeholder:"\u8BF7\u8F93\u5165\u4EA7\u54C1\u6807\u9898"},null,8,["modelValue"])]),_:1}),t(r,{label:"\u5546\u54C1\u5206\u7C7B",prop:"cateId"},{default:i(()=>[t(H,{modelValue:l(o).cateId,"onUpdate:modelValue":e[1]||(e[1]=a=>l(o).cateId=a),placeholder:"\u9009\u62E9\u5546\u54C1\u5206\u7C7B"},{default:i(()=>[(f(!0),Z($,null,ee(l(_),a=>(f(),b(C,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(r,{label:"\u4E3B\u56FE",prop:"image"},{default:i(()=>[t(U,{modelValue:l(o).image,"onUpdate:modelValue":e[2]||(e[2]=a=>l(o).image=a),num:"1",type:"image"},null,8,["modelValue"])]),_:1}),t(r,{label:"\u7EC4\u56FE",prop:"images"},{default:i(()=>[t(U,{modelValue:l(o).images,"onUpdate:modelValue":e[3]||(e[3]=a=>l(o).images=a),num:"5",type:"image"},null,8,["modelValue"])]),_:1}),t(r,{label:"\u8BE6\u60C5",prop:"desc"},{default:i(()=>[t(B,{modelValue:l(o).desc,"onUpdate:modelValue":e[4]||(e[4]=a=>l(o).desc=a),config:l(E),onBeforeInit:j,style:{width:"90%"}},null,8,["modelValue","config"])]),_:1}),t(r,{label:"\u6D88\u8017\u79EF\u5206",prop:"score"},{default:i(()=>[t(d,{modelValue:l(o).score,"onUpdate:modelValue":e[5]||(e[5]=a=>l(o).score=a),placeholder:"\u8BF7\u8F93\u5165\u6D88\u8017\u79EF\u5206"},null,8,["modelValue"])]),_:1}),t(r,{label:"\u8D2D\u4E70\u91D1\u989D",prop:"price"},{default:i(()=>[t(d,{modelValue:l(o).price,"onUpdate:modelValue":e[6]||(e[6]=a=>l(o).price=a),placeholder:"\u8BF7\u8F93\u5165\u91D1\u989D"},null,8,["modelValue"]),t(D,{title:"\u5F53\u79EF\u5206\u4E0E\u91D1\u989D\u90FD\u5927\u4E8E0\u8868\u793A\u6B64\u5546\u54C1\u9700\u8981\u79EF\u5206+\u4EF7\u683C\u8D2D\u4E70",type:"error"})]),_:1}),t(r,{label:"\u5546\u54C1\u539F\u4EF7",prop:"otPrice"},{default:i(()=>[t(d,{modelValue:l(o).otPrice,"onUpdate:modelValue":e[7]||(e[7]=a=>l(o).otPrice=a),placeholder:"\u8BF7\u8F93\u5165\u91D1\u989D"},null,8,["modelValue"])]),_:1}),t(r,{label:"\u5E93\u5B58",prop:"stock"},{default:i(()=>[t(d,{modelValue:l(o).stock,"onUpdate:modelValue":e[8]||(e[8]=a=>l(o).stock=a),placeholder:"\u8BF7\u8F93\u5165\u5E93\u5B58"},null,8,["modelValue"])]),_:1}),t(r,{label:"\u6743\u91CD",prop:"weigh"},{default:i(()=>[t(d,{modelValue:l(o).weigh,"onUpdate:modelValue":e[9]||(e[9]=a=>l(o).weigh=a),placeholder:"\u8BF7\u8F93\u5165\u6743\u91CD"},null,8,["modelValue"])]),_:1}),t(r,{label:"\u662F\u5426\u4E0A\u67B6",prop:"isSwitch"},{default:i(()=>[t(O,{modelValue:l(o).isSwitch,"onUpdate:modelValue":e[10]||(e[10]=a=>l(o).isSwitch=a)},{default:i(()=>[t(k,{label:1},{default:i(()=>[v("\u4E0A\u67B6")]),_:1}),t(k,{label:0},{default:i(()=>[v("\u4E0B\u67B6")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[M,l(n)]])]),_:1},8,["title","modelValue"])}}});export{pe as _,me as d,ne as g};
